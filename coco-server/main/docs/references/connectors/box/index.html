<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.79.1"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Box Cloud Storage Connector #  Register Box Connector #  curl -XPOST &#34;http://localhost:9000/connector/&#34; -d '{ &#34;name&#34;: &#34;Box Cloud Storage Connector&#34;, &#34;description&#34;: &#34;Index files and folders from Box, supporting both Free and Enterprise accounts with multi-user access.&#34;, &#34;icon&#34;: &#34;/assets/icons/connector/box/icon.png&#34;, &#34;category&#34;: &#34;cloud_storage&#34;, &#34;path_hierarchy&#34;: false, &#34;tags&#34;: [ &#34;box&#34;, &#34;cloud_storage&#34;, &#34;file_sharing&#34; ], &#34;url&#34;: &#34;http://coco.rs/connectors/box&#34;, &#34;assets&#34;: { &#34;icons&#34;: { &#34;default&#34;: &#34;/assets/icons/connector/box/icon.png&#34;, &#34;bookmark&#34;: &#34;/assets/icons/connector/box/bookmark.png&#34;, &#34;boxcanvas&#34;: &#34;/assets/icons/connector/box/boxcanvas.png&#34;, &#34;boxnote&#34;: &#34;/assets/icons/connector/box/boxnote.png&#34;, &#34;docx&#34;: &#34;/assets/icons/connector/box/docx.png&#34;, &#34;excel-spreadsheet&#34;: &#34;/assets/icons/connector/box/excel-spreadsheet.png&#34;, &#34;google-docs&#34;: &#34;/assets/icons/connector/box/google-docs.png&#34;, &#34;google-sheets&#34;: &#34;/assets/icons/connector/box/google-sheets."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="Box"><meta property="og:description" content="Box Cloud Storage Connector #  Register Box Connector #  curl -XPOST &#34;http://localhost:9000/connector/&#34; -d '{ &#34;name&#34;: &#34;Box Cloud Storage Connector&#34;, &#34;description&#34;: &#34;Index files and folders from Box, supporting both Free and Enterprise accounts with multi-user access.&#34;, &#34;icon&#34;: &#34;/assets/icons/connector/box/icon.png&#34;, &#34;category&#34;: &#34;cloud_storage&#34;, &#34;path_hierarchy&#34;: false, &#34;tags&#34;: [ &#34;box&#34;, &#34;cloud_storage&#34;, &#34;file_sharing&#34; ], &#34;url&#34;: &#34;http://coco.rs/connectors/box&#34;, &#34;assets&#34;: { &#34;icons&#34;: { &#34;default&#34;: &#34;/assets/icons/connector/box/icon.png&#34;, &#34;bookmark&#34;: &#34;/assets/icons/connector/box/bookmark.png&#34;, &#34;boxcanvas&#34;: &#34;/assets/icons/connector/box/boxcanvas.png&#34;, &#34;boxnote&#34;: &#34;/assets/icons/connector/box/boxnote.png&#34;, &#34;docx&#34;: &#34;/assets/icons/connector/box/docx.png&#34;, &#34;excel-spreadsheet&#34;: &#34;/assets/icons/connector/box/excel-spreadsheet.png&#34;, &#34;google-docs&#34;: &#34;/assets/icons/connector/box/google-docs.png&#34;, &#34;google-sheets&#34;: &#34;/assets/icons/connector/box/google-sheets."><meta property="og:type" content="article"><meta property="og:url" content="/coco-server/main/docs/references/connectors/box/"><title>Box | Coco Server</title><link rel=manifest href=/coco-server/main/manifest.json><link rel=icon href=/coco-server/main/favicon.png type=image/x-icon><link rel=stylesheet href=/coco-server/main/book.min.0c7caf230520e6c6ba3c3867f96bcc599745ad90fad4bc94d74b5278dd3ec4a2.css integrity="sha256-DHyvIwUg5sa6PDhn+WvMWZdFrZD61LyU10tSeN0+xKI="><script defer src=/coco-server/main/js/jquery-2.x.min.js></script><script defer src=/coco-server/main/js/doc.js></script></head><body><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=/coco-server/main><img src=/coco-server/main/img/logo-en.svg alt=Logo></a></h2><div id=searchbox style=margin-bottom:10px;outline:none></div><script>function waitForShadow(host,callback){const timer=setInterval(()=>{if(host.shadowRoot){clearInterval(timer);callback(host.shadowRoot);}},50);}
const host=document.querySelector('#searchbox');waitForShadow(host,(shadow)=>{const style=document.createElement('style');style.textContent=`
      .infini__searchbox-btn {
        width: 100% !important;
        height: 36px !important;
      }
    `;shadow.appendChild(style);});</script><div class=heading><select class=version-selector>
<option value>main (latest)</option>
<option value=v0.10.0>v0.10.0</option>
<option value=v0.9.1>v0.9.1</option>
<option value=v0.9.0>v0.9.0</option>
<option value=v0.8.0>v0.8.0</option>
<option value=v0.7.1>v0.7.1</option>
<option value=v0.7.0>v0.7.0</option>
<option value=v0.6.0>v0.6.0</option>
<option value=v0.5.0>v0.5.0</option>
<option value=v0.4.0>v0.4.0</option>
<option value=v0.3.0>v0.3.0</option>
<option value=v0.2.2>v0.2.2</option></select></div><ul><li><input type=checkbox id=section-f1b7c1b2e5dd43526e77637c475d35b8 class=toggle>
<label for=section-f1b7c1b2e5dd43526e77637c475d35b8 class="flex justify-between"><a>Getting Started</a>
<span class="expand-icon flex justify-between align-center"><svg viewBox="0 0 24 24" stroke="currentcolor" fill="none" stroke-width="2" height="12" class="x:shrink-0 x:rounded-sm x:p-0.5 x:hover:bg-gray-800/5 x:dark:hover:bg-gray-100/5 x:motion-reduce:transition-none x:origin-center x:transition-all x:rtl:-rotate-180"><path d="M9 5l7 7-7 7" stroke-linecap="round" stroke-linejoin="round"/></svg></span></label><ul><li><a href=/coco-server/main/docs/getting-started/install/>Installation</a></li><li><a href=/coco-server/main/docs/getting-started/setup/>Setup Wizard</a></li></ul></li><li><input type=checkbox id=section-fb088f8a9be33f7f260ad2b140bb7bdc class=toggle checked>
<label for=section-fb088f8a9be33f7f260ad2b140bb7bdc class="flex justify-between"><a href=/coco-server/main/docs/references/>References</a>
<span class="expand-icon flex justify-between align-center"><svg viewBox="0 0 24 24" stroke="currentcolor" fill="none" stroke-width="2" height="12" class="x:shrink-0 x:rounded-sm x:p-0.5 x:hover:bg-gray-800/5 x:dark:hover:bg-gray-100/5 x:motion-reduce:transition-none x:origin-center x:transition-all x:rtl:-rotate-180"><path d="M9 5l7 7-7 7" stroke-linecap="round" stroke-linejoin="round"/></svg></span></label><ul><li><input type=checkbox id=section-97bb467845ddef2c28eba43b4c87ba98 class=toggle>
<label for=section-97bb467845ddef2c28eba43b4c87ba98 class="flex justify-between"><a>System</a>
<span class="expand-icon flex justify-between align-center"><svg viewBox="0 0 24 24" stroke="currentcolor" fill="none" stroke-width="2" height="12" class="x:shrink-0 x:rounded-sm x:p-0.5 x:hover:bg-gray-800/5 x:dark:hover:bg-gray-100/5 x:motion-reduce:transition-none x:origin-center x:transition-all x:rtl:-rotate-180"><path d="M9 5l7 7-7 7" stroke-linecap="round" stroke-linejoin="round"/></svg></span></label><ul><li><a href=/coco-server/main/docs/references/system/install/>System Initialization</a></li><li><a href=/coco-server/main/docs/references/system/settings/>System Settings</a></li></ul></li><li><input type=checkbox id=section-830be57e26216c4b31d75f7e80eea5a9 class=toggle>
<label for=section-830be57e26216c4b31d75f7e80eea5a9 class="flex justify-between"><a>Account</a>
<span class="expand-icon flex justify-between align-center"><svg viewBox="0 0 24 24" stroke="currentcolor" fill="none" stroke-width="2" height="12" class="x:shrink-0 x:rounded-sm x:p-0.5 x:hover:bg-gray-800/5 x:dark:hover:bg-gray-100/5 x:motion-reduce:transition-none x:origin-center x:transition-all x:rtl:-rotate-180"><path d="M9 5l7 7-7 7" stroke-linecap="round" stroke-linejoin="round"/></svg></span></label><ul><li><a href=/coco-server/main/docs/references/account/authentication/>Authentication</a></li><li><a href=/coco-server/main/docs/references/account/access_token/>API Token</a></li><li><a href=/coco-server/main/docs/references/account/password/>Modify Password</a></li><li><a href=/coco-server/main/docs/references/account/profile/>Profile</a></li><li><a href=/coco-server/main/docs/references/account/logout/>Logout</a></li></ul></li><li><a href=/coco-server/main/docs/references/assistant/>Assistant</a></li><li><a href=/coco-server/main/docs/references/document/>Document</a></li><li><a href=/coco-server/main/docs/references/search/>Search</a></li><li><a href=/coco-server/main/docs/references/datasource/>Datasource</a></li><li><a href=/coco-server/main/docs/references/integration/>Integration</a></li><li><a href=/coco-server/main/docs/references/mcp_server/>MCP Server</a></li><li><a href=/coco-server/main/docs/references/model_provider/>Model Provider</a></li><li><a href=/coco-server/main/docs/references/attachment/>Attachment</a></li><li><input type=checkbox id=section-6163ea64c3eeec962ea0b7215fc64522 class=toggle checked>
<label for=section-6163ea64c3eeec962ea0b7215fc64522 class="flex justify-between"><a href=/coco-server/main/docs/references/connectors/>Connectors</a>
<span class="expand-icon flex justify-between align-center"><svg viewBox="0 0 24 24" stroke="currentcolor" fill="none" stroke-width="2" height="12" class="x:shrink-0 x:rounded-sm x:p-0.5 x:hover:bg-gray-800/5 x:dark:hover:bg-gray-100/5 x:motion-reduce:transition-none x:origin-center x:transition-all x:rtl:-rotate-180"><path d="M9 5l7 7-7 7" stroke-linecap="round" stroke-linejoin="round"/></svg></span></label><ul><li><a href=/coco-server/main/docs/references/connectors/google_drive/>Google Drive</a></li><li><a href=/coco-server/main/docs/references/connectors/hugo_site/>Hugo Site</a></li><li><a href=/coco-server/main/docs/references/connectors/rss/>RSS</a></li><li><a href=/coco-server/main/docs/references/connectors/confluence/>Confluence</a></li><li><a href=/coco-server/main/docs/references/connectors/local_fs/>Local FS</a></li><li><a href=/coco-server/main/docs/references/connectors/network_drive/>Network Drive</a></li><li><a href=/coco-server/main/docs/references/connectors/notion/>Notion</a></li><li><a href=/coco-server/main/docs/references/connectors/s3/>S3</a></li><li><a href=/coco-server/main/docs/references/connectors/yuque/>Yuque</a></li><li><a href=/coco-server/main/docs/references/connectors/jira/>Jira</a></li><li><a href=/coco-server/main/docs/references/connectors/feishu/>Feishu/Lark</a></li><li><a href=/coco-server/main/docs/references/connectors/mysql/>MySQL</a></li><li><a href=/coco-server/main/docs/references/connectors/postgresql/>PostgreSQL</a></li><li><a href=/coco-server/main/docs/references/connectors/mssql/>MS SQL</a></li><li><a href=/coco-server/main/docs/references/connectors/oracle/>Oracle</a></li><li><a href=/coco-server/main/docs/references/connectors/dropbox/>Dropbox</a></li><li><a href=/coco-server/main/docs/references/connectors/github/>GitHub</a></li><li><a href=/coco-server/main/docs/references/connectors/neo4j/>Neo4j</a></li><li><a href=/coco-server/main/docs/references/connectors/salesforce/>Salesforce</a></li><li><a href=/coco-server/main/docs/references/connectors/gitlab/>GitLab</a></li><li><a href=/coco-server/main/docs/references/connectors/gitea/>Gitea</a></li><li><a href=/coco-server/main/docs/references/connectors/box/ class=active>Box</a></li><li><a href=/coco-server/main/docs/references/connectors/milvus/>Milvus</a></li><li><a href=/coco-server/main/docs/references/connectors/mongodb/>MongoDB</a></li></ul></li></ul></li><li><input type=checkbox id=section-7dd85575c84e6825eb9419e748eb5977 class=toggle>
<label for=section-7dd85575c84e6825eb9419e748eb5977 class="flex justify-between"><a href=/coco-server/main/docs/tutorials/>Tutorials</a>
<span class="expand-icon flex justify-between align-center"><svg viewBox="0 0 24 24" stroke="currentcolor" fill="none" stroke-width="2" height="12" class="x:shrink-0 x:rounded-sm x:p-0.5 x:hover:bg-gray-800/5 x:dark:hover:bg-gray-100/5 x:motion-reduce:transition-none x:origin-center x:transition-all x:rtl:-rotate-180"><path d="M9 5l7 7-7 7" stroke-linecap="round" stroke-linejoin="round"/></svg></span></label><ul><li><a href=/coco-server/main/docs/tutorials/howto_create_your_own_datasource/>How to integrate Coco AI with your own datasource</a></li></ul></li><li><a href=/coco-server/main/docs/release-notes/>Release Notes</a><ul></ul></li></ul><ul><li><a href=https://github.com/infinilabs/coco-server target=_blank rel=noopener>Github</a></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/coco-server/main/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Box</strong>
<label for=toc-control><img src=/coco-server/main/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><style>.toc-header{font-weight:500;margin-bottom:8px;margin-top:20px;height:24px;gap:7px}</style><div class="toc-header flex justify-start align-center"><svg width="14" viewBox="0 0 16 16" fill="none" stroke="currentcolor" stroke-width="1" xmlns="http://www.w3.org/2000/svg" class="h-3 w-3"><path d="M2.44434 12.6665H13.5554" stroke-linecap="round" stroke-linejoin="round"/><path d="M2.44434 3.3335H13.5554" stroke-linecap="round" stroke-linejoin="round"/><path d="M2.44434 8H7.33323" stroke-linecap="round" stroke-linejoin="round"/></svg><span class="flex justify-start align-center">On this page</span></div><nav id=TableOfContents><ul><li><a href=#register-box-connector>Register Box Connector</a></li><li><a href=#use-the-box-connector>Use the Box Connector</a><ul><li><a href=#features>Features</a></li><li><a href=#account-types>Account Types</a></li><li><a href=#setup-box-application>Setup Box Application</a></li><li><a href=#access-connector-settings>Access Connector Settings</a></li><li><a href=#datasource-configuration>Datasource Configuration</a></li><li><a href=#datasource-config-parameters>Datasource Config Parameters</a></li></ul></li><li><a href=#file-hierarchy>File Hierarchy</a><ul><li><a href=#box-free-account-1>Box Free Account</a></li><li><a href=#box-enterprise-account-1>Box Enterprise Account</a></li></ul></li><li><a href=#advanced-features>Advanced Features</a><ul><li><a href=#automatic-token-management>Automatic Token Management</a></li><li><a href=#multi-user-support-enterprise>Multi-User Support (Enterprise)</a></li><li><a href=#metadata-extraction>Metadata Extraction</a></li></ul></li><li><a href=#troubleshooting>Troubleshooting</a><ul><li><a href=#common-issues>Common Issues</a></li><li><a href=#debug-logging>Debug Logging</a></li></ul></li><li><a href=#notes>Notes</a></li><li><a href=#api-endpoints-used>API Endpoints Used</a></li><li><a href=#oauth-flow-free-account>OAuth Flow (Free Account)</a><ul><li><a href=#setup-steps>Setup Steps:</a></li><li><a href=#oauth-endpoints>OAuth Endpoints:</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=box-cloud-storage-connector>Box Cloud Storage Connector
<a class=anchor href=#box-cloud-storage-connector>#</a></h1><h2 id=register-box-connector>Register Box Connector
<a class=anchor href=#register-box-connector>#</a></h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>curl -XPOST <span style=color:#e6db74>&#34;http://localhost:9000/connector/&#34;</span> -d <span style=color:#e6db74>&#39;{
</span><span style=color:#e6db74>    &#34;name&#34;: &#34;Box Cloud Storage Connector&#34;,
</span><span style=color:#e6db74>    &#34;description&#34;: &#34;Index files and folders from Box, supporting both Free and Enterprise accounts with multi-user access.&#34;,
</span><span style=color:#e6db74>    &#34;icon&#34;: &#34;/assets/icons/connector/box/icon.png&#34;,
</span><span style=color:#e6db74>    &#34;category&#34;: &#34;cloud_storage&#34;,
</span><span style=color:#e6db74>    &#34;path_hierarchy&#34;: false,
</span><span style=color:#e6db74>    &#34;tags&#34;: [
</span><span style=color:#e6db74>        &#34;box&#34;,
</span><span style=color:#e6db74>        &#34;cloud_storage&#34;,
</span><span style=color:#e6db74>        &#34;file_sharing&#34;
</span><span style=color:#e6db74>    ],
</span><span style=color:#e6db74>    &#34;url&#34;: &#34;http://coco.rs/connectors/box&#34;,
</span><span style=color:#e6db74>    &#34;assets&#34;: {
</span><span style=color:#e6db74>        &#34;icons&#34;: {
</span><span style=color:#e6db74>            &#34;default&#34;: &#34;/assets/icons/connector/box/icon.png&#34;,
</span><span style=color:#e6db74>            &#34;bookmark&#34;: &#34;/assets/icons/connector/box/bookmark.png&#34;,
</span><span style=color:#e6db74>            &#34;boxcanvas&#34;: &#34;/assets/icons/connector/box/boxcanvas.png&#34;,
</span><span style=color:#e6db74>            &#34;boxnote&#34;: &#34;/assets/icons/connector/box/boxnote.png&#34;,
</span><span style=color:#e6db74>            &#34;docx&#34;: &#34;/assets/icons/connector/box/docx.png&#34;,
</span><span style=color:#e6db74>            &#34;excel-spreadsheet&#34;: &#34;/assets/icons/connector/box/excel-spreadsheet.png&#34;,
</span><span style=color:#e6db74>            &#34;google-docs&#34;: &#34;/assets/icons/connector/box/google-docs.png&#34;,
</span><span style=color:#e6db74>            &#34;google-sheets&#34;: &#34;/assets/icons/connector/box/google-sheets.png&#34;,
</span><span style=color:#e6db74>            &#34;google-slides&#34;: &#34;/assets/icons/connector/box/google-slides.png&#34;,
</span><span style=color:#e6db74>            &#34;keynote&#34;: &#34;/assets/icons/connector/box/keynote.png&#34;,
</span><span style=color:#e6db74>            &#34;numbers&#34;: &#34;/assets/icons/connector/box/numbers.png&#34;,
</span><span style=color:#e6db74>            &#34;pages&#34;: &#34;/assets/icons/connector/box/pages.png&#34;,
</span><span style=color:#e6db74>            &#34;pdf&#34;: &#34;/assets/icons/connector/box/pdf.png&#34;,
</span><span style=color:#e6db74>            &#34;powerpoint-presentation&#34;: &#34;/assets/icons/connector/box/powerpoint-presentation.png&#34;
</span><span style=color:#e6db74>        }
</span><span style=color:#e6db74>    },
</span><span style=color:#e6db74>    &#34;processor&#34;: {
</span><span style=color:#e6db74>        &#34;enabled&#34;: true,
</span><span style=color:#e6db74>        &#34;name&#34;: &#34;box&#34;
</span><span style=color:#e6db74>    }
</span><span style=color:#e6db74>}&#39;</span>
</code></pre></div><h2 id=use-the-box-connector>Use the Box Connector
<a class=anchor href=#use-the-box-connector>#</a></h2><p>The Box Connector allows you to index files and folders from Box cloud storage with support for both Free and Enterprise accounts.</p><h3 id=features>Features
<a class=anchor href=#features>#</a></h3><ul><li><strong>Dual Account Support</strong>: Works with both Box Free Account and Box Enterprise Account</li><li><strong>Multi-User Access</strong>: Enterprise accounts can index files from all users</li><li><strong>Hierarchical Structure</strong>: Maintains original folder structure with path hierarchy</li><li><strong>Automatic Token Management</strong>: Built-in token caching and auto-refresh</li><li><strong>Recursive Folder Processing</strong>: Automatically processes all subfolders</li><li><strong>Enterprise User Categorization</strong>: Files from different users are properly categorized</li><li><strong>Metadata Extraction</strong>: Extracts comprehensive file and folder metadata</li><li><strong>Pipeline Integration</strong>: Full pipeline-based architecture for efficient syncing</li></ul><h3 id=account-types>Account Types
<a class=anchor href=#account-types>#</a></h3><h4 id=box-free-account>Box Free Account
<a class=anchor href=#box-free-account>#</a></h4><p><strong>Authentication</strong>: OAuth 2.0 Refresh Token Flow</p><ul><li><strong>Access Scope</strong>: Current authenticated user&rsquo;s files only</li><li><strong>Token Management</strong>: Backend automatically obtains and saves <code>refresh_token</code> through OAuth flow</li><li><strong>OAuth Flow</strong>: Built-in OAuth flow via UI endpoints - no manual token configuration needed</li><li><strong>Use Case</strong>: Personal file indexing</li></ul><h4 id=box-enterprise-account>Box Enterprise Account
<a class=anchor href=#box-enterprise-account>#</a></h4><p><strong>Authentication</strong>: OAuth 2.0 Client Credentials Flow</p><ul><li><strong>Access Scope</strong>: All users' files in the enterprise</li><li><strong>Multi-User Support</strong>: Automatically fetches files from all enterprise users</li><li><strong>Use Case</strong>: Organization-wide file indexing</li></ul><h3 id=setup-box-application>Setup Box Application
<a class=anchor href=#setup-box-application>#</a></h3><p>Before using this connector, you need to create a Box application and configure OAuth2.</p><h4 id=1-create-a-box-application>1. Create a Box Application
<a class=anchor href=#1-create-a-box-application>#</a></h4><ol><li><p><strong>Visit Box Developer Console</strong></p><ul><li>Go to
<a href=https://app.box.com/developers/console>Box Developer Console</a></li><li>Sign in with your Box account</li></ul></li><li><p><strong>Create New App</strong></p><ul><li>Click &ldquo;Create New App&rdquo;</li><li>Choose &ldquo;Custom App&rdquo;</li><li>Select authentication method:<ul><li>For <strong>Free Account</strong>: Choose &ldquo;Standard OAuth 2.0 (User Authentication)&rdquo;</li><li>For <strong>Enterprise Account</strong>: Choose &ldquo;OAuth 2.0 with JWT (Server Authentication)&rdquo; or &ldquo;Server Authentication (with Client Credentials Grant)&rdquo;</li></ul></li></ul></li><li><p><strong>Configure Application</strong></p><ul><li>Enter application name</li><li>Enter application description</li><li>Configure redirect URI (if using OAuth flow for token generation)</li></ul></li><li><p><strong>Get Credentials</strong></p><ul><li>Copy <code>Client ID</code> from Configuration page</li><li>Copy <code>Client Secret</code> from Configuration page</li><li>For Enterprise: Copy <code>Enterprise ID</code> from Admin Console</li></ul></li></ol><h4 id=2-required-scopes>2. Required Scopes
<a class=anchor href=#2-required-scopes>#</a></h4><p>For proper functionality, the Box application needs:</p><p><strong>For Free Account:</strong></p><ul><li>Read files and folders</li><li>User information</li></ul><p><strong>For Enterprise Account:</strong></p><ul><li>Manage users</li><li>Manage enterprise content</li><li>Read all files and folders</li></ul><h4 id=3-application-approval>3. Application Approval
<a class=anchor href=#3-application-approval>#</a></h4><ul><li>For Enterprise accounts, the application must be approved by Box administrator</li><li>Ensure the application is published and authorized</li></ul><h3 id=access-connector-settings>Access Connector Settings
<a class=anchor href=#access-connector-settings>#</a></h3><ol><li>Navigate to the <strong>Data Sources</strong> section in your Coco dashboard</li><li>Create a new data source or edit an existing Box data source</li><li>Configure the required credentials based on your account type</li></ol><blockquote><p><strong>⚠️ Important</strong>: Before you can use the Box connector, you must configure the following required parameters based on your account type:</p><p><strong>For Box Free Account:</strong></p><ul><li><code>is_enterprise</code>: Set to &ldquo;box_free&rdquo; (or omit, defaults to &ldquo;box_free&rdquo;)</li><li><code>client_id</code>: OAuth2 client ID from your Box application</li><li><code>client_secret</code>: OAuth2 client secret from your Box application</li><li><code>refresh_token</code>: <strong>Automatically obtained and saved by backend through OAuth flow - you do NOT need to configure this manually</strong></li></ul><p><strong>For Box Enterprise Account:</strong></p><ul><li><code>is_enterprise</code>: Set to &ldquo;box_enterprise&rdquo;</li><li><code>client_id</code>: OAuth2 client ID from your Box application</li><li><code>client_secret</code>: OAuth2 client secret from your Box application</li><li><code>enterprise_id</code>: Your Box Enterprise ID</li></ul></blockquote><h3 id=datasource-configuration>Datasource Configuration
<a class=anchor href=#datasource-configuration>#</a></h3><h4 id=box-free-account-example>Box Free Account Example
<a class=anchor href=#box-free-account-example>#</a></h4><p><strong>Using OAuth Flow (Required)</strong></p><ol><li>Configure the connector with <code>client_id</code> and <code>client_secret</code> in connector settings</li><li>Use the OAuth flow via UI: Navigate to connector detail page and click &ldquo;Connect&rdquo;</li><li>The backend will automatically:<ul><li>Exchange authorization code for access and refresh tokens</li><li>Save <code>refresh_token</code> to the datasource configuration</li><li>Create the datasource with proper configuration</li></ul></li></ol><blockquote><p><strong>Note</strong>: For Free Account, <code>refresh_token</code> is <strong>automatically obtained and saved by the backend</strong> through the OAuth flow. You do NOT need to manually configure or provide <code>refresh_token</code>. Simply use the OAuth flow via the UI.</p></blockquote><h4 id=box-enterprise-account-example>Box Enterprise Account Example
<a class=anchor href=#box-enterprise-account-example>#</a></h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>curl -H <span style=color:#e6db74>&#39;Content-Type: application/json&#39;</span> -XPOST <span style=color:#e6db74>&#34;http://localhost:9000/datasource/&#34;</span> -d <span style=color:#e6db74>&#39;{
</span><span style=color:#e6db74>    &#34;name&#34;: &#34;Company Box Files&#34;,
</span><span style=color:#e6db74>    &#34;type&#34;: &#34;connector&#34;,
</span><span style=color:#e6db74>    &#34;enabled&#34;: true,
</span><span style=color:#e6db74>    &#34;connector&#34;: {
</span><span style=color:#e6db74>        &#34;id&#34;: &#34;box&#34;,
</span><span style=color:#e6db74>        &#34;config&#34;: {
</span><span style=color:#e6db74>            &#34;is_enterprise&#34;: &#34;box_enterprise&#34;,
</span><span style=color:#e6db74>            &#34;client_id&#34;: &#34;your_client_id&#34;,
</span><span style=color:#e6db74>            &#34;client_secret&#34;: &#34;your_client_secret&#34;,
</span><span style=color:#e6db74>            &#34;enterprise_id&#34;: &#34;12345&#34;,
</span><span style=color:#e6db74>            &#34;concurrent_downloads&#34;: 15
</span><span style=color:#e6db74>        }
</span><span style=color:#e6db74>    },
</span><span style=color:#e6db74>    &#34;sync&#34;: {
</span><span style=color:#e6db74>        &#34;enabled&#34;: true,
</span><span style=color:#e6db74>        &#34;interval&#34;: &#34;5m&#34;
</span><span style=color:#e6db74>    }
</span><span style=color:#e6db74>}&#39;</span>
</code></pre></div><h3 id=datasource-config-parameters>Datasource Config Parameters
<a class=anchor href=#datasource-config-parameters>#</a></h3><table><thead><tr><th><strong>Field</strong></th><th><strong>Type</strong></th><th><strong>Description</strong></th><th><strong>Required</strong></th><th><strong>Account Type</strong></th></tr></thead><tbody><tr><td><code>is_enterprise</code></td><td><code>string</code></td><td>Account type: &ldquo;box_free&rdquo; or &ldquo;box_enterprise&rdquo;</td><td>Yes</td><td>Both</td></tr><tr><td><code>client_id</code></td><td><code>string</code></td><td>Box application Client ID</td><td>Yes</td><td>Both</td></tr><tr><td><code>client_secret</code></td><td><code>string</code></td><td>Box application Client Secret</td><td>Yes</td><td>Both</td></tr><tr><td><code>refresh_token</code></td><td><code>string</code></td><td>OAuth refresh token (automatically obtained and saved by backend via OAuth flow - <strong>do NOT configure manually</strong>)</td><td>Auto-managed</td><td>Free only</td></tr><tr><td><code>enterprise_id</code></td><td><code>string</code></td><td>Box Enterprise ID (for Enterprise account)</td><td>Yes</td><td>Enterprise only</td></tr><tr><td><code>concurrent_downloads</code></td><td><code>int</code></td><td>Maximum concurrent downloads (default: 15)</td><td>No</td><td>Both</td></tr><tr><td><code>sync.enabled</code></td><td><code>boolean</code></td><td>Enable/disable syncing for this datasource</td><td>No</td><td>Both</td></tr><tr><td><code>sync.interval</code></td><td><code>string</code></td><td>Sync interval (e.g., &ldquo;30s&rdquo;, &ldquo;5m&rdquo;, &ldquo;1h&rdquo;)</td><td>No</td><td>Both</td></tr></tbody></table><h2 id=file-hierarchy>File Hierarchy
<a class=anchor href=#file-hierarchy>#</a></h2><h3 id=box-free-account-1>Box Free Account
<a class=anchor href=#box-free-account-1>#</a></h3><p>Files are organized directly from root:</p><pre><code>/
├── Documents/
│   ├── report.pdf
│   └── 2024/
│       └── annual-report.pdf
├── Photos/
│   └── image.jpg
└── Shared/
    └── presentation.pptx
</code></pre><h3 id=box-enterprise-account-1>Box Enterprise Account
<a class=anchor href=#box-enterprise-account-1>#</a></h3><p>Files are organized by user name to separate content from different users:</p><pre><code>/
├── John Doe/
│   ├── Documents/
│   │   └── report.pdf
│   └── Photos/
│       └── image.jpg
├── Jane Smith/
│   ├── Documents/
│   │   └── report.pdf
│   └── Reports/
│       └── sales.xlsx
└── Bob Johnson/
    └── Presentations/
        └── deck.pptx
</code></pre><p><strong>Key Points:</strong></p><ul><li>Each user&rsquo;s files are under their name category</li><li>Document IDs include user ID to avoid conflicts</li><li>Metadata includes <code>user_id</code> field for filtering</li></ul><h2 id=advanced-features>Advanced Features
<a class=anchor href=#advanced-features>#</a></h2><h3 id=automatic-token-management>Automatic Token Management
<a class=anchor href=#automatic-token-management>#</a></h3><p>The connector implements intelligent token management:</p><ul><li><strong>Token Caching</strong>: In-memory cache with thread-safe operations</li><li><strong>Expiry Buffer</strong>: Refreshes tokens 5 minutes before expiry</li><li><strong>Automatic Refresh</strong>: Transparent token refresh on expiration</li><li><strong>401 Retry</strong>: Automatic re-authentication on unauthorized errors</li><li><strong>Refresh Token Rotation</strong>: Supports refresh token rotation (Free account)</li></ul><h3 id=multi-user-support-enterprise>Multi-User Support (Enterprise)
<a class=anchor href=#multi-user-support-enterprise>#</a></h3><p>For Enterprise accounts, the connector:</p><ol><li><strong>Fetches All Users</strong>: Automatically retrieves all users in the enterprise</li><li><strong>Per-User Processing</strong>: Processes files for each user independently</li><li><strong>As-User Header</strong>: Uses <code>as-user</code> header to access files as specific users</li><li><strong>User Categorization</strong>: Organizes files under user names in hierarchy</li><li><strong>Unique Document IDs</strong>: Generates unique IDs including user ID to avoid conflicts</li></ol><h3 id=metadata-extraction>Metadata Extraction
<a class=anchor href=#metadata-extraction>#</a></h3><p>The connector extracts comprehensive metadata:</p><p><strong>File Metadata:</strong></p><ul><li>File ID, Name, Type, Size</li><li>Creation and modification timestamps</li><li>Description and status</li><li>Creator, modifier, and owner information</li><li>Parent folder information</li><li>ETag and sequence ID</li><li>URLs (direct, download, thumbnail)</li><li>Shared link information</li></ul><p><strong>Folder Metadata:</strong></p><ul><li>Folder ID, Name, Type</li><li>Creation and modification timestamps</li><li>Size and hierarchy information</li><li>Platform identifier</li></ul><h2 id=troubleshooting>Troubleshooting
<a class=anchor href=#troubleshooting>#</a></h2><h3 id=common-issues>Common Issues
<a class=anchor href=#common-issues>#</a></h3><ol><li><p><strong>Authentication Failed</strong></p><ul><li><strong>Free Account</strong>: Verify <code>client_id</code> and <code>client_secret</code> are correct. Ensure OAuth flow completed successfully (backend automatically saves <code>refresh_token</code>).</li><li><strong>Enterprise Account</strong>: Verify <code>client_id</code>, <code>client_secret</code>, and <code>enterprise_id</code> are correct</li><li>Check if Box application is approved and published</li><li>Ensure application has required scopes</li></ul></li><li><p><strong>Token Expired</strong></p><ul><li>System automatically refreshes tokens</li><li><strong>Free Account</strong>: If refresh_token is invalid, re-run OAuth flow to obtain a new one</li><li><strong>Enterprise Account</strong>: Verify application credentials haven&rsquo;t changed</li><li>Review token expiry settings</li></ul></li><li><p><strong>No Files Found</strong></p><ul><li>Check user permissions in Box</li><li>Verify application has file access permissions</li><li><strong>Enterprise</strong>: Ensure users have files in their accounts</li><li>Check folder access permissions</li></ul></li><li><p><strong>Multi-User Issues (Enterprise)</strong></p><ul><li>Verify application has &ldquo;Manage Users&rdquo; permission</li><li>Check if users are active in the enterprise</li><li>Ensure <code>as-user</code> header is supported by your application type</li></ul></li><li><p><strong>Sync Failures</strong></p><ul><li>Check network connectivity to <code>https://api.box.com</code></li><li>Verify API rate limits aren&rsquo;t exceeded</li><li>Review system logs for detailed error messages</li><li>Check datasource sync interval settings</li></ul></li></ol><h3 id=debug-logging>Debug Logging
<a class=anchor href=#debug-logging>#</a></h3><p>The connector provides detailed logging:</p><ul><li><code>[box connector]</code>: Main connector operations</li><li><code>[box client]</code>: API client operations</li><li>Authentication process and token refresh</li><li>User enumeration (Enterprise)</li><li>File and folder processing</li><li>API requests and errors</li></ul><p>Use logs to quickly identify and resolve issues.</p><h2 id=notes>Notes
<a class=anchor href=#notes>#</a></h2><ol><li><strong>Account Type Selection</strong>: Must specify either &ldquo;box_free&rdquo; or &ldquo;box_enterprise&rdquo; (defaults to &ldquo;box_free&rdquo; if not specified)</li><li><strong>Different Credentials</strong>: Free and Enterprise accounts require different configuration</li><li><strong>OAuth Flow Required</strong>: Free accounts <strong>must</strong> use the built-in OAuth flow via UI endpoints - backend automatically obtains and saves <code>refresh_token</code>. You do NOT need to manually configure <code>refresh_token</code>.</li><li><strong>No Manual Token Configuration</strong>: For Free accounts, <code>refresh_token</code> is completely managed by the backend - you never need to provide or configure it manually</li><li><strong>Enterprise ID Requirement</strong>: Enterprise accounts must have a valid enterprise_id</li><li><strong>Multi-User Automatic</strong>: Enterprise accounts automatically fetch files from all users</li><li><strong>Token Auto-Refresh</strong>: All tokens are automatically managed and refreshed</li><li><strong>Content Extraction</strong>: File content extraction is handled by coco-server framework</li><li><strong>API Rate Limits</strong>: Be aware of Box API rate limits (typically 100 requests/minute)</li><li><strong>File Size Limits</strong>: Large files may be excluded based on framework configuration</li><li><strong>Hierarchical Path</strong>: Connector preserves original folder structure with <code>/</code> as root</li><li><strong>Path Hierarchy</strong>: Set to <code>false</code> - connector uses category hierarchy instead of path hierarchy</li></ol><h2 id=api-endpoints-used>API Endpoints Used
<a class=anchor href=#api-endpoints-used>#</a></h2><p>The connector uses the following Box API endpoints:</p><table><thead><tr><th>Endpoint</th><th>Purpose</th><th>Account Type</th></tr></thead><tbody><tr><td><code>/oauth2/token</code></td><td>Authentication and token refresh</td><td>Both</td></tr><tr><td><code>/2.0/users/me</code></td><td>Ping test and user info</td><td>Both</td></tr><tr><td><code>/2.0/users</code></td><td>Fetch enterprise users</td><td>Enterprise only</td></tr><tr><td><code>/2.0/folders/{id}/items</code></td><td>List folder contents</td><td>Both</td></tr></tbody></table><p>All API calls include automatic retry on 401 errors and support for the <code>as-user</code> header in Enterprise accounts.</p><h2 id=oauth-flow-free-account>OAuth Flow (Free Account)
<a class=anchor href=#oauth-flow-free-account>#</a></h2><p>The Box connector provides built-in OAuth flow for Free accounts. <strong>This is the only way to set up a Free Account datasource.</strong></p><h3 id=setup-steps>Setup Steps:
<a class=anchor href=#setup-steps>#</a></h3><ol><li><strong>Configure Connector</strong>: Set <code>client_id</code> and <code>client_secret</code> in connector settings</li><li><strong>Initiate OAuth</strong>: Navigate to connector detail page and click &ldquo;Connect&rdquo; or visit <code>/connector/{connector_id}/box/connect</code></li><li><strong>Authorize</strong>: You will be redirected to Box authorization page to authorize the application</li><li><strong>Automatic Setup</strong>: Backend automatically:<ul><li>Exchanges authorization code for access and refresh tokens</li><li>Saves <code>refresh_token</code> to datasource configuration (you don&rsquo;t need to do anything)</li><li>Creates datasource with proper configuration</li><li>Caches authenticated client for future use</li></ul></li></ol><blockquote><p><strong>Important</strong>: You do NOT need to manually configure <code>refresh_token</code>. The backend handles everything automatically through the OAuth flow.</p></blockquote><h3 id=oauth-endpoints>OAuth Endpoints:
<a class=anchor href=#oauth-endpoints>#</a></h3><ul><li><code>GET /connector/:id/box/connect</code> - Initiates OAuth flow</li><li><code>GET /connector/:id/box/oauth_redirect</code> - Handles OAuth callback</li></ul></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/infinilabs/coco-server/edit/main/docs/content.en/docs/references/connectors/box.md target=_blank rel=noopener><img src=/coco-server/main/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div><div class="flex align-center footer">©INFINI.LTD, All Rights Reserved.</div><script async src="https://www.googletagmanager.com/gtag/js?id=G-RJPTVP614C"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','G-RJPTVP614C');</script><script type=text/javascript>var _smartsupp=_smartsupp||{};_smartsupp.key='691ff544d18a237005a011a7290b839d8fe811a4';window.smartsupp||(function(d){var s,c,o=smartsupp=function(){o._.push(arguments)};o._=[];s=d.getElementsByTagName('script')[0];c=d.createElement('script');c.type='text/javascript';c.charset='utf-8';c.async=true;c.src='https://www.smartsuppchat.com/loader.js?';s.parentNode.insertBefore(c,s);})(document);</script></div><script type=module>
    import { searchbox } from "https://coco.infini.cloud/integration/cvn0g9ehpcehvsthrakg/widget";
    searchbox({container: "#searchbox"});
</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><style>.toc-header{font-weight:500;margin-bottom:8px;margin-top:20px;height:24px;gap:7px}</style><div class="toc-header flex justify-start align-center"><svg width="14" viewBox="0 0 16 16" fill="none" stroke="currentcolor" stroke-width="1" xmlns="http://www.w3.org/2000/svg" class="h-3 w-3"><path d="M2.44434 12.6665H13.5554" stroke-linecap="round" stroke-linejoin="round"/><path d="M2.44434 3.3335H13.5554" stroke-linecap="round" stroke-linejoin="round"/><path d="M2.44434 8H7.33323" stroke-linecap="round" stroke-linejoin="round"/></svg><span class="flex justify-start align-center">On this page</span></div><nav id=TableOfContents><ul><li><a href=#register-box-connector>Register Box Connector</a></li><li><a href=#use-the-box-connector>Use the Box Connector</a><ul><li><a href=#features>Features</a></li><li><a href=#account-types>Account Types</a></li><li><a href=#setup-box-application>Setup Box Application</a></li><li><a href=#access-connector-settings>Access Connector Settings</a></li><li><a href=#datasource-configuration>Datasource Configuration</a></li><li><a href=#datasource-config-parameters>Datasource Config Parameters</a></li></ul></li><li><a href=#file-hierarchy>File Hierarchy</a><ul><li><a href=#box-free-account-1>Box Free Account</a></li><li><a href=#box-enterprise-account-1>Box Enterprise Account</a></li></ul></li><li><a href=#advanced-features>Advanced Features</a><ul><li><a href=#automatic-token-management>Automatic Token Management</a></li><li><a href=#multi-user-support-enterprise>Multi-User Support (Enterprise)</a></li><li><a href=#metadata-extraction>Metadata Extraction</a></li></ul></li><li><a href=#troubleshooting>Troubleshooting</a><ul><li><a href=#common-issues>Common Issues</a></li><li><a href=#debug-logging>Debug Logging</a></li></ul></li><li><a href=#notes>Notes</a></li><li><a href=#api-endpoints-used>API Endpoints Used</a></li><li><a href=#oauth-flow-free-account>OAuth Flow (Free Account)</a><ul><li><a href=#setup-steps>Setup Steps:</a></li><li><a href=#oauth-endpoints>OAuth Endpoints:</a></li></ul></li></ul></nav></aside></main></body></html>