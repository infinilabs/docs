<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.79.1"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="API & Web Framework #  The INFINI Framework provides a comprehensive API and Web framework built on top of Go&rsquo;s HTTP ecosystem, featuring high-performance routing, flexible middleware system, and built-in security features.
Overview #  The framework offers two separate but complementary HTTP servers:
 API Server: Designed for programmatic access and RESTful APIs Web Server: Designed for web interfaces and UI applications  Both servers share common patterns and can be configured independently."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="API & Web Framework"><meta property="og:description" content="API & Web Framework #  The INFINI Framework provides a comprehensive API and Web framework built on top of Go&rsquo;s HTTP ecosystem, featuring high-performance routing, flexible middleware system, and built-in security features.
Overview #  The framework offers two separate but complementary HTTP servers:
 API Server: Designed for programmatic access and RESTful APIs Web Server: Designed for web interfaces and UI applications  Both servers share common patterns and can be configured independently."><meta property="og:type" content="article"><meta property="og:url" content="/framework/main/docs/references/api_web/"><title>API & Web Framework | INFINI Framework</title><link rel=manifest href=/framework/main/manifest.json><link rel=icon href=/framework/main/favicon.png type=image/x-icon><link rel=stylesheet href=/framework/main/book.min.d80e87b12a4b49d9913d0bdd98bd83b7a44988be784760ba15522b377313dcf9.css integrity="sha256-2A6HsSpLSdmRPQvdmL2Dt6RJiL54R2C6FVIrN3MT3Pk="><script defer src=/framework/main/js/jquery-2.x.min.js></script><script defer src=/framework/main/js/doc.js></script></head><body><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=/framework/main><img src=/framework/main/img/logo-en.svg alt=Logo></a></h2><div id=searchbox style=margin-bottom:10px;outline:none></div><div class=heading><select class=version-selector>
<option value>main (latest)</option>
<option value=v1.4.0>v1.4.0</option>
<option value=v1.3.0>v1.3.0</option>
<option value=v1.2.0>v1.2.0</option>
<option value=v1.1.9>v1.1.9</option>
<option value=v1.1.8>v1.1.8</option>
<option value=v1.1.7>v1.1.7</option>
<option value=v1.1.6>v1.1.6</option>
<option value=v1.1.5>v1.1.5</option>
<option value=v1.1.4>v1.1.4</option>
<option value=v1.1.3>v1.1.3</option>
<option value=v1.1.2>v1.1.2</option>
<option value=v1.1.0>v1.1.0</option>
<option value=v1.0.0>v1.0.0</option></select></div><ul><li><a href=/framework/main/docs/development/>Development</a><ul><li><a href=/framework/main/docs/development/setup_golang_environment/>Setting Up the Golang Environment</a></li><li><a href=/framework/main/docs/development/setup_intellij_idea/>Setup IntelliJ IDEA</a></li><li><a href=/framework/main/docs/development/create_new_application/>Create New Application</a></li></ul></li><li><input type=checkbox id=section-fb088f8a9be33f7f260ad2b140bb7bdc class=toggle checked>
<label for=section-fb088f8a9be33f7f260ad2b140bb7bdc class="flex justify-between"><a>References</a>
<span>â–¾</span></label><ul><li><a href=/framework/main/docs/references/makefile/>Makefile</a></li><li><a href=/framework/main/docs/references/api_web/ class=active>API & Web Framework</a></li><li><a href=/framework/main/docs/references/orm/>ORM (Object-Relational Mapping)</a></li><li><a href=/framework/main/docs/references/http_client/>Http Client Configuration</a></li><li><a href=/framework/main/docs/references/query_url/>Query URL Parameters</a></li><li><a href=/framework/main/docs/references/aggs_query/>Aggregation via URL Parameters</a></li></ul></li><li><a href=/framework/main/docs/troubleshooting/>FAQs</a><ul></ul></li><li><a href=/framework/main/docs/release-notes/>Release Notes</a><ul></ul></li></ul><ul><li><a href=https://github.com/infinilabs/framework target=_blank rel=noopener>Github</a></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/framework/main/svg/menu.svg class=book-icon alt=Menu></label>
<strong>API & Web Framework</strong>
<label for=toc-control><img src=/framework/main/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#api--web-framework>API & Web Framework</a><ul><li><a href=#overview>Overview</a></li><li><a href=#architecture>Architecture</a><ul><li><a href=#core-components>Core Components</a></li></ul></li><li><a href=#configuration>Configuration</a><ul><li><a href=#api-server-configuration>API Server Configuration</a></li><li><a href=#web-server-configuration>Web Server Configuration</a></li></ul></li><li><a href=#handler-definition>Handler Definition</a><ul><li><a href=#basic-handler-structure>Basic Handler Structure</a></li><li><a href=#handler-registration>Handler Registration</a></li></ul></li><li><a href=#route-patterns-and-parameters>Route Patterns and Parameters</a><ul><li><a href=#basic-routes>Basic Routes</a></li><li><a href=#parameter-extraction>Parameter Extraction</a></li></ul></li><li><a href=#request-handling>Request Handling</a><ul><li><a href=#json-input-processing>JSON Input Processing</a></li><li><a href=#query-parameter-processing>Query Parameter Processing</a></li></ul></li><li><a href=#response-helpers>Response Helpers</a><ul><li><a href=#standard-json-responses>Standard JSON Responses</a></li><li><a href=#error-handling>Error Handling</a></li></ul></li><li><a href=#api-middleware-and-options>API Middleware and Options</a><ul><li><a href=#permission-based-access-control>Permission-based Access Control</a></li><li><a href=#feature-flags>Feature Flags</a></li><li><a href=#authentication-options>Authentication Options</a></li><li><a href=#label-and-metadata>Label and Metadata</a></li><li><a href=#available-features-reference>Available Features Reference</a></li></ul></li><li><a href=#web-framework-features>Web Framework Features</a><ul><li><a href=#static-file-serving-with-vfs>Static File Serving with VFS</a></li><li><a href=#vfs-file-lookup-strategy>VFS File Lookup Strategy</a></li><li><a href=#configuration-example>Configuration Example</a></li><li><a href=#customization-workflow>Customization Workflow</a></li><li><a href=#configuration-only-features>Configuration-Only Features</a></li><li><a href=#websocket-support>WebSocket Support</a></li><li><a href=#session-management>Session Management</a></li></ul></li><li><a href=#api-handler-base-functions>API Handler Base Functions</a><ul><li><a href=#http-method-handling>HTTP Method Handling</a></li><li><a href=#parameter-processing>Parameter Processing</a></li><li><a href=#json-processing>JSON Processing</a></li><li><a href=#error-responses>Error Responses</a></li></ul></li><li><a href=#real-world-example-datasource-module>Real-World Example: DataSource Module</a></li><li><a href=#best-practices>Best Practices</a><ul><li><a href=#1-consistent-response-patterns>1. Consistent Response Patterns</a></li><li><a href=#2-proper-error-handling>2. Proper Error Handling</a></li><li><a href=#3-parameter-validation>3. Parameter Validation</a></li><li><a href=#4-security-integration>4. Security Integration</a></li></ul></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=api--web-framework>API & Web Framework
<a class=anchor href=#api--web-framework>#</a></h1><p>The INFINI Framework provides a comprehensive API and Web framework built on top of Go&rsquo;s HTTP ecosystem, featuring high-performance routing, flexible middleware system, and built-in security features.</p><h2 id=overview>Overview
<a class=anchor href=#overview>#</a></h2><p>The framework offers two separate but complementary HTTP servers:</p><ul><li><strong>API Server</strong>: Designed for programmatic access and RESTful APIs</li><li><strong>Web Server</strong>: Designed for web interfaces and UI applications</li></ul><p>Both servers share common patterns and can be configured independently.</p><h2 id=architecture>Architecture
<a class=anchor href=#architecture>#</a></h2><h3 id=core-components>Core Components
<a class=anchor href=#core-components>#</a></h3><ul><li><strong>HTTP Router</strong>: High-performance trie-based routing with path parameters</li><li><strong>Handler System</strong>: Structured request processing with built-in utilities</li><li><strong>Middleware</strong>: Flexible filter chain for cross-cutting concerns</li><li><strong>Security</strong>: Integrated authentication, authorization, and CORS support</li><li><strong>Response Helpers</strong>: Standardized JSON responses and error handling</li></ul><h2 id=configuration>Configuration
<a class=anchor href=#configuration>#</a></h2><h3 id=api-server-configuration>API Server Configuration
<a class=anchor href=#api-server-configuration>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>api</span>:
  <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>true</span>
  <span style=color:#f92672>network</span>:
    <span style=color:#f92672>host</span>: <span style=color:#e6db74>&#34;0.0.0.0&#34;</span>
    <span style=color:#f92672>port</span>: <span style=color:#ae81ff>9200</span>
    <span style=color:#f92672>binding</span>: <span style=color:#e6db74>&#34;0.0.0.0:9200&#34;</span>
    <span style=color:#f92672>publish</span>: <span style=color:#e6db74>&#34;localhost:9200&#34;</span>
    <span style=color:#f92672>skip_occupied_port</span>: <span style=color:#66d9ef>true</span>
  <span style=color:#f92672>security</span>:
    <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>true</span>
    <span style=color:#f92672>username</span>: <span style=color:#e6db74>&#34;admin&#34;</span>
    <span style=color:#f92672>password</span>: <span style=color:#e6db74>&#34;password&#34;</span>
  <span style=color:#f92672>cors</span>:
    <span style=color:#f92672>allowed_origins</span>:
      - <span style=color:#e6db74>&#34;https://domain.com&#34;</span>
      - <span style=color:#e6db74>&#34;http://localhost:3000&#34;</span>
  <span style=color:#f92672>websocket</span>:
    <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>true</span>
    <span style=color:#f92672>base_path</span>: <span style=color:#e6db74>&#34;/ws&#34;</span>
    <span style=color:#f92672>permitted_hosts</span>: []
    <span style=color:#f92672>skip_host_verify</span>: <span style=color:#66d9ef>false</span>
  <span style=color:#f92672>base_path</span>: <span style=color:#e6db74>&#34;/_api&#34;</span>      <span style=color:#75715e># Base path for API endpoints</span>
  <span style=color:#f92672>verbose_error_root_cause</span>: <span style=color:#66d9ef>false</span>
  <span style=color:#f92672>api_directory_path</span>: <span style=color:#e6db74>&#34;/api&#34;</span>  <span style=color:#75715e># API documentation directory</span>
  <span style=color:#f92672>disable_api_directory</span>: <span style=color:#66d9ef>false</span>
</code></pre></div><h3 id=web-server-configuration>Web Server Configuration
<a class=anchor href=#web-server-configuration>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>web</span>:
  <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>true</span>
  <span style=color:#f92672>network</span>:
    <span style=color:#f92672>host</span>: <span style=color:#e6db74>&#34;0.0.0.0&#34;</span>
    <span style=color:#f92672>port</span>: <span style=color:#ae81ff>8090</span>
    <span style=color:#f92672>binding</span>: <span style=color:#e6db74>&#34;0.0.0.0:8090&#34;</span>
    <span style=color:#f92672>publish</span>: <span style=color:#e6db74>&#34;localhost:8090&#34;</span>
    <span style=color:#f92672>skip_occupied_port</span>: <span style=color:#66d9ef>true</span>
  <span style=color:#f92672>security</span>:
    <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>true</span>
    <span style=color:#f92672>authentication</span>:
      <span style=color:#f92672>native</span>:
        <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>true</span>
      <span style=color:#75715e># Note: http_basic authentication is not supported yet for web</span>
      <span style=color:#75715e># users should use API basic auth or OAuth2 instead</span>
      <span style=color:#f92672>http_basic</span>:
        <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>false</span>
        <span style=color:#75715e># endpoint: &#34;https://auth.example.com&#34;      # Not implemented</span>
        <span style=color:#75715e># secret_id: &#34;&#34;</span>
        <span style=color:#75715e># secret_key: &#34;&#34;</span>
  <span style=color:#f92672>cors</span>:
    <span style=color:#f92672>allowed_origins</span>:
      - <span style=color:#e6db74>&#34;https://domain.com&#34;</span>
  <span style=color:#f92672>websocket</span>:
    <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>true</span>
    <span style=color:#f92672>base_path</span>: <span style=color:#e6db74>&#34;/ws&#34;</span>
    <span style=color:#f92672>permitted_hosts</span>: []
    <span style=color:#f92672>skip_host_verify</span>: <span style=color:#66d9ef>false</span>
  <span style=color:#f92672>base_path</span>: <span style=color:#e6db74>&#34;&#34;</span>            <span style=color:#75715e># Base path for web application</span>
  <span style=color:#f92672>gzip</span>:
    <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>true</span>
    <span style=color:#f92672>level</span>: <span style=color:#ae81ff>6</span>
  <span style=color:#f92672>cookie</span>:
    <span style=color:#f92672>store</span>: <span style=color:#e6db74>&#34;cookie&#34;</span>
    <span style=color:#f92672>secure</span>: <span style=color:#66d9ef>true</span>
    <span style=color:#f92672>httponly</span>: <span style=color:#66d9ef>true</span>
    <span style=color:#f92672>max_age</span>: <span style=color:#ae81ff>2592000</span>
    <span style=color:#f92672>path</span>: <span style=color:#e6db74>&#34;/&#34;</span>
  <span style=color:#f92672>ui</span>:
    <span style=color:#f92672>local</span>:
      <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>true</span>
      <span style=color:#f92672>path</span>: <span style=color:#e6db74>&#34;./web/dist&#34;</span>
    <span style=color:#f92672>vfs</span>:
      <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>false</span>
  <span style=color:#f92672>embedding_api</span>: <span style=color:#66d9ef>false</span>
</code></pre></div><h2 id=handler-definition>Handler Definition
<a class=anchor href=#handler-definition>#</a></h2><h3 id=basic-handler-structure>Basic Handler Structure
<a class=anchor href=#basic-handler-structure>#</a></h3><p>Create a handler by embedding the base <code>api.Handler</code>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#a6e22e>mymodule</span>

<span style=color:#f92672>import</span> (
    <span style=color:#e6db74>&#34;infini.sh/framework/core/api&#34;</span>
    <span style=color:#a6e22e>httprouter</span> <span style=color:#e6db74>&#34;infini.sh/framework/core/api/router&#34;</span>
    <span style=color:#e6db74>&#34;net/http&#34;</span>
)

<span style=color:#66d9ef>type</span> <span style=color:#a6e22e>APIHandler</span> <span style=color:#66d9ef>struct</span> {
    <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>Handler</span>  <span style=color:#75715e>// Embedding base handler for all functionality
</span><span style=color:#75715e></span>}
</code></pre></div><h3 id=handler-registration>Handler Registration
<a class=anchor href=#handler-registration>#</a></h3><p>Register handlers using the built-in routing methods:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>init</span>() {
    <span style=color:#75715e>// Create handler instance
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>handler</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>APIHandler</span>{}

    <span style=color:#75715e>// Register with permissions and features
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>HandleUIMethod</span>(<span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>POST</span>, <span style=color:#e6db74>&#34;/users/&#34;</span>, <span style=color:#a6e22e>handler</span>.<span style=color:#a6e22e>createUser</span>,
        <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>RequirePermission</span>(<span style=color:#a6e22e>createPermission</span>))
    <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>HandleUIMethod</span>(<span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>GET</span>, <span style=color:#e6db74>&#34;/users/:id&#34;</span>, <span style=color:#a6e22e>handler</span>.<span style=color:#a6e22e>getUser</span>,
        <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>RequirePermission</span>(<span style=color:#a6e22e>readPermission</span>))
    <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>HandleUIMethod</span>(<span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>PUT</span>, <span style=color:#e6db74>&#34;/users/:id&#34;</span>, <span style=color:#a6e22e>handler</span>.<span style=color:#a6e22e>updateUser</span>,
        <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>RequirePermission</span>(<span style=color:#a6e22e>updatePermission</span>))
    <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>HandleUIMethod</span>(<span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>DELETE</span>, <span style=color:#e6db74>&#34;/users/:id&#34;</span>, <span style=color:#a6e22e>handler</span>.<span style=color:#a6e22e>deleteUser</span>,
        <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>RequirePermission</span>(<span style=color:#a6e22e>deletePermission</span>))
    <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>HandleUIMethod</span>(<span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>GET</span>, <span style=color:#e6db74>&#34;/users/_search&#34;</span>, <span style=color:#a6e22e>handler</span>.<span style=color:#a6e22e>searchUsers</span>,
        <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>RequirePermission</span>(<span style=color:#a6e22e>searchPermission</span>))
}
</code></pre></div><h2 id=route-patterns-and-parameters>Route Patterns and Parameters
<a class=anchor href=#route-patterns-and-parameters>#</a></h2><h3 id=basic-routes>Basic Routes
<a class=anchor href=#basic-routes>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#75715e>// Static paths
</span><span style=color:#75715e></span><span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>HandleUIMethod</span>(<span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>GET</span>, <span style=color:#e6db74>&#34;/settings&#34;</span>, <span style=color:#a6e22e>handler</span>.<span style=color:#a6e22e>getSettings</span>)
<span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>HandleUIMethod</span>(<span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>POST</span>, <span style=color:#e6db74>&#34;/settings&#34;</span>, <span style=color:#a6e22e>handler</span>.<span style=color:#a6e22e>updateSettings</span>)

<span style=color:#75715e>// Path parameters (required)
</span><span style=color:#75715e></span><span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>HandleUIMethod</span>(<span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>GET</span>, <span style=color:#e6db74>&#34;/users/:id&#34;</span>, <span style=color:#a6e22e>handler</span>.<span style=color:#a6e22e>getUser</span>)
<span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>HandleUIMethod</span>(<span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>GET</span>, <span style=color:#e6db74>&#34;/documents/:docId/comments/:commentId&#34;</span>, <span style=color:#a6e22e>handler</span>.<span style=color:#a6e22e>getComment</span>)

<span style=color:#75715e>// Catch-all parameters (optional)
</span><span style=color:#75715e></span><span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>HandleUIMethod</span>(<span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>GET</span>, <span style=color:#e6db74>&#34;/files/*filepath&#34;</span>, <span style=color:#a6e22e>handler</span>.<span style=color:#a6e22e>serveFile</span>)
</code></pre></div><h3 id=parameter-extraction>Parameter Extraction
<a class=anchor href=#parameter-extraction>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>h</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>APIHandler</span>) <span style=color:#a6e22e>getUser</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>req</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>, <span style=color:#a6e22e>ps</span> <span style=color:#a6e22e>httprouter</span>.<span style=color:#a6e22e>Params</span>) {
    <span style=color:#75715e>// Extract path parameter
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>userID</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>ps</span>.<span style=color:#a6e22e>MustGetParameter</span>(<span style=color:#e6db74>&#34;id&#34;</span>)

    <span style=color:#75715e>// Alternative extraction
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>userID</span> = <span style=color:#a6e22e>ps</span>.<span style=color:#a6e22e>ByName</span>(<span style=color:#e6db74>&#34;id&#34;</span>)

    <span style=color:#75715e>// Query parameters
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>page</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>GetIntOrDefault</span>(<span style=color:#a6e22e>req</span>, <span style=color:#e6db74>&#34;page&#34;</span>, <span style=color:#ae81ff>1</span>)
    <span style=color:#a6e22e>size</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>GetIntOrDefault</span>(<span style=color:#a6e22e>req</span>, <span style=color:#e6db74>&#34;size&#34;</span>, <span style=color:#ae81ff>20</span>)

    <span style=color:#75715e>// Headers
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>authToken</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>GetHeader</span>(<span style=color:#a6e22e>req</span>, <span style=color:#e6db74>&#34;Authorization&#34;</span>, <span style=color:#e6db74>&#34;&#34;</span>)
}
</code></pre></div><h2 id=request-handling>Request Handling
<a class=anchor href=#request-handling>#</a></h2><h3 id=json-input-processing>JSON Input Processing
<a class=anchor href=#json-input-processing>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>h</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>APIHandler</span>) <span style=color:#a6e22e>createUser</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>req</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>, <span style=color:#a6e22e>ps</span> <span style=color:#a6e22e>httprouter</span>.<span style=color:#a6e22e>Params</span>) {
    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>user</span> <span style=color:#a6e22e>CreateUserRequest</span>

    <span style=color:#75715e>// Validate and decode JSON input
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>DecodeJSON</span>(<span style=color:#a6e22e>req</span>, <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>user</span>)
    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
        <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>WriteError</span>(<span style=color:#a6e22e>w</span>, <span style=color:#e6db74>&#34;Invalid JSON input&#34;</span>, <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusBadRequest</span>)
        <span style=color:#66d9ef>return</span>
    }

    <span style=color:#75715e>// OR use MustDecodeJSON for automatic error handling
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>MustDecodeJSON</span>(<span style=color:#a6e22e>req</span>, <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>user</span>)
}

<span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>h</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>APIHandler</span>) <span style=color:#a6e22e>updateUser</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>req</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>, <span style=color:#a6e22e>ps</span> <span style=color:#a6e22e>httprouter</span>.<span style=color:#a6e22e>Params</span>) {
    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>updates</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>interface</span>{}

    <span style=color:#75715e>// Use for partial updates
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>DecodeJSON</span>(<span style=color:#a6e22e>req</span>, <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>updates</span>)
    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
        <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>WriteJSON</span>(<span style=color:#a6e22e>w</span>, <span style=color:#a6e22e>util</span>.<span style=color:#a6e22e>MapStr</span>{<span style=color:#e6db74>&#34;error&#34;</span>: <span style=color:#e6db74>&#34;Invalid input&#34;</span>}, <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusBadRequest</span>)
        <span style=color:#66d9ef>return</span>
    }
}
</code></pre></div><h3 id=query-parameter-processing>Query Parameter Processing
<a class=anchor href=#query-parameter-processing>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>h</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>APIHandler</span>) <span style=color:#a6e22e>searchUsers</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>req</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>, <span style=color:#a6e22e>ps</span> <span style=color:#a6e22e>httprouter</span>.<span style=color:#a6e22e>Params</span>) {
    <span style=color:#75715e>// Required parameters
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>query</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>MustGetParameter</span>(<span style=color:#a6e22e>w</span>, <span style=color:#a6e22e>req</span>, <span style=color:#e6db74>&#34;q&#34;</span>)

    <span style=color:#75715e>// Optional parameters with defaults
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>page</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>GetIntOrDefault</span>(<span style=color:#a6e22e>req</span>, <span style=color:#e6db74>&#34;page&#34;</span>, <span style=color:#ae81ff>1</span>)
    <span style=color:#a6e22e>size</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>GetIntOrDefault</span>(<span style=color:#a6e22e>req</span>, <span style=color:#e6db74>&#34;size&#34;</span>, <span style=color:#ae81ff>10</span>)
    <span style=color:#a6e22e>sort</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>GetParameterOrDefault</span>(<span style=color:#a6e22e>req</span>, <span style=color:#e6db74>&#34;sort&#34;</span>, <span style=color:#e6db74>&#34;created:desc&#34;</span>)

    <span style=color:#75715e>// Boolean parameters
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>activeOnly</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>GetBoolOrDefault</span>(<span style=color:#a6e22e>req</span>, <span style=color:#e6db74>&#34;active&#34;</span>, <span style=color:#66d9ef>true</span>)

    <span style=color:#75715e>// Multiple values
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>status</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>URL</span>.<span style=color:#a6e22e>Query</span>()[<span style=color:#e6db74>&#34;status&#34;</span>]
    <span style=color:#a6e22e>tags</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>URL</span>.<span style=color:#a6e22e>Query</span>()[<span style=color:#e6db74>&#34;tags&#34;</span>]
}
</code></pre></div><h2 id=response-helpers>Response Helpers
<a class=anchor href=#response-helpers>#</a></h2><h3 id=standard-json-responses>Standard JSON Responses
<a class=anchor href=#standard-json-responses>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#75715e>// Simple JSON response
</span><span style=color:#75715e></span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>h</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>APIHandler</span>) <span style=color:#a6e22e>getStatus</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>req</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>, <span style=color:#a6e22e>ps</span> <span style=color:#a6e22e>httprouter</span>.<span style=color:#a6e22e>Params</span>) {
    <span style=color:#a6e22e>status</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>interface</span>{}{
        <span style=color:#e6db74>&#34;status&#34;</span>: <span style=color:#e6db74>&#34;healthy&#34;</span>,
        <span style=color:#e6db74>&#34;version&#34;</span>: <span style=color:#e6db74>&#34;1.0.0&#34;</span>,
    }
    <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>WriteJSON</span>(<span style=color:#a6e22e>w</span>, <span style=color:#a6e22e>status</span>, <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusOK</span>)
}

<span style=color:#75715e>// List with total count
</span><span style=color:#75715e></span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>h</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>APIHandler</span>) <span style=color:#a6e22e>listUsers</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>req</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>, <span style=color:#a6e22e>ps</span> <span style=color:#a6e22e>httprouter</span>.<span style=color:#a6e22e>Params</span>) {
    <span style=color:#a6e22e>users</span> <span style=color:#f92672>:=</span> []<span style=color:#a6e22e>User</span>{{}, {}}
    <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>WriteJSONListResult</span>(<span style=color:#a6e22e>w</span>, <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>users</span>, <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusOK</span>)
}

<span style=color:#75715e>// Acknowledgment response
</span><span style=color:#75715e></span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>h</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>APIHandler</span>) <span style=color:#a6e22e>deleteUser</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>req</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>, <span style=color:#a6e22e>ps</span> <span style=color:#a6e22e>httprouter</span>.<span style=color:#a6e22e>Params</span>) {
    <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>WriteAckJSON</span>(<span style=color:#a6e22e>w</span>, <span style=color:#66d9ef>true</span>, <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusOK</span>, <span style=color:#66d9ef>nil</span>)
}

<span style=color:#75715e>// Creation response
</span><span style=color:#75715e></span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>h</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>APIHandler</span>) <span style=color:#a6e22e>createUser</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>req</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>, <span style=color:#a6e22e>ps</span> <span style=color:#a6e22e>httprouter</span>.<span style=color:#a6e22e>Params</span>) {
    <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>WriteCreatedOKJSON</span>(<span style=color:#a6e22e>w</span>, <span style=color:#e6db74>&#34;user-123&#34;</span>)
}

<span style=color:#75715e>// Update response
</span><span style=color:#75715e></span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>h</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>APIHandler</span>) <span style=color:#a6e22e>updateUser</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>req</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>, <span style=color:#a6e22e>ps</span> <span style=color:#a6e22e>httprouter</span>.<span style=color:#a6e22e>Params</span>) {
    <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>WriteUpdatedOKJSON</span>(<span style=color:#a6e22e>w</span>, <span style=color:#e6db74>&#34;user-123&#34;</span>)
}
</code></pre></div><h3 id=error-handling>Error Handling
<a class=anchor href=#error-handling>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#75715e>// Standard error response
</span><span style=color:#75715e></span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>h</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>APIHandler</span>) <span style=color:#a6e22e>handleError</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>req</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>, <span style=color:#a6e22e>ps</span> <span style=color:#a6e22e>httprouter</span>.<span style=color:#a6e22e>Params</span>) {
    <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>WriteError</span>(<span style=color:#a6e22e>w</span>, <span style=color:#e6db74>&#34;Resource not found&#34;</span>, <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusNotFound</span>)
}

<span style=color:#75715e>// Detailed error object
</span><span style=color:#75715e></span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>h</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>APIHandler</span>) <span style=color:#a6e22e>handleComplexError</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>req</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>, <span style=color:#a6e22e>ps</span> <span style=color:#a6e22e>httprouter</span>.<span style=color:#a6e22e>Params</span>) {
    <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>util</span>.<span style=color:#a6e22e>MapStr</span>{
        <span style=color:#e6db74>&#34;error&#34;</span>: <span style=color:#e6db74>&#34;Validation failed&#34;</span>,
        <span style=color:#e6db74>&#34;field_errors&#34;</span>: <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>string</span>{
            <span style=color:#e6db74>&#34;email&#34;</span>: <span style=color:#e6db74>&#34;invalid format&#34;</span>,
            <span style=color:#e6db74>&#34;age&#34;</span>: <span style=color:#e6db74>&#34;must be positive&#34;</span>,
        },
    }
    <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>WriteErrorObject</span>(<span style=color:#a6e22e>w</span>, <span style=color:#a6e22e>err</span>, <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusBadRequest</span>)
}

<span style=color:#75715e>// HTTP status code errors
</span><span style=color:#75715e></span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>h</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>APIHandler</span>) <span style=color:#a6e22e>handleVariousErrors</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>req</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>, <span style=color:#a6e22e>ps</span> <span style=color:#a6e22e>httprouter</span>.<span style=color:#a6e22e>Params</span>) {
    <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>Error404</span>(<span style=color:#a6e22e>w</span>)      <span style=color:#75715e>// 404 Not Found
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>Error400</span>(<span style=color:#a6e22e>w</span>, <span style=color:#e6db74>&#34;Bad request&#34;</span>)  <span style=color:#75715e>// 400 Bad Request
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>Error500</span>(<span style=color:#a6e22e>w</span>, <span style=color:#e6db74>&#34;Internal server error&#34;</span>)  <span style=color:#75715e>// 500 Internal Server Error
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>ErrorInternalServer</span>(<span style=color:#a6e22e>w</span>, <span style=color:#e6db74>&#34;Something went wrong&#34;</span>)  <span style=color:#75715e>// 500, alternative
</span><span style=color:#75715e></span>}
</code></pre></div><h2 id=api-middleware-and-options>API Middleware and Options
<a class=anchor href=#api-middleware-and-options>#</a></h2><h3 id=permission-based-access-control>Permission-based Access Control
<a class=anchor href=#permission-based-access-control>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;infini.sh/framework/core/security&#34;</span>

<span style=color:#75715e>// Define permissions
</span><span style=color:#75715e></span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>createPermission</span> = <span style=color:#a6e22e>security</span>.<span style=color:#a6e22e>GetSimplePermission</span>(<span style=color:#e6db74>&#34;user&#34;</span>, <span style=color:#e6db74>&#34;user&#34;</span>, string(<span style=color:#a6e22e>security</span>.<span style=color:#a6e22e>Create</span>))
<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>readPermission</span> = <span style=color:#a6e22e>security</span>.<span style=color:#a6e22e>GetSimplePermission</span>(<span style=color:#e6db74>&#34;user&#34;</span>, <span style=color:#e6db74>&#34;user&#34;</span>, string(<span style=color:#a6e22e>security</span>.<span style=color:#a6e22e>Read</span>))
<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>updatePermission</span> = <span style=color:#a6e22e>security</span>.<span style=color:#a6e22e>GetSimplePermission</span>(<span style=color:#e6db74>&#34;user&#34;</span>, <span style=color:#e6db74>&#34;user&#34;</span>, string(<span style=color:#a6e22e>security</span>.<span style=color:#a6e22e>Update</span>))
<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>deletePermission</span> = <span style=color:#a6e22e>security</span>.<span style=color:#a6e22e>GetSimplePermission</span>(<span style=color:#e6db74>&#34;user&#34;</span>, <span style=color:#e6db74>&#34;user&#34;</span>, string(<span style=color:#a6e22e>security</span>.<span style=color:#a6e22e>Delete</span>))

<span style=color:#75715e>// Register with permissions
</span><span style=color:#75715e></span><span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>HandleUIMethod</span>(<span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>POST</span>, <span style=color:#e6db74>&#34;/users/&#34;</span>, <span style=color:#a6e22e>handler</span>.<span style=color:#a6e22e>createUser</span>, <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>RequirePermission</span>(<span style=color:#a6e22e>createPermission</span>))
<span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>HandleUIMethod</span>(<span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>GET</span>, <span style=color:#e6db74>&#34;/users/:id&#34;</span>, <span style=color:#a6e22e>handler</span>.<span style=color:#a6e22e>getUser</span>, <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>RequirePermission</span>(<span style=color:#a6e22e>readPermission</span>))

<span style=color:#75715e>// Multiple permissions - require all
</span><span style=color:#75715e></span><span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>HandleUIMethod</span>(<span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>DELETE</span>, <span style=color:#e6db74>&#34;/admin/users/:id&#34;</span>, <span style=color:#a6e22e>handler</span>.<span style=color:#a6e22e>deleteUser</span>,
    <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>RequirePermission</span>(<span style=color:#a6e22e>deletePermission</span>, <span style=color:#a6e22e>adminPermission</span>))
</code></pre></div><h3 id=feature-flags>Feature Flags
<a class=anchor href=#feature-flags>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#75715e>// Enable CORS for specific endpoints
</span><span style=color:#75715e></span><span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>HandleUIMethod</span>(<span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>OPTIONS</span>, <span style=color:#e6db74>&#34;/users/_search&#34;</span>, <span style=color:#a6e22e>handler</span>.<span style=color:#a6e22e>searchUsers</span>,
    <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>Feature</span>(<span style=color:#a6e22e>core</span>.<span style=color:#a6e22e>FeatureCORS</span>))

<span style=color:#75715e>// Note: Request logging is not yet available as a feature flag
</span><span style=color:#75715e>// Use manual logging in handlers if needed
</span><span style=color:#75715e></span>
<span style=color:#75715e>// Disable sensitive field exposure
</span><span style=color:#75715e></span><span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>HandleUIMethod</span>(<span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>GET</span>, <span style=color:#e6db74>&#34;/users/:id&#34;</span>, <span style=color:#a6e22e>handler</span>.<span style=color:#a6e22e>getUser</span>,
    <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>Feature</span>(<span style=color:#a6e22e>core</span>.<span style=color:#a6e22e>FeatureMaskSensitiveField</span>))

<span style=color:#75715e>// Enable JSON schema validation
</span><span style=color:#75715e></span><span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>HandleUIMethod</span>(<span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>POST</span>, <span style=color:#e6db74>&#34;/users/&#34;</span>, <span style=color:#a6e22e>handler</span>.<span style=color:#a6e22e>createUser</span>,
    <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>Feature</span>(<span style=color:#a6e22e>core</span>.<span style=color:#a6e22e>FeatureValidateRequestJSON</span>))
</code></pre></div><h3 id=authentication-options>Authentication Options
<a class=anchor href=#authentication-options>#</a></h3><p>The framework supports multiple authentication backends.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#75715e>// Require login with standard auth
</span><span style=color:#75715e></span><span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>HandleUIMethod</span>(<span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>POST</span>, <span style=color:#e6db74>&#34;/users/&#34;</span>, <span style=color:#a6e22e>handler</span>.<span style=color:#a6e22e>createUser</span>,
    <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>RequireLogin</span>())

<span style=color:#75715e>// Optional login - process if authenticated, allow anonymous otherwise
</span><span style=color:#75715e></span><span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>HandleUIMethod</span>(<span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>GET</span>, <span style=color:#e6db74>&#34;/public/users/&#34;</span>, <span style=color:#a6e22e>handler</span>.<span style=color:#a6e22e>listPublicUsers</span>,
    <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>OptionLogin</span>())

<span style=color:#75715e>// Public access - no authentication required
</span><span style=color:#75715e></span><span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>HandleUIMethod</span>(<span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>GET</span>, <span style=color:#e6db74>&#34;/health&#34;</span>, <span style=color:#a6e22e>handler</span>.<span style=color:#a6e22e>healthCheck</span>,
    <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>AllowPublicAccess</span>())
</code></pre></div><h3 id=label-and-metadata>Label and Metadata
<a class=anchor href=#label-and-metadata>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#75715e>// Add metadata for logging or processing
</span><span style=color:#75715e></span><span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>HandleUIMethod</span>(<span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>POST</span>, <span style=color:#e6db74>&#34;/users/&#34;</span>, <span style=color:#a6e22e>handler</span>.<span style=color:#a6e22e>createUser</span>,
    <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>Name</span>(<span style=color:#e6db74>&#34;Create User&#34;</span>),
    <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>Resource</span>(<span style=color:#e6db74>&#34;user&#34;</span>),
    <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>Action</span>(<span style=color:#e6db74>&#34;create&#34;</span>),
    <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>Label</span>(<span style=color:#e6db74>&#34;operation&#34;</span>, <span style=color:#e6db74>&#34;user_management&#34;</span>),
    <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>Label</span>(<span style=color:#e6db74>&#34;tag&#34;</span>, <span style=color:#e6db74>&#34;admin&#34;</span>),
    <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>Tags</span>([]<span style=color:#66d9ef>string</span>{<span style=color:#e6db74>&#34;user&#34;</span>, <span style=color:#e6db74>&#34;admin&#34;</span>, <span style=color:#e6db74>&#34;create&#34;</span>}))
</code></pre></div><h3 id=available-features-reference>Available Features Reference
<a class=anchor href=#available-features-reference>#</a></h3><table><thead><tr><th>Feature</th><th>Description</th><th>Usage</th></tr></thead><tbody><tr><td><code>core.FeatureCORS</code></td><td>Enable CORS headers for cross-origin requests</td><td>Standard CORS support</td></tr><tr><td><code>core.FeatureNotAllowCredentials</code></td><td>Disable credentials in CORS responses</td><td>CORS with no credentials</td></tr><tr><td><code>core.FeatureByPassCORSCheck</code></td><td>Skip CORS checking entirely</td><td>Internal endpoints</td></tr><tr><td><code>core.FeatureFingerprintThrottle</code></td><td>Enable fingerprint-based rate throttling</td><td>Rate limiting</td></tr><tr><td><code>core.FeatureMaskSensitiveField</code></td><td>Mask sensitive field values in responses</td><td>Hide data partially</td></tr><tr><td><code>core.FeatureRemoveSensitiveField</code></td><td>Remove sensitive fields from responses</td><td>Hide data completely</td></tr></tbody></table><h2 id=web-framework-features>Web Framework Features
<a class=anchor href=#web-framework-features>#</a></h2><p>The web framework is primarily designed for serving static UI assets and handling web interfaces. Key features include:</p><h3 id=static-file-serving-with-vfs>Static File Serving with VFS
<a class=anchor href=#static-file-serving-with-vfs>#</a></h3><p>Static files are managed through the Virtual File System (VFS) which provides both embedded and local file serving capabilities with runtime customization support:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#75715e>// Registration in main.go
</span><span style=color:#75715e></span><span style=color:#a6e22e>vfs</span>.<span style=color:#a6e22e>RegisterFS</span>(<span style=color:#a6e22e>public</span>.<span style=color:#a6e22e>StaticFS</span>{
    <span style=color:#a6e22e>StaticFolder</span>: <span style=color:#a6e22e>global</span>.<span style=color:#a6e22e>Env</span>().<span style=color:#a6e22e>SystemConfig</span>.<span style=color:#a6e22e>WebAppConfig</span>.<span style=color:#a6e22e>UI</span>.<span style=color:#a6e22e>LocalPath</span>,
    <span style=color:#a6e22e>TrimLeftPath</span>: <span style=color:#a6e22e>global</span>.<span style=color:#a6e22e>Env</span>().<span style=color:#a6e22e>SystemConfig</span>.<span style=color:#a6e22e>WebAppConfig</span>.<span style=color:#a6e22e>UI</span>.<span style=color:#a6e22e>LocalPath</span>,
    <span style=color:#a6e22e>CheckLocalFirst</span>: <span style=color:#a6e22e>global</span>.<span style=color:#a6e22e>Env</span>().<span style=color:#a6e22e>SystemConfig</span>.<span style=color:#a6e22e>WebAppConfig</span>.<span style=color:#a6e22e>UI</span>.<span style=color:#a6e22e>LocalEnabled</span>,
    <span style=color:#a6e22e>SkipVFS</span>: !<span style=color:#a6e22e>global</span>.<span style=color:#a6e22e>Env</span>().<span style=color:#a6e22e>SystemConfig</span>.<span style=color:#a6e22e>WebAppConfig</span>.<span style=color:#a6e22e>UI</span>.<span style=color:#a6e22e>VFSEnabled</span>,
})

<span style=color:#75715e>// Then register the file server
</span><span style=color:#75715e></span><span style=color:#a6e22e>api1</span>.<span style=color:#a6e22e>HandleUI</span>(<span style=color:#e6db74>&#34;/&#34;</span>, <span style=color:#a6e22e>vfs</span>.<span style=color:#a6e22e>FileServer</span>(<span style=color:#a6e22e>vfs</span>.<span style=color:#a6e22e>VFS</span>()))
</code></pre></div><h3 id=vfs-file-lookup-strategy>VFS File Lookup Strategy
<a class=anchor href=#vfs-file-lookup-strategy>#</a></h3><p>The VFS system uses a &ldquo;local-first&rdquo; lookup strategy:</p><ol><li><strong>Check local files</strong> in the configured folder (default: <code>.public</code> relative to app binary)</li><li><strong>Fall back to embedded files</strong> if local file doesn&rsquo;t exist</li><li><strong>This allows runtime customization</strong> by replacing files in the local folder</li></ol><h3 id=configuration-example>Configuration Example
<a class=anchor href=#configuration-example>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>web</span>:
  <span style=color:#f92672>ui</span>:
    <span style=color:#f92672>local</span>:
      <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>true</span>      <span style=color:#75715e># Enable local file checking</span>
      <span style=color:#f92672>path</span>: <span style=color:#e6db74>&#34;./web/dist&#34;</span> <span style=color:#75715e># Path to local files (relative to binary)</span>
    <span style=color:#f92672>vfs</span>:
      <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>false</span>     <span style=color:#75715e># Use embedded files when local disabled</span>
</code></pre></div><h3 id=customization-workflow>Customization Workflow
<a class=anchor href=#customization-workflow>#</a></h3><ol><li>Place your static files in the local folder (default: <code>.public/</code> relative to app binary location)</li><li>Files in this folder will override embedded files with the same path</li><li>Changes take effect immediately without restart</li><li>Perfect for theme customization, branding, or emergency fixes</li></ol><h3 id=configuration-only-features>Configuration-Only Features
<a class=anchor href=#configuration-only-features>#</a></h3><p>Unlike the API server, web framework features are primarily configuration-driven:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>web</span>:
  <span style=color:#f92672>gzip</span>:
    <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>true</span>    <span style=color:#75715e># Enable gzip compression</span>
    <span style=color:#f92672>level</span>: <span style=color:#ae81ff>6</span>        <span style=color:#75715e># Compression level 1-9</span>

  <span style=color:#f92672>cookie</span>:
    <span style=color:#f92672>secure</span>: <span style=color:#66d9ef>true</span>    <span style=color:#75715e># HTTPS only cookies</span>
    <span style=color:#f92672>httponly</span>: <span style=color:#66d9ef>true</span>  <span style=color:#75715e># Prevent XSS attacks</span>
    <span style=color:#f92672>path</span>: <span style=color:#e6db74>&#34;/&#34;</span>       <span style=color:#75715e># Cookie scope</span>

  <span style=color:#f92672>cors</span>:
    <span style=color:#f92672>allowed_origins</span>: [<span style=color:#e6db74>&#34;https://example.com&#34;</span>]  <span style=color:#75715e># CORS domains</span>
</code></pre></div><h3 id=websocket-support>WebSocket Support
<a class=anchor href=#websocket-support>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>api</span>:
  <span style=color:#f92672>websocket</span>:
    <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>true</span>
    <span style=color:#f92672>base_path</span>: <span style=color:#e6db74>&#34;/ws&#34;</span>
    <span style=color:#f92672>permitted_hosts</span>: []
    <span style=color:#f92672>skip_host_verify</span>: <span style=color:#66d9ef>false</span>
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>h</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>APIHandler</span>) <span style=color:#a6e22e>handleWebSocket</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>req</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>, <span style=color:#a6e22e>ps</span> <span style=color:#a6e22e>httprouter</span>.<span style=color:#a6e22e>Params</span>) {
    <span style=color:#a6e22e>roomID</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>ps</span>.<span style=color:#a6e22e>ByName</span>(<span style=color:#e6db74>&#34;room_id&#34;</span>)

    <span style=color:#75715e>// Upgrade HTTP to WebSocket
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>conn</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>websocket</span>.<span style=color:#a6e22e>Upgrade</span>(<span style=color:#a6e22e>w</span>, <span style=color:#a6e22e>req</span>)
    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
        <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>WriteError</span>(<span style=color:#a6e22e>w</span>, <span style=color:#e6db74>&#34;WebSocket upgrade failed&#34;</span>, <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusBadRequest</span>)
        <span style=color:#66d9ef>return</span>
    }

    <span style=color:#75715e>// Join chat room
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>room</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>websocket</span>.<span style=color:#a6e22e>GetRoom</span>(<span style=color:#a6e22e>roomID</span>)
    <span style=color:#a6e22e>room</span>.<span style=color:#a6e22e>Join</span>(<span style=color:#a6e22e>conn</span>)
}
</code></pre></div><h3 id=session-management>Session Management
<a class=anchor href=#session-management>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>h</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>APIHandler</span>) <span style=color:#a6e22e>login</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>req</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>, <span style=color:#a6e22e>ps</span> <span style=color:#a6e22e>httprouter</span>.<span style=color:#a6e22e>Params</span>) {
    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>login</span> <span style=color:#a6e22e>LoginRequest</span>
    <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>MustDecodeJSON</span>(<span style=color:#a6e22e>req</span>, <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>login</span>)

    <span style=color:#75715e>// Validate credentials
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>user</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>authService</span>.<span style=color:#a6e22e>Login</span>(<span style=color:#a6e22e>login</span>.<span style=color:#a6e22e>Username</span>, <span style=color:#a6e22e>login</span>.<span style=color:#a6e22e>Password</span>)
    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
        <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>WriteError</span>(<span style=color:#a6e22e>w</span>, <span style=color:#e6db74>&#34;Invalid credentials&#34;</span>, <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusUnauthorized</span>)
        <span style=color:#66d9ef>return</span>
    }

    <span style=color:#75715e>// Create session
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>session</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>CreateSession</span>(<span style=color:#a6e22e>w</span>, <span style=color:#a6e22e>user</span>.<span style=color:#a6e22e>ID</span>)
    <span style=color:#a6e22e>session</span>.<span style=color:#a6e22e>Set</span>(<span style=color:#e6db74>&#34;user&#34;</span>, <span style=color:#a6e22e>user</span>)
    <span style=color:#a6e22e>session</span>.<span style=color:#a6e22e>Set</span>(<span style=color:#e6db74>&#34;last_login&#34;</span>, <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Now</span>())

    <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>WriteJSON</span>(<span style=color:#a6e22e>w</span>, <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>interface</span>{}{
        <span style=color:#e6db74>&#34;message&#34;</span>: <span style=color:#e6db74>&#34;Login successful&#34;</span>,
        <span style=color:#e6db74>&#34;user&#34;</span>: <span style=color:#a6e22e>user</span>,
    }, <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusOK</span>)
}
</code></pre></div><h2 id=api-handler-base-functions>API Handler Base Functions
<a class=anchor href=#api-handler-base-functions>#</a></h2><p>The embedded <code>api.Handler</code> provides comprehensive helper methods:</p><h3 id=http-method-handling>HTTP Method Handling
<a class=anchor href=#http-method-handling>#</a></h3><ul><li><code>WriteJSON(w, v, code)</code> - Standard JSON response</li><li><code>WriteJSONListResult(w, total, v, code)</code> - List with total count</li><li><code>WriteError(w, message, code)</code> - Error response</li><li><code>WriteAckJSON(w, ack, code, obj)</code> - Acknowledgment response</li><li><code>WriteCreatedOKJSON(w, id)</code> - Creation confirmation</li><li><code>WriteUpdatedOKJSON(w, id)</code> - Update confirmation</li><li><code>WriteDeletedOKJSON(w, id)</code> - Deletion confirmation</li></ul><h3 id=parameter-processing>Parameter Processing
<a class=anchor href=#parameter-processing>#</a></h3><ul><li><code>GetParameter(r, key)</code> - Get query parameter</li><li><code>GetParameterOrDefault(r, key, def)</code> - Get parameter with default</li><li><code>MustGetParameter(w, r, key)</code> - Required parameter (404 if missing)</li><li><code>GetIntOrDefault(r, key, def)</code> - Integer parameter</li><li><code>GetBoolOrDefault(r, key, def)</code> - Boolean parameter</li><li><code>GetHeader(r, header, def)</code> - HTTP header access</li></ul><h3 id=json-processing>JSON Processing
<a class=anchor href=#json-processing>#</a></h3><ul><li><code>MustDecodeJSON(r, obj)</code> - Decode JSON with automatic error handling</li><li><code>DecodeJSON(r, obj)</code> - Decode JSON returning error</li><li><code>GetJSON(r)</code> - Get JSONQ wrapper for complex parsing</li><li><code>GetRawBody(r)</code> - Get raw request body as bytes</li></ul><h3 id=error-responses>Error Responses
<a class=anchor href=#error-responses>#</a></h3><ul><li><code>Error500(w, msg)</code> - Internal server error</li><li><code>Error400(w, msg)</code> - Bad request</li><li><code>Error404(w)</code> - Not found</li><li><code>WriteErrorObject(w, err, code)</code> - Complex error structure</li></ul><h2 id=real-world-example-datasource-module>Real-World Example: DataSource Module
<a class=anchor href=#real-world-example-datasource-module>#</a></h2><p>Complete API implementation from the framework:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#a6e22e>datasource</span>

<span style=color:#f92672>import</span> (
    <span style=color:#e6db74>&#34;infini.sh/framework/core/api&#34;</span>
    <span style=color:#a6e22e>httprouter</span> <span style=color:#e6db74>&#34;infini.sh/framework/core/api/router&#34;</span>
    <span style=color:#e6db74>&#34;infini.sh/framework/core/security&#34;</span>
    <span style=color:#e6db74>&#34;infini.sh/framework/core/util&#34;</span>
    <span style=color:#e6db74>&#34;net/http&#34;</span>
)

<span style=color:#66d9ef>type</span> <span style=color:#a6e22e>APIHandler</span> <span style=color:#66d9ef>struct</span> {
    <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>Handler</span>
}

<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>Category</span> = <span style=color:#e6db74>&#34;coco&#34;</span>
<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>Datasource</span> = <span style=color:#e6db74>&#34;datasource&#34;</span>

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>init</span>() {
    <span style=color:#75715e>// Define permissions
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>createPermission</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>security</span>.<span style=color:#a6e22e>GetSimplePermission</span>(<span style=color:#a6e22e>Category</span>, <span style=color:#a6e22e>Datasource</span>, string(<span style=color:#a6e22e>security</span>.<span style=color:#a6e22e>Create</span>))
    <span style=color:#a6e22e>updatePermission</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>security</span>.<span style=color:#a6e22e>GetSimplePermission</span>(<span style=color:#a6e22e>Category</span>, <span style=color:#a6e22e>Datasource</span>, string(<span style=color:#a6e22e>security</span>.<span style=color:#a6e22e>Update</span>))
    <span style=color:#a6e22e>readPermission</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>security</span>.<span style=color:#a6e22e>GetSimplePermission</span>(<span style=color:#a6e22e>Category</span>, <span style=color:#a6e22e>Datasource</span>, string(<span style=color:#a6e22e>security</span>.<span style=color:#a6e22e>Read</span>))
    <span style=color:#a6e22e>deletePermission</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>security</span>.<span style=color:#a6e22e>GetSimplePermission</span>(<span style=color:#a6e22e>Category</span>, <span style=color:#a6e22e>Datasource</span>, string(<span style=color:#a6e22e>security</span>.<span style=color:#a6e22e>Delete</span>))
    <span style=color:#a6e22e>searchPermission</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>security</span>.<span style=color:#a6e22e>GetSimplePermission</span>(<span style=color:#a6e22e>Category</span>, <span style=color:#a6e22e>Datasource</span>, string(<span style=color:#a6e22e>security</span>.<span style=color:#a6e22e>Search</span>))

    <span style=color:#75715e>// Register permissions
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>security</span>.<span style=color:#a6e22e>RegisterPermissionsToRole</span>(<span style=color:#a6e22e>core</span>.<span style=color:#a6e22e>WidgetRole</span>, <span style=color:#a6e22e>searchPermission</span>)

    <span style=color:#a6e22e>handler</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>APIHandler</span>{}

    <span style=color:#75715e>// Register routes with permissions and features
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>HandleUIMethod</span>(<span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>POST</span>, <span style=color:#e6db74>&#34;/datasource/&#34;</span>, <span style=color:#a6e22e>handler</span>.<span style=color:#a6e22e>createDatasource</span>,
        <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>RequirePermission</span>(<span style=color:#a6e22e>createPermission</span>))

    <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>HandleUIMethod</span>(<span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>GET</span>, <span style=color:#e6db74>&#34;/datasource/:id&#34;</span>, <span style=color:#a6e22e>handler</span>.<span style=color:#a6e22e>getDatasource</span>,
        <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>RequirePermission</span>(<span style=color:#a6e22e>readPermission</span>))

    <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>HandleUIMethod</span>(<span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>PUT</span>, <span style=color:#e6db74>&#34;/datasource/:id&#34;</span>, <span style=color:#a6e22e>handler</span>.<span style=color:#a6e22e>updateDatasource</span>,
        <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>RequirePermission</span>(<span style=color:#a6e22e>updatePermission</span>))

    <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>HandleUIMethod</span>(<span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>DELETE</span>, <span style=color:#e6db74>&#34;/datasource/:id&#34;</span>, <span style=color:#a6e22e>handler</span>.<span style=color:#a6e22e>deleteDatasource</span>,
        <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>RequirePermission</span>(<span style=color:#a6e22e>deletePermission</span>))

    <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>HandleUIMethod</span>(<span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>GET</span>, <span style=color:#e6db74>&#34;/datasource/_search&#34;</span>, <span style=color:#a6e22e>handler</span>.<span style=color:#a6e22e>searchDatasource</span>,
        <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>RequirePermission</span>(<span style=color:#a6e22e>searchPermission</span>),
        <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>Feature</span>(<span style=color:#a6e22e>core</span>.<span style=color:#a6e22e>FeatureCORS</span>),
        <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>Feature</span>(<span style=color:#a6e22e>core</span>.<span style=color:#a6e22e>FeatureMaskSensitiveField</span>),
        <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>Label</span>(<span style=color:#a6e22e>core</span>.<span style=color:#a6e22e>SensitiveFields</span>, <span style=color:#a6e22e>secretKeys</span>))
}

<span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>h</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>APIHandler</span>) <span style=color:#a6e22e>createDatasource</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>req</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>, <span style=color:#a6e22e>ps</span> <span style=color:#a6e22e>httprouter</span>.<span style=color:#a6e22e>Params</span>) {
    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>obj</span> = <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>core</span>.<span style=color:#a6e22e>DataSource</span>{}
    <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>MustDecodeJSON</span>(<span style=color:#a6e22e>req</span>, <span style=color:#a6e22e>obj</span>)

    <span style=color:#75715e>// Input validation
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>obj</span>.<span style=color:#a6e22e>Connector</span>.<span style=color:#a6e22e>ConnectorID</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;&#34;</span> {
        panic(<span style=color:#e6db74>&#34;invalid connector&#34;</span>)
    }

    <span style=color:#75715e>// Create with ORM
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>orm</span>.<span style=color:#a6e22e>Create</span>(<span style=color:#a6e22e>ctx</span>, <span style=color:#a6e22e>obj</span>)
    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
        <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>WriteError</span>(<span style=color:#a6e22e>w</span>, <span style=color:#a6e22e>err</span>.<span style=color:#a6e22e>Error</span>(), <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusInternalServerError</span>)
        <span style=color:#66d9ef>return</span>
    }

    <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>WriteCreatedOKJSON</span>(<span style=color:#a6e22e>w</span>, <span style=color:#a6e22e>obj</span>.<span style=color:#a6e22e>ID</span>)
}

<span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>h</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>APIHandler</span>) <span style=color:#a6e22e>getDatasource</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>req</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>, <span style=color:#a6e22e>ps</span> <span style=color:#a6e22e>httprouter</span>.<span style=color:#a6e22e>Params</span>) {
    <span style=color:#a6e22e>id</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>ps</span>.<span style=color:#a6e22e>MustGetParameter</span>(<span style=color:#e6db74>&#34;id&#34;</span>)

    <span style=color:#a6e22e>obj</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>core</span>.<span style=color:#a6e22e>DataSource</span>{}
    <span style=color:#a6e22e>obj</span>.<span style=color:#a6e22e>ID</span> = <span style=color:#a6e22e>id</span>

    <span style=color:#a6e22e>exists</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>orm</span>.<span style=color:#a6e22e>GetV2</span>(<span style=color:#a6e22e>ctx</span>, <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>obj</span>)
    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
        <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>WriteError</span>(<span style=color:#a6e22e>w</span>, <span style=color:#a6e22e>err</span>.<span style=color:#a6e22e>Error</span>(), <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusInternalServerError</span>)
        <span style=color:#66d9ef>return</span>
    }

    <span style=color:#66d9ef>if</span> !<span style=color:#a6e22e>exists</span> {
        <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>WriteGetMissingJSON</span>(<span style=color:#a6e22e>w</span>, <span style=color:#a6e22e>id</span>)
        <span style=color:#66d9ef>return</span>
    }

    <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>WriteGetOKJSON</span>(<span style=color:#a6e22e>w</span>, <span style=color:#a6e22e>id</span>, <span style=color:#a6e22e>obj</span>)
}
</code></pre></div><h2 id=best-practices>Best Practices
<a class=anchor href=#best-practices>#</a></h2><h3 id=1-consistent-response-patterns>1. Consistent Response Patterns
<a class=anchor href=#1-consistent-response-patterns>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#75715e>// Always use framework helpers for consistent responses
</span><span style=color:#75715e></span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>GoodExample</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>req</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>, <span style=color:#a6e22e>ps</span> <span style=color:#a6e22e>httprouter</span>.<span style=color:#a6e22e>Params</span>) {
    <span style=color:#a6e22e>user</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>getUser</span>(<span style=color:#a6e22e>id</span>)
    <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>WriteGetOKJSON</span>(<span style=color:#a6e22e>w</span>, <span style=color:#a6e22e>id</span>, <span style=color:#a6e22e>user</span>)
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>BadExample</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>req</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>, <span style=color:#a6e22e>ps</span> <span style=color:#a6e22e>httprouter</span>.<span style=color:#a6e22e>Params</span>) {
    <span style=color:#a6e22e>user</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>getUser</span>(<span style=color:#a6e22e>id</span>)
    <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>WriteJSON</span>(<span style=color:#a6e22e>w</span>, <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>interface</span>{}{
        <span style=color:#e6db74>&#34;_id&#34;</span>: <span style=color:#a6e22e>id</span>,
        <span style=color:#e6db74>&#34;found&#34;</span>: <span style=color:#66d9ef>true</span>,
        <span style=color:#e6db74>&#34;_source&#34;</span>: <span style=color:#a6e22e>user</span>,
    }, <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusOK</span>)
}
</code></pre></div><h3 id=2-proper-error-handling>2. Proper Error Handling
<a class=anchor href=#2-proper-error-handling>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>GoodErrorHandling</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>req</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>, <span style=color:#a6e22e>ps</span> <span style=color:#a6e22e>httprouter</span>.<span style=color:#a6e22e>Params</span>) {
    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
        <span style=color:#75715e>// Use appropriate HTTP status codes
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>==</span> <span style=color:#a6e22e>ErrNotFound</span> {
            <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>WriteError</span>(<span style=color:#a6e22e>w</span>, <span style=color:#e6db74>&#34;User not found&#34;</span>, <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusNotFound</span>)
            <span style=color:#66d9ef>return</span>
        }
        <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>==</span> <span style=color:#a6e22e>ErrValidation</span> {
            <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>WriteError</span>(<span style=color:#a6e22e>w</span>, <span style=color:#e6db74>&#34;Invalid input&#34;</span>, <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusBadRequest</span>)
            <span style=color:#66d9ef>return</span>
        }
        <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>WriteError</span>(<span style=color:#a6e22e>w</span>, <span style=color:#e6db74>&#34;Internal error&#34;</span>, <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusInternalServerError</span>)
        <span style=color:#66d9ef>return</span>
    }
}
</code></pre></div><h3 id=3-parameter-validation>3. Parameter Validation
<a class=anchor href=#3-parameter-validation>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>ProperValidation</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>req</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>, <span style=color:#a6e22e>ps</span> <span style=color:#a6e22e>httprouter</span>.<span style=color:#a6e22e>Params</span>) {
    <span style=color:#75715e>// Extract parameters
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>id</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>ps</span>.<span style=color:#a6e22e>MustGetParameter</span>(<span style=color:#e6db74>&#34;id&#34;</span>)

    <span style=color:#75715e>// Validate required parameters
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>id</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;&#34;</span> {
        <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>WriteError</span>(<span style=color:#a6e22e>w</span>, <span style=color:#e6db74>&#34;ID parameter is required&#34;</span>, <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusBadRequest</span>)
        <span style=color:#66d9ef>return</span>
    }

    <span style=color:#75715e>// Validate optional parameters
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>page</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>GetIntOrDefault</span>(<span style=color:#a6e22e>req</span>, <span style=color:#e6db74>&#34;page&#34;</span>, <span style=color:#ae81ff>1</span>)
    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>page</span> &lt; <span style=color:#ae81ff>1</span> {
        <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>WriteError</span>(<span style=color:#a6e22e>w</span>, <span style=color:#e6db74>&#34;Page must be positive&#34;</span>, <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusBadRequest</span>)
        <span style=color:#66d9ef>return</span>
    }
}
</code></pre></div><h3 id=4-security-integration>4. Security Integration
<a class=anchor href=#4-security-integration>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>SecureEndpoint</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>req</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>, <span style=color:#a6e22e>ps</span> <span style=color:#a6e22e>httprouter</span>.<span style=color:#a6e22e>Params</span>) {
    <span style=color:#a6e22e>handler</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>APIHandler</span>{}

    <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>HandleUIMethod</span>(<span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>POST</span>, <span style=color:#e6db74>&#34;/admin/update&#34;</span>, <span style=color:#a6e22e>handler</span>.<span style=color:#a6e22e>updateAdmin</span>,
        <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>RequireLogin</span>(),           <span style=color:#75715e>// Require authentication
</span><span style=color:#75715e></span>        <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>RequirePermission</span>(<span style=color:#a6e22e>adminPermission</span>),  <span style=color:#75715e>// Require specific permission
</span><span style=color:#75715e></span>        <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>Feature</span>(<span style=color:#a6e22e>core</span>.<span style=color:#a6e22e>FeatureCORS</span>)) <span style=color:#75715e>// Enable CORS if needed
</span><span style=color:#75715e></span>}
</code></pre></div><p>The INFINI API/Web framework provides a solid foundation for building scalable, secure, and well-structured HTTP services with minimal boilerplate while maintaining flexibility for complex applications.</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/infinilabs/framework/edit/main/docs/content.en/docs/references/api_web.md target=_blank rel=noopener><img src=/framework/main/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div><div class="flex align-center footer">Â©INFINI.LTD, All Rights Reserved.</div><script async src="https://www.googletagmanager.com/gtag/js?id=G-RJPTVP614C"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','G-RJPTVP614C');</script><script type=text/javascript>var _smartsupp=_smartsupp||{};_smartsupp.key='691ff544d18a237005a011a7290b839d8fe811a4';window.smartsupp||(function(d){var s,c,o=smartsupp=function(){o._.push(arguments)};o._=[];s=d.getElementsByTagName('script')[0];c=d.createElement('script');c.type='text/javascript';c.charset='utf-8';c.async=true;c.src='https://www.smartsuppchat.com/loader.js?';s.parentNode.insertBefore(c,s);})(document);</script></div><script type=module>
    import { searchbox } from "https://coco.infini.cloud/integration/cvn0g9ehpcehvsthrakg/widget";
    searchbox({container: "#searchbox"});
</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents><ul><li><a href=#api--web-framework>API & Web Framework</a><ul><li><a href=#overview>Overview</a></li><li><a href=#architecture>Architecture</a><ul><li><a href=#core-components>Core Components</a></li></ul></li><li><a href=#configuration>Configuration</a><ul><li><a href=#api-server-configuration>API Server Configuration</a></li><li><a href=#web-server-configuration>Web Server Configuration</a></li></ul></li><li><a href=#handler-definition>Handler Definition</a><ul><li><a href=#basic-handler-structure>Basic Handler Structure</a></li><li><a href=#handler-registration>Handler Registration</a></li></ul></li><li><a href=#route-patterns-and-parameters>Route Patterns and Parameters</a><ul><li><a href=#basic-routes>Basic Routes</a></li><li><a href=#parameter-extraction>Parameter Extraction</a></li></ul></li><li><a href=#request-handling>Request Handling</a><ul><li><a href=#json-input-processing>JSON Input Processing</a></li><li><a href=#query-parameter-processing>Query Parameter Processing</a></li></ul></li><li><a href=#response-helpers>Response Helpers</a><ul><li><a href=#standard-json-responses>Standard JSON Responses</a></li><li><a href=#error-handling>Error Handling</a></li></ul></li><li><a href=#api-middleware-and-options>API Middleware and Options</a><ul><li><a href=#permission-based-access-control>Permission-based Access Control</a></li><li><a href=#feature-flags>Feature Flags</a></li><li><a href=#authentication-options>Authentication Options</a></li><li><a href=#label-and-metadata>Label and Metadata</a></li><li><a href=#available-features-reference>Available Features Reference</a></li></ul></li><li><a href=#web-framework-features>Web Framework Features</a><ul><li><a href=#static-file-serving-with-vfs>Static File Serving with VFS</a></li><li><a href=#vfs-file-lookup-strategy>VFS File Lookup Strategy</a></li><li><a href=#configuration-example>Configuration Example</a></li><li><a href=#customization-workflow>Customization Workflow</a></li><li><a href=#configuration-only-features>Configuration-Only Features</a></li><li><a href=#websocket-support>WebSocket Support</a></li><li><a href=#session-management>Session Management</a></li></ul></li><li><a href=#api-handler-base-functions>API Handler Base Functions</a><ul><li><a href=#http-method-handling>HTTP Method Handling</a></li><li><a href=#parameter-processing>Parameter Processing</a></li><li><a href=#json-processing>JSON Processing</a></li><li><a href=#error-responses>Error Responses</a></li></ul></li><li><a href=#real-world-example-datasource-module>Real-World Example: DataSource Module</a></li><li><a href=#best-practices>Best Practices</a><ul><li><a href=#1-consistent-response-patterns>1. Consistent Response Patterns</a></li><li><a href=#2-proper-error-handling>2. Proper Error Handling</a></li><li><a href=#3-parameter-validation>3. Parameter Validation</a></li><li><a href=#4-security-integration>4. Security Integration</a></li></ul></li></ul></li></ul></nav></aside></main></body></html>