<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>文档操作 on INFINI Easysearch (main)</title><link>/easysearch/main/docs/features/document-operations/</link><description>Recent content in 文档操作 on INFINI Easysearch (main)</description><generator>Hugo -- gohugo.io</generator><atom:link href="/easysearch/main/docs/features/document-operations/index.xml" rel="self" type="application/rss+xml"/><item><title>Index API</title><link>/easysearch/main/docs/features/document-operations/index-api/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/easysearch/main/docs/features/document-operations/index-api/</guid><description>将一个 JSON 文档写入指定索引。若文档 ID 已存在，则整文档覆盖并递增 _version。
请求格式 # PUT /&amp;lt;index&amp;gt;/_doc/&amp;lt;_id&amp;gt; POST /&amp;lt;index&amp;gt;/_doc/&amp;lt;_id&amp;gt; POST /&amp;lt;index&amp;gt;/_doc # 自动生成 _id 仅创建（文档存在时返回 409 Conflict）：
PUT /&amp;lt;index&amp;gt;/_create/&amp;lt;_id&amp;gt; POST /&amp;lt;index&amp;gt;/_create/&amp;lt;_id&amp;gt; 路径参数 # 参数 必需 说明 &amp;lt;index&amp;gt; 是 目标索引名称 &amp;lt;_id&amp;gt; 否 文档 ID。使用 POST /&amp;lt;index&amp;gt;/_doc 时可省略，由系统自动生成 查询参数 # 参数 类型 默认值 说明 op_type string index 写入类型。index = 创建或覆盖；create = 仅创建（已存在时返回 409）。使用 _create 端点时强制为 create routing string — 自定义路由值，决定文档落入哪个分片 pipeline string — 写入前执行的 Ingest Pipeline 名称 refresh string false 写入后是否刷新。true = 立即刷新；wait_for = 等待下一次自动刷新完成后返回；false = 不等待 timeout time 1m 等待主分片可用的超时时间 version long — 用于外部版本控制的版本号 version_type string internal 版本类型：internal、external、external_gte if_seq_no long — 乐观并发控制：仅当文档的 _seq_no 等于此值时才执行写入 if_primary_term long — 乐观并发控制：仅当文档的 _primary_term 等于此值时才执行写入 wait_for_active_shards string 1 写入前需要的活跃分片数量。1 = 仅主分片；all = 全部分片 require_alias boolean false 为 true 时要求 &amp;lt;index&amp;gt; 必须是别名，否则返回错误 请求体 # 完整的 JSON 文档，即 _source 的内容。</description></item><item><title>Get API</title><link>/easysearch/main/docs/features/document-operations/get-api/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/easysearch/main/docs/features/document-operations/get-api/</guid><description>按 ID 检索单条文档，返回完整 _source 及元数据。
请求格式 # GET /&amp;lt;index&amp;gt;/_doc/&amp;lt;_id&amp;gt; HEAD /&amp;lt;index&amp;gt;/_doc/&amp;lt;_id&amp;gt; 仅返回 _source（不含元数据）：
GET /&amp;lt;index&amp;gt;/_source/&amp;lt;_id&amp;gt; HEAD /&amp;lt;index&amp;gt;/_source/&amp;lt;_id&amp;gt; 路径参数 # 参数 必需 说明 &amp;lt;index&amp;gt; 是 目标索引 &amp;lt;_id&amp;gt; 是 文档 ID 查询参数 # 参数 类型 默认值 说明 _source string/boolean true true/false 启用或禁用 _source 返回，或传逗号分隔字段名仅返回指定字段 _source_includes string — _source 中要包含的字段（逗号分隔，支持通配符） _source_excludes string — _source 中要排除的字段（逗号分隔，支持通配符） stored_fields string — 要返回的 stored 字段（逗号分隔） routing string — 自定义路由值。若文档写入时使用了自定义路由，检索时必须指定相同的值 preference string — 查询偏好。_local = 优先本地分片；_primary = 仅主分片；或自定义字符串 realtime boolean true 实时读取。为 true 时不依赖刷新即可读到最新写入 refresh boolean false 读取前是否强制刷新 version long — 期望的版本号，不匹配时返回 409 version_type string internal 版本类型 示例 # 获取完整文档 # GET /website/_doc/123 响应：</description></item><item><title>Update API</title><link>/easysearch/main/docs/features/document-operations/update-api/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/easysearch/main/docs/features/document-operations/update-api/</guid><description>基于现有文档做部分字段更新或脚本更新。 内部流程：读取当前 _source → 合并修改 → 写入新文档（不是原地修改）。
请求格式 # POST /&amp;lt;index&amp;gt;/_update/&amp;lt;_id&amp;gt; 路径参数 # 参数 必需 说明 &amp;lt;index&amp;gt; 是 目标索引 &amp;lt;_id&amp;gt; 是 文档 ID 查询参数 # 参数 类型 默认值 说明 retry_on_conflict int 0 版本冲突时自动重试次数。适合&amp;quot;计数器累加&amp;quot;等顺序不敏感场景 routing string — 自定义路由 timeout time 1m 等待主分片可用的超时 refresh string false 更新后刷新策略：true、false、wait_for _source string/boolean true 控制响应中是否返回 _source _source_includes string — 响应中 _source 要包含的字段 _source_excludes string — 响应中 _source 要排除的字段 if_seq_no long — 乐观并发控制 if_primary_term long — 乐观并发控制 wait_for_active_shards string — 活跃分片数量 require_alias boolean false 要求目标必须是别名 注意：Update API 不支持 version / version_type 参数。如需乐观并发控制，请使用 if_seq_no + if_primary_term。</description></item><item><title>Delete API</title><link>/easysearch/main/docs/features/document-operations/delete-api/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/easysearch/main/docs/features/document-operations/delete-api/</guid><description>按 ID 删除单条文档。
请求格式 # DELETE /&amp;lt;index&amp;gt;/_doc/&amp;lt;_id&amp;gt; 路径参数 # 参数 必需 说明 &amp;lt;index&amp;gt; 是 目标索引 &amp;lt;_id&amp;gt; 是 文档 ID 查询参数 # 参数 类型 默认值 说明 routing string — 自定义路由值 timeout time 1m 等待主分片可用的超时 refresh string false 删除后刷新策略 version long — 期望版本号 version_type string internal 版本类型 if_seq_no long — 乐观并发控制 if_primary_term long — 乐观并发控制 wait_for_active_shards string — 活跃分片数量 示例 # DELETE /website/_doc/123 响应：</description></item><item><title>Multi Get API</title><link>/easysearch/main/docs/features/document-operations/multi-get-api/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/easysearch/main/docs/features/document-operations/multi-get-api/</guid><description>一次请求获取多条文档。协调节点按分片拆分请求并行转发，比循环调用 GET 更高效。
请求格式 # GET /_mget POST /_mget GET /&amp;lt;index&amp;gt;/_mget POST /&amp;lt;index&amp;gt;/_mget 路径参数 # 参数 必需 说明 &amp;lt;index&amp;gt; 否 默认索引。在 URL 中指定后，请求体中的文档可省略 _index 查询参数 # 参数 类型 默认值 说明 routing string — 默认路由值 preference string — 查询偏好 realtime boolean true 实时读取 refresh boolean false 读取前是否刷新 stored_fields string — 默认返回的 stored 字段 _source string/boolean true 默认 _source 过滤 _source_includes string — 默认包含的字段 _source_excludes string — 默认排除的字段 请求体 # 标准格式 # { &amp;#34;docs&amp;#34;: [ { &amp;#34;_index&amp;#34;: &amp;#34;website&amp;#34;, &amp;#34;_id&amp;#34;: &amp;#34;1&amp;#34; }, { &amp;#34;_index&amp;#34;: &amp;#34;website&amp;#34;, &amp;#34;_id&amp;#34;: &amp;#34;2&amp;#34;, &amp;#34;_source&amp;#34;: [&amp;#34;title&amp;#34;] }, { &amp;#34;_index&amp;#34;: &amp;#34;blog&amp;#34;, &amp;#34;_id&amp;#34;: &amp;#34;3&amp;#34;, &amp;#34;routing&amp;#34;: &amp;#34;user1&amp;#34; } ] } 每条文档可单独指定 _index、_source、routing、stored_fields。</description></item><item><title>Bulk API</title><link>/easysearch/main/docs/features/document-operations/bulk-api/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/easysearch/main/docs/features/document-operations/bulk-api/</guid><description>在单个请求中执行多个 index、create、update、delete 操作。是高吞吐写入的核心能力。
请求格式 # POST /_bulk POST /&amp;lt;index&amp;gt;/_bulk 路径参数 # 参数 必需 说明 &amp;lt;index&amp;gt; 否 默认索引。指定后操作行中可省略 _index 查询参数 # 参数 类型 默认值 说明 routing string — 默认路由值 pipeline string — 默认 Ingest Pipeline refresh string false 所有操作完成后的刷新策略 timeout time 1m 超时时间 wait_for_active_shards string — 活跃分片数量 require_alias boolean — 要求目标必须是别名 _source string/boolean — 默认 _source 过滤 _source_includes string — 默认包含字段 _source_excludes string — 默认排除字段 请求体格式（NDJSON） # 请求体是逐行 JSON（Newline Delimited JSON）格式，每行一个 JSON 对象：</description></item><item><title>Count API</title><link>/easysearch/main/docs/features/document-operations/count-api/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/easysearch/main/docs/features/document-operations/count-api/</guid><description>返回匹配查询的文档数量，不返回文档内容。
请求格式 # GET /&amp;lt;index&amp;gt;/_count POST /&amp;lt;index&amp;gt;/_count GET /_count POST /_count 路径参数 # 参数 必需 说明 &amp;lt;index&amp;gt; 否 目标索引，支持逗号分隔多索引和通配符 查询参数 # 参数 类型 默认值 说明 q string — 简单查询字符串 df string — q 参数的默认搜索字段 default_operator string OR q 参数的默认逻辑运算符：AND 或 OR analyzer string — q 参数使用的分析器 analyze_wildcard boolean false 是否分析通配符 lenient boolean — 宽松解析模式 routing string — 路由值 preference string — 查询偏好 min_score float — 最低分数过滤 terminate_after int 0 每分片最多计数的文档数（0 = 不限制） expand_wildcards string open 通配符展开方式：open、closed、hidden、all、none ignore_unavailable boolean false 忽略不存在的索引 allow_no_indices boolean true 允许通配符不匹配任何索引 请求体（可选） # { &amp;#34;query&amp;#34;: { &amp;#34;term&amp;#34;: { &amp;#34;status&amp;#34;: &amp;#34;published&amp;#34; } } } 示例 # 使用查询字符串：</description></item><item><title>Term Vectors API</title><link>/easysearch/main/docs/features/document-operations/term-vectors-api/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/easysearch/main/docs/features/document-operations/term-vectors-api/</guid><description>返回文档中特定字段的词项信息（词频、位置、偏移量等），用于文本分析和调试。
请求格式 # GET /&amp;lt;index&amp;gt;/_termvectors/&amp;lt;_id&amp;gt; POST /&amp;lt;index&amp;gt;/_termvectors/&amp;lt;_id&amp;gt; GET /&amp;lt;index&amp;gt;/_termvectors # 在请求体中提供临时文档 POST /&amp;lt;index&amp;gt;/_termvectors 批量获取：
GET /_mtermvectors POST /_mtermvectors GET /&amp;lt;index&amp;gt;/_mtermvectors POST /&amp;lt;index&amp;gt;/_mtermvectors 路径参数 # 参数 必需 说明 &amp;lt;index&amp;gt; 是 目标索引 &amp;lt;_id&amp;gt; 否 文档 ID。省略时需在请求体中通过 doc 提供临时文档 查询参数 # 参数 类型 默认值 说明 fields string — 逗号分隔的字段列表 offsets boolean true 返回词项偏移量 positions boolean true 返回词项位置 payloads boolean true 返回词项负载 term_statistics boolean false 返回词项的总词频和文档频率 field_statistics boolean true 返回文档计数、文档频率之和、总词频之和 realtime boolean true 实时读取 routing string — 路由值 preference string — 查询偏好 示例 # GET /website/_termvectors/1?</description></item><item><title>Update by Query</title><link>/easysearch/main/docs/features/document-operations/update-by-query/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/easysearch/main/docs/features/document-operations/update-by-query/</guid><description>Update by Query 对所有匹配查询条件的文档执行更新操作。 常用于批量修改字段值、数据迁移补丁、通过脚本做批量计算等场景。
内部流程：scroll 遍历匹配文档 → 逐批执行 bulk update → 返回统计结果。
请求格式 # POST /&amp;lt;index&amp;gt;/_update_by_query 路径参数 # 参数 必需 说明 &amp;lt;index&amp;gt; 是 目标索引，支持逗号分隔多索引和通配符 查询参数 # 参数 类型 默认值 说明 refresh boolean false 操作完成后是否刷新受影响的分片 timeout time 1m 超时时间 wait_for_completion boolean true 为 true 时同步等待完成后返回结果；为 false 时立即返回 task ID，可通过 Task API 查询进度 wait_for_active_shards string — 操作前需要的活跃分片数量 requests_per_second float 无限制 每秒请求数限制（流量控制）。-1 = 不限制 slices int/string 1 并行切片数。&amp;quot;auto&amp;quot; = 自动按分片数拆分 scroll time — scroll 上下文存活时间（如 5m） scroll_size int 1000 每批 scroll 获取的文档数 conflicts string abort 版本冲突处理方式：abort = 遇到冲突即中止；proceed = 跳过冲突继续执行 max_docs int 全部 最多处理的文档数量 pipeline string — 对匹配文档执行的 Ingest Pipeline search_timeout time — 搜索阶段超时 q string — 简单查询字符串（替代请求体中的 query） df string — q 参数的默认字段 default_operator string OR q 参数的默认运算符 analyzer string — q 参数使用的分析器 analyze_wildcard boolean false 是否分析通配符 lenient boolean — 宽松解析模式 routing string — 路由值 preference string — 查询偏好 terminate_after int 0 每分片最多处理的文档数（0 = 不限制） expand_wildcards string open 通配符展开：open、closed、hidden、all、none ignore_unavailable boolean false 忽略不存在的索引 allow_no_indices boolean true 允许通配符不匹配任何索引 请求体 # { &amp;#34;query&amp;#34;: { .</description></item><item><title>Delete by Query</title><link>/easysearch/main/docs/features/document-operations/delete-by-query/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/easysearch/main/docs/features/document-operations/delete-by-query/</guid><description>Delete by Query 删除所有匹配查询条件的文档。 适用于批量清理过期数据、删除特定条件的文档等场景。
内部流程：scroll 遍历匹配文档 → 逐批执行 bulk delete → 返回统计结果。
请求格式 # POST /&amp;lt;index&amp;gt;/_delete_by_query 路径参数 # 参数 必需 说明 &amp;lt;index&amp;gt; 是 目标索引，支持逗号分隔多索引和通配符 查询参数 # 参数 类型 默认值 说明 refresh boolean false 操作完成后是否刷新受影响的分片 timeout time 1m 超时时间 wait_for_completion boolean true 为 true 时同步等待；为 false 时立即返回 task ID wait_for_active_shards string — 操作前需要的活跃分片数量 requests_per_second float 无限制 每秒请求数限制。-1 = 不限制 slices int/string 1 并行切片数。&amp;quot;auto&amp;quot; = 按分片数自动拆分 scroll time — scroll 上下文存活时间 scroll_size int 1000 每批 scroll 获取的文档数 conflicts string abort 版本冲突处理：abort = 中止；proceed = 跳过继续 max_docs int 全部 最多删除的文档数量 search_timeout time — 搜索阶段超时 q string — 简单查询字符串 df string — q 参数的默认字段 default_operator string OR q 参数的默认运算符 analyzer string — q 参数使用的分析器 analyze_wildcard boolean false 是否分析通配符 lenient boolean — 宽松解析模式 routing string — 路由值 preference string — 查询偏好 terminate_after int 0 每分片最多处理的文档数 expand_wildcards string open 通配符展开方式 ignore_unavailable boolean false 忽略不存在的索引 allow_no_indices boolean true 允许通配符不匹配任何索引 请求体 # { &amp;#34;query&amp;#34;: { .</description></item></channel></rss>