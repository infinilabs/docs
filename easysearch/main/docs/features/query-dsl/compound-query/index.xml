<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>复合查询 on INFINI Easysearch</title><link>/easysearch/main/docs/features/query-dsl/compound-query/</link><description>Recent content in 复合查询 on INFINI Easysearch</description><generator>Hugo -- gohugo.io</generator><atom:link href="/easysearch/main/docs/features/query-dsl/compound-query/index.xml" rel="self" type="application/rss+xml"/><item><title>Bool 查询</title><link>/easysearch/main/docs/features/query-dsl/compound-query/bool/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/easysearch/main/docs/features/query-dsl/compound-query/bool/</guid><description>Bool 查询 # bool 查询可以将多个查询子句组合成一个高级查询。这些子句通过布尔逻辑组合起来，以在结果中找到匹配的文档。
相关指南（先读这些） # Query DSL 基础 结构化搜索 查询子句 # 在布尔（ bool ）查询中使用以下查询子句：
子句 行为 must 逻辑 and 运算符。结果必须匹配此子句中的所有查询。 must_not 逻辑 not 运算符。所有匹配项都将被排除在结果之外。如果 must_not 包含多个子句，则只返回不匹配任何这些子句的文档。例如， &amp;quot;must_not&amp;quot;:[{clause_A}, {clause_B}] 等同于 NOT(A OR B) 。 should 逻辑 or 运算符。结果必须匹配至少一个查询。匹配更多 should 子句会增加文档的相关性分数。您可以使用 minimum_should_match 参数设置必须匹配的最小查询数量。如果一个查询包含 must 或 filter 子句，默认 minimum_should_match 值为 0。否则，默认 minimum_should_match 值为 1。 filter 逻辑 and 运算符，在应用查询之前首先应用于减少您的数据集。过滤器子句中的查询是一个是或否选项。如果文档匹配查询，则它将出现在结果中；否则，它将不会出现。过滤器查询的结果通常会被缓存以允许更快的返回。使用过滤器查询根据精确匹配、范围、日期或数字来过滤结果。 一个布尔查询具有以下结构：</description></item><item><title>Boosting 查询</title><link>/easysearch/main/docs/features/query-dsl/compound-query/boosting/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/easysearch/main/docs/features/query-dsl/compound-query/boosting/</guid><description>Boosting 查询 # 如果你搜索&amp;quot;pitcher&amp;quot;这个词，你的结果可能既与棒球运动员有关，也与盛液体的容器有关。在棒球语境下搜索时，你可能想通过使用 must_not 子句完全排除包含&amp;quot;glass&amp;quot;或&amp;quot;water&amp;quot;的搜索结果。然而，如果你想保留这些结果但降低它们的关联度，可以使用 boosting 查询。
一个 boosting 查询返回与 positive 查询匹配的文档。在这些文档中，与 negative 查询也匹配的文档的关联度得分会降低（它们的关联度得分会乘以负的提升因子）。
相关指南（先读这些） # 查询 DSL 基础 相关性：加权与调参 参考用例 # 考虑一个包含两个文档的索引，你以如下方式索引：
PUT testindex/_doc/1 { &amp;#34;article_name&amp;#34;: &amp;#34;The greatest pitcher in baseball history&amp;#34; } PUT testindex/_doc/2 { &amp;#34;article_name&amp;#34;: &amp;#34;The making of a glass pitcher&amp;#34; } 使用以下匹配查询来搜索包含单词“pitcher”的文档：
GET testindex/_search { &amp;#34;query&amp;#34;: { &amp;#34;match&amp;#34;: { &amp;#34;article_name&amp;#34;: &amp;#34;pitcher&amp;#34; } } } 返回的两个文档具有相同的相关性分数：
{ &amp;#34;took&amp;#34;: 5, &amp;#34;timed_out&amp;#34;: false, &amp;#34;_shards&amp;#34;: { &amp;#34;total&amp;#34;: 1, &amp;#34;successful&amp;#34;: 1, &amp;#34;skipped&amp;#34;: 0, &amp;#34;failed&amp;#34;: 0 }, &amp;#34;hits&amp;#34;: { &amp;#34;total&amp;#34;: { &amp;#34;value&amp;#34;: 2, &amp;#34;relation&amp;#34;: &amp;#34;eq&amp;#34; }, &amp;#34;max_score&amp;#34;: 0.</description></item><item><title>Constant Score 查询</title><link>/easysearch/main/docs/features/query-dsl/compound-query/constant-score/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/easysearch/main/docs/features/query-dsl/compound-query/constant-score/</guid><description>Constant Score 查询 # 如果您需要返回包含某个词的文档，而不管该词出现多少次，您可以使用 constant_score 查询。constant_score 查询包装一个过滤器查询，并将结果中的所有文档的关联分数设置为 boost 参数的值。因此，所有返回的文档具有相同的关联分数，并且不考虑词频/逆文档频率（TF/IDF）。过滤器查询不会计算关联分数。此外，Easysearch 会缓存常用的过滤器查询以提高性能。
相关指南（先读这些） # 查询 DSL 基础 结构化搜索 参考样例 # 使用以下查询返回 shakespeare 索引中包含单词“Hamlet”的文档：
GET shakespeare/_search { &amp;#34;query&amp;#34;: { &amp;#34;constant_score&amp;#34;: { &amp;#34;filter&amp;#34;: { &amp;#34;match&amp;#34;: { &amp;#34;text_entry&amp;#34;: &amp;#34;Hamlet&amp;#34; } }, &amp;#34;boost&amp;#34;: 1.2 } } } 结果中的所有文档都被分配了 1.2 的相关性分数：
{ &amp;#34;took&amp;#34;: 8, &amp;#34;timed_out&amp;#34;: false, &amp;#34;_shards&amp;#34;: { &amp;#34;total&amp;#34;: 1, &amp;#34;successful&amp;#34;: 1, &amp;#34;skipped&amp;#34;: 0, &amp;#34;failed&amp;#34;: 0 }, &amp;#34;hits&amp;#34;: { &amp;#34;total&amp;#34;: { &amp;#34;value&amp;#34;: 96, &amp;#34;relation&amp;#34;: &amp;#34;eq&amp;#34; }, &amp;#34;max_score&amp;#34;: 1.</description></item><item><title>Dis Max 查询</title><link>/easysearch/main/docs/features/query-dsl/compound-query/disjunction-max/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/easysearch/main/docs/features/query-dsl/compound-query/disjunction-max/</guid><description>Dis Max 查询 # dis_max 查询返回与一个或多个查询子句匹配的任何文档。对于与多个查询子句匹配的文档，相关性得分设置为所有匹配查询子句中的最高相关性得分。
当返回的文档的相关性分数相同时，您可以使用 tie_breaker 参数来增加匹配多个查询子句的文档的权重。
相关指南（先读这些） # 多字段搜索 Query DSL 基础 参考样例 # 考虑一个包含两个文档的索引，您按照以下方式索引这些文档：
PUT testindex1/_doc/1 { &amp;#34;title&amp;#34;: &amp;#34; The Top 10 Shakespeare Poems&amp;#34;, &amp;#34;description&amp;#34;: &amp;#34;Top 10 sonnets of England&amp;#39;s national poet and the Bard of Avon&amp;#34; } PUT testindex1/_doc/2 { &amp;#34;title&amp;#34;: &amp;#34;Sonnets of the 16th Century&amp;#34;, &amp;#34;body&amp;#34;: &amp;#34;The poems written by various 16-th century poets&amp;#34; } 使用 dis_max 查询来搜索包含单词“莎士比亚诗歌”的文档</description></item><item><title>Function Score 查询</title><link>/easysearch/main/docs/features/query-dsl/compound-query/function-score/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/easysearch/main/docs/features/query-dsl/compound-query/function-score/</guid><description>Function Score 查询 # 如果您需要更改结果中返回的文档的相关性评分，请使用 function_score 查询。function_score 查询定义了一个查询和一个或多个函数，这些函数可以应用于所有结果或结果的一部分，以重新计算它们的相关性评分。
相关指南（先读这些） # 查询 DSL 基础 相关性：加权与调参 使用一个评分函数 # 最基础的 function_score 查询示例使用一个函数来重新计算分数。以下查询使用一个 weight 函数将所有相关性分数加倍。此函数适用于所有结果文档，因为没有在 function_score 中指定 query 参数：
GET shakespeare/_search { &amp;#34;query&amp;#34;: { &amp;#34;function_score&amp;#34;: { &amp;#34;weight&amp;#34;: &amp;#34;2&amp;#34; } } } 将评分函数应用于文档子集 # 要将评分函数应用于文档子集，在函数中提供一个查询：
GET shakespeare/_search { &amp;#34;query&amp;#34;: { &amp;#34;function_score&amp;#34;: { &amp;#34;query&amp;#34;: { &amp;#34;match&amp;#34;: { &amp;#34;play_name&amp;#34;: &amp;#34;Hamlet&amp;#34; } }, &amp;#34;weight&amp;#34;: &amp;#34;2&amp;#34; } } } 支持的功能 # function_score 查询类型支持以下功能：</description></item></channel></rss>