<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>向量搜索 on INFINI Easysearch</title><link>/easysearch/main/docs/features/vector-search/</link><description>Recent content in 向量搜索 on INFINI Easysearch</description><generator>Hugo -- gohugo.io</generator><atom:link href="/easysearch/main/docs/features/vector-search/index.xml" rel="self" type="application/rss+xml"/><item><title>向量搜索指南</title><link>/easysearch/main/docs/features/vector-search/vector-search/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/easysearch/main/docs/features/vector-search/vector-search/</guid><description>本页介绍如何在 Easysearch 中使用向量搜索——从创建索引到执行查询的完整流程。
前提条件 # 向量搜索需要 k-NN 插件。安装方法参见 插件安装。
注意：从 1.11.1 版本起，创建 k-NN 索引时不再需要配置 index.knn 参数。
步骤一：创建向量索引 # 稠密浮点向量（最常用） # 适用于文本 Embedding、图像特征等场景：
PUT /my-vectors { &amp;#34;mappings&amp;#34;: { &amp;#34;properties&amp;#34;: { &amp;#34;title&amp;#34;: { &amp;#34;type&amp;#34;: &amp;#34;text&amp;#34; }, &amp;#34;embedding&amp;#34;: { &amp;#34;type&amp;#34;: &amp;#34;knn_dense_float_vector&amp;#34;, &amp;#34;knn&amp;#34;: { &amp;#34;dims&amp;#34;: 768, &amp;#34;model&amp;#34;: &amp;#34;lsh&amp;#34;, &amp;#34;similarity&amp;#34;: &amp;#34;cosine&amp;#34;, &amp;#34;L&amp;#34;: 99, &amp;#34;k&amp;#34;: 1 } } } } } 映射参数、各索引模型和相似度函数的完整说明，请参阅 向量字段类型参考。
步骤二：索引文档 # 向量通常由外部 Embedding 模型生成，写入时附带向量数据：</description></item><item><title>向量字段建模</title><link>/easysearch/main/docs/features/vector-search/vector-fields/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/easysearch/main/docs/features/vector-search/vector-fields/</guid><description>本页聚焦向量字段的设计策略——在已经理解字段类型和映射参数的基础上，如何为实际业务做出合理的字段规划。
关于两种向量字段类型（knn_dense_float_vector / knn_sparse_bool_vector）的映射参数、数据格式、各索引模型的详细说明，请参阅 向量字段类型参考。
文本字段 + 向量字段 # 一个典型的混合搜索文档同时包含文本字段和向量字段：
PUT /hybrid-index { &amp;#34;mappings&amp;#34;: { &amp;#34;properties&amp;#34;: { &amp;#34;title&amp;#34;: { &amp;#34;type&amp;#34;: &amp;#34;text&amp;#34; }, &amp;#34;content&amp;#34;: { &amp;#34;type&amp;#34;: &amp;#34;text&amp;#34; }, &amp;#34;embedding&amp;#34;: { &amp;#34;type&amp;#34;: &amp;#34;knn_dense_float_vector&amp;#34;, &amp;#34;knn&amp;#34;: { &amp;#34;dims&amp;#34;: 768, &amp;#34;model&amp;#34;: &amp;#34;lsh&amp;#34;, &amp;#34;similarity&amp;#34;: &amp;#34;cosine&amp;#34;, &amp;#34;L&amp;#34;: 99, &amp;#34;k&amp;#34;: 1 } } } } } 这样同一份文档既支持 BM25 全文搜索，也支持 kNN 向量搜索，为 Hybrid 检索打基础。
多向量字段 # 为同一文档存储多个向量表示，例如标题和正文各一个 Embedding：
PUT /multi-vec-index { &amp;#34;mappings&amp;#34;: { &amp;#34;properties&amp;#34;: { &amp;#34;title&amp;#34;: { &amp;#34;type&amp;#34;: &amp;#34;text&amp;#34; }, &amp;#34;content&amp;#34;: { &amp;#34;type&amp;#34;: &amp;#34;text&amp;#34; }, &amp;#34;title_vec&amp;#34;: { &amp;#34;type&amp;#34;: &amp;#34;knn_dense_float_vector&amp;#34;, &amp;#34;knn&amp;#34;: { &amp;#34;dims&amp;#34;: 768, &amp;#34;model&amp;#34;: &amp;#34;lsh&amp;#34;, &amp;#34;similarity&amp;#34;: &amp;#34;cosine&amp;#34;, &amp;#34;L&amp;#34;: 99, &amp;#34;k&amp;#34;: 1 } }, &amp;#34;content_vec&amp;#34;: { &amp;#34;type&amp;#34;: &amp;#34;knn_dense_float_vector&amp;#34;, &amp;#34;knn&amp;#34;: { &amp;#34;dims&amp;#34;: 768, &amp;#34;model&amp;#34;: &amp;#34;lsh&amp;#34;, &amp;#34;similarity&amp;#34;: &amp;#34;cosine&amp;#34;, &amp;#34;L&amp;#34;: 99, &amp;#34;k&amp;#34;: 1 } } } } } 注意：每个向量字段都消耗存储和索引资源。只为线上查询真正需要的维度建向量字段，避免无节制堆积。</description></item><item><title>k-NN 查询 API</title><link>/easysearch/main/docs/features/vector-search/knn_api/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/easysearch/main/docs/features/vector-search/knn_api/</guid><description>先决条件 # 要运行 k-NN 搜索，必须安装 knn 插件，参考 插件安装。
注意：从 1.11.1 版本起，创建 k-NN 索引时不再需要配置 index.knn 参数。
向量字段的映射参数、各索引模型和相似度函数的详细说明，请参阅 向量字段类型参考。
查询语法 # 所有向量搜索都通过 knn_nearest_neighbors 查询完成：
GET /&amp;lt;index&amp;gt;/_search { &amp;#34;query&amp;#34;: { &amp;#34;knn_nearest_neighbors&amp;#34;: { &amp;#34;field&amp;#34;: &amp;#34;&amp;lt;vector_field&amp;gt;&amp;#34;, &amp;#34;vec&amp;#34;: { ... }, &amp;#34;model&amp;#34;: &amp;#34;&amp;lt;model&amp;gt;&amp;#34;, &amp;#34;similarity&amp;#34;: &amp;#34;&amp;lt;similarity&amp;gt;&amp;#34;, &amp;#34;candidates&amp;#34;: &amp;lt;n&amp;gt; } } } 查询参数 # 参数 类型 必填 说明 field String ✅ 向量字段名称 vec Object ✅ 查询向量，支持三种格式（见下方） model String ✅ 索引模型：lsh、exact、permutation_lsh、sparse_indexed similarity String ✅ 相似度函数，必须与映射中的配置一致 candidates Integer 否 近似搜索的候选数量。仅用于 lsh/permutation_lsh/sparse_indexed 模型。越大越精准但越慢，推荐 size 的 5～10 倍 probes Integer 否 仅用于 l2 相似度的 LSH 查询：探测数量 查询向量格式 # 1.</description></item><item><title>向量搜索与语义搜索</title><link>/easysearch/main/docs/features/vector-search/vector-and-semantic-search/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/easysearch/main/docs/features/vector-search/vector-and-semantic-search/</guid><description>向量搜索和语义搜索经常被混用，但它们面向的层次不同。理解它们的区别有助于选择正确的方案。
概念区分 # 概念 本质 Easysearch 中的对应 向量搜索 在高维空间中查找最近邻 knn_nearest_neighbors 查询 语义搜索 按&amp;quot;含义&amp;quot;而非&amp;quot;关键词&amp;quot;检索 文本 → Embedding → 向量搜索 Hybrid 检索 关键词 + 语义多路召回融合 bool（knn + match） 全文搜索 基于 BM25 的词频匹配 match、multi_match 等 关系：语义搜索 = Embedding 模型 + 向量搜索。向量搜索是底层能力，语义搜索是应用层方案。
什么时候用什么 # 场景 推荐方案 理由 用户查询关键词明确 全文搜索 BM25 对精确关键词匹配效果最好 用户用自然语言提问 语义搜索 Embedding 能捕获同义词和意图 既要关键词又要语义 Hybrid 检索 两路召回互补，综合效果最好 以图搜图、跨模态 向量搜索 不同模态映射到同一向量空间 RAG / 知识库问答 语义搜索 或 Hybrid 为 LLM 提供高质量上下文 推荐系统 向量搜索 用户/商品特征向量的近邻查找 端到端语义搜索流程 # ┌──────────────┐ 用户查询 ──────▶ │ Embedding 模型│ ──────▶ 查询向量 └──────────────┘ │ ▼ ┌─────────────────┐ │ knn_nearest_ │ │ neighbors 查询 │ └─────────────────┘ │ ▼ 按语义相似度排序的结果 写入阶段：将文本通过 Embedding 模型转为向量，连同原始字段一起写入索引 查询阶段：将用户查询通过同一模型转为向量，使用 knn_nearest_neighbors 检索 融合阶段（可选）：将向量相似度得分与 BM25 得分加权融合 Embedding 模型的接入方式参见 Embedding 服务集成。</description></item></channel></rss>