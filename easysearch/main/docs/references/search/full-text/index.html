<!doctype html><html lang=zh><head><meta name=generator content="Hugo 0.79.1"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="全文查询 #  尽管可以使用 HTTP 请求参数执行简单搜索，但 Easysearch 查询域特定语言（DSL）允许您指定全部搜索选项。查询 DSL 使用 HTTP 请求主体。以这种方式指定的查询还有一个额外的优点，即其意图更加明确，并且更易于随时间调整。
此页面列出了所有全文查询类型和常用选项。考虑到选项的数量和微妙的行为，确保有用搜索结果的最佳方法是根据代表性索引测试不同的查询并验证输出。
匹配 #  创建一个 布尔查询 ，如果字段中存在搜索项，则返回结果。
查询的最基本形式仅提供字段（ title ）和对应的值（ wind ）:
GET _search { &#34;query&#34;: { &#34;match&#34;: { &#34;title&#34;: &#34;wind&#34; } } } 采用 curl的方式:
curl --insecure -XGET -u 'admin:admin' https://<host>:<port>/<index>/_search \  -H &#34;content-type: application/json&#34; \  -d '{ &#34;query&#34;: { &#34;match&#34;: { &#34;title&#34;: &#34;wind&#34; } } }' 查询接受以下选项。有关每个参数的描述，请参见 查询选项
GET _search { &#34;query&#34;: { &#34;match&#34;: { &#34;title&#34;: { &#34;query&#34;: &#34;wind&#34;, &#34;fuzziness&#34;: &#34;AUTO&#34;, &#34;fuzzy_transpositions&#34;: true, &#34;operator&#34;: &#34;or&#34;, &#34;minimum_should_match&#34;: 1, &#34;analyzer&#34;: &#34;standard&#34;, &#34;zero_terms_query&#34;: &#34;none&#34;, &#34;lenient&#34;: false, &#34;cutoff_frequency&#34;: 0."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="全文查询"><meta property="og:description" content="全文查询 #  尽管可以使用 HTTP 请求参数执行简单搜索，但 Easysearch 查询域特定语言（DSL）允许您指定全部搜索选项。查询 DSL 使用 HTTP 请求主体。以这种方式指定的查询还有一个额外的优点，即其意图更加明确，并且更易于随时间调整。
此页面列出了所有全文查询类型和常用选项。考虑到选项的数量和微妙的行为，确保有用搜索结果的最佳方法是根据代表性索引测试不同的查询并验证输出。
匹配 #  创建一个 布尔查询 ，如果字段中存在搜索项，则返回结果。
查询的最基本形式仅提供字段（ title ）和对应的值（ wind ）:
GET _search { &#34;query&#34;: { &#34;match&#34;: { &#34;title&#34;: &#34;wind&#34; } } } 采用 curl的方式:
curl --insecure -XGET -u 'admin:admin' https://<host>:<port>/<index>/_search \  -H &#34;content-type: application/json&#34; \  -d '{ &#34;query&#34;: { &#34;match&#34;: { &#34;title&#34;: &#34;wind&#34; } } }' 查询接受以下选项。有关每个参数的描述，请参见 查询选项
GET _search { &#34;query&#34;: { &#34;match&#34;: { &#34;title&#34;: { &#34;query&#34;: &#34;wind&#34;, &#34;fuzziness&#34;: &#34;AUTO&#34;, &#34;fuzzy_transpositions&#34;: true, &#34;operator&#34;: &#34;or&#34;, &#34;minimum_should_match&#34;: 1, &#34;analyzer&#34;: &#34;standard&#34;, &#34;zero_terms_query&#34;: &#34;none&#34;, &#34;lenient&#34;: false, &#34;cutoff_frequency&#34;: 0."><meta property="og:type" content="article"><meta property="og:url" content="/easysearch/main/docs/references/search/full-text/"><title>全文查询 | INFINI Easysearch</title><link rel=manifest href=/easysearch/main/manifest.json><link rel=icon href=/easysearch/main/favicon.png type=image/x-icon><link rel=stylesheet href=/easysearch/main/book.min.d80e87b12a4b49d9913d0bdd98bd83b7a44988be784760ba15522b377313dcf9.css integrity="sha256-2A6HsSpLSdmRPQvdmL2Dt6RJiL54R2C6FVIrN3MT3Pk="><link rel=stylesheet type=text/css href=/easysearch/main/css/asciinema-player.css><script defer src=/easysearch/main/js/jquery-2.x.min.js></script><script defer src=/easysearch/main/js/doc.js></script></head><body><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=/easysearch/main><img src=/easysearch/main/img/logo-zh.svg alt=Logo></a></h2><div class=heading><select class=version-selector>
<option value>main (latest)</option>
<option value=v1.12.0>v1.12.0</option>
<option value=v1.11.1>v1.11.1</option>
<option value=v1.11.0>v1.11.0</option>
<option value=v1.9.1>v1.9.1</option>
<option value=v1.8.3>v1.8.3</option>
<option value=v1.8.2>v1.8.2</option>
<option value=v1.8.0>v1.8.0</option>
<option value=v1.7.1>v1.7.1</option>
<option value=v1.7.0>v1.7.0</option>
<option value=v1.6.2>v1.6.2</option>
<option value=v1.6.1>v1.6.1</option>
<option value=v1.6.0>v1.6.0</option>
<option value=v1.5.0>v1.5.0</option>
<option value=v1.4.0>v1.4.0</option>
<option value=v1.3.0>v1.3.0</option>
<option value=v1.2.0>v1.2.0</option>
<option value=v1.1.1>v1.1.1</option>
<option value=v1.1.0>v1.1.0</option>
<option value=v1.0.1>v1.0.1</option>
<option value=v1.0.0>v1.0.0</option></select></div><ul><li><a href=/easysearch/main/docs/overview/>产品概述</a><ul></ul></li><li><input type=checkbox id=section-f1b7c1b2e5dd43526e77637c475d35b8 class=toggle>
<label for=section-f1b7c1b2e5dd43526e77637c475d35b8 class="flex justify-between"><a>入门指南</a>
<span>▾</span></label><ul><li><input type=checkbox id=section-e622c8a7dea0dd02f82a836e861475c5 class=toggle>
<label for=section-e622c8a7dea0dd02f82a836e861475c5 class="flex justify-between"><a href=/easysearch/main/docs/getting-started/install/>安装指南</a>
<span>▾</span></label><ul><li><a href=/easysearch/main/docs/getting-started/install/docker/>Docker</a></li><li><a href=/easysearch/main/docs/getting-started/install/docker-compose/>Docker Compose</a></li><li><a href=/easysearch/main/docs/getting-started/install/helm/>Helm Chart</a></li><li><a href=/easysearch/main/docs/getting-started/install/linux/>Linux</a></li><li><a href=/easysearch/main/docs/getting-started/install/windows/>Windows</a></li><li><input type=checkbox id=section-8df7e740f0b8d44e94e2d5f3851aef83 class=toggle>
<label for=section-8df7e740f0b8d44e94e2d5f3851aef83 class="flex justify-between"><a href=/easysearch/main/docs/getting-started/install/operator/>Operator</a>
<span>▾</span></label><ul><li><a href=/easysearch/main/docs/getting-started/install/operator/deploy_operator/>部署 Operator</a></li><li><a href=/easysearch/main/docs/getting-started/install/operator/deploy_easysearch/>部署 Easysearch</a></li><li><a href=/easysearch/main/docs/getting-started/install/operator/resource_manager/>资源扩容</a></li><li><a href=/easysearch/main/docs/getting-started/install/operator/node_scale/>节点扩容</a></li><li><a href=/easysearch/main/docs/getting-started/install/operator/update_password/>密码修改</a></li><li><a href=/easysearch/main/docs/getting-started/install/operator/upgrade/>版本升级</a></li><li><a href=/easysearch/main/docs/getting-started/install/operator/cert_manager/>证书管理</a></li><li><a href=/easysearch/main/docs/getting-started/install/operator/s3_snapshot/>s3 备份</a></li><li><a href=/easysearch/main/docs/getting-started/install/operator/FAQ/>FAQ</a></li></ul></li></ul></li><li><a href=/easysearch/main/docs/getting-started/settings/>系统调优</a></li><li><a href=/easysearch/main/docs/getting-started/configuration/>常用配置</a></li><li><a href=/easysearch/main/docs/getting-started/configuration_file/>配置说明</a></li></ul></li><li><input type=checkbox id=section-fb088f8a9be33f7f260ad2b140bb7bdc class=toggle checked>
<label for=section-fb088f8a9be33f7f260ad2b140bb7bdc class="flex justify-between"><a>功能手册</a>
<span>▾</span></label><ul><li><input type=checkbox id=section-dd5a2f6dc33fa990f542566f7a908106 class=toggle>
<label for=section-dd5a2f6dc33fa990f542566f7a908106 class="flex justify-between"><a href=/easysearch/main/docs/references/mappings-and-field-types/>文档建模</a>
<span>▾</span></label><ul><li><input type=checkbox id=section-7d4ce65a4422588ac64ff568cfa9eb9e class=toggle>
<label for=section-7d4ce65a4422588ac64ff568cfa9eb9e class="flex justify-between"><a href=/easysearch/main/docs/references/mappings-and-field-types/mapping-parameters/>文档映射</a>
<span>▾</span></label><ul><li><a href=/easysearch/main/docs/references/mappings-and-field-types/mapping-parameters/analyzer/>分析器参数</a></li><li><a href=/easysearch/main/docs/references/mappings-and-field-types/mapping-parameters/dynamic/>动态映射参数</a></li><li><a href=/easysearch/main/docs/references/mappings-and-field-types/mapping-parameters/copy_to/>字段复制参数</a></li><li><a href=/easysearch/main/docs/references/mappings-and-field-types/mapping-parameters/coerce/>强制类型转换参数</a></li><li><a href=/easysearch/main/docs/references/mappings-and-field-types/mapping-parameters/doc_values/>文档列值参数</a></li><li><a href=/easysearch/main/docs/references/mappings-and-field-types/mapping-parameters/enabled/>是否启用参数</a></li><li><a href=/easysearch/main/docs/references/mappings-and-field-types/mapping-parameters/boost/>权重参数设置</a></li></ul></li><li><input type=checkbox id=section-f879c6c2aa847411ec53259bcf512a91 class=toggle>
<label for=section-f879c6c2aa847411ec53259bcf512a91 class="flex justify-between"><a href=/easysearch/main/docs/references/mappings-and-field-types/field-types/>字段类型</a>
<span>▾</span></label><ul><li><a href=/easysearch/main/docs/references/mappings-and-field-types/field-types/rank/>Rank 字段类型</a></li><li><input type=checkbox id=section-cd8ebeffb1e1eb5dcc529f4edbad93fc class=toggle>
<label for=section-cd8ebeffb1e1eb5dcc529f4edbad93fc class="flex justify-between"><a href=/easysearch/main/docs/references/mappings-and-field-types/field-types/geo-filed-type/>地理字段类型</a>
<span>▾</span></label><ul><li><a href=/easysearch/main/docs/references/mappings-and-field-types/field-types/geo-filed-type/geo-point/>Geopoint 地理点字段类型</a></li><li><a href=/easysearch/main/docs/references/mappings-and-field-types/field-types/geo-filed-type/geo-shape/>Geoshape 地理形状字段类型</a></li></ul></li><li><input type=checkbox id=section-f94b121fac5f49bed5028d50034cc3cf class=toggle>
<label for=section-f94b121fac5f49bed5028d50034cc3cf class="flex justify-between"><a href=/easysearch/main/docs/references/mappings-and-field-types/field-types/string-field-type/>字符串字段类型</a>
<span>▾</span></label><ul><li><a href=/easysearch/main/docs/references/mappings-and-field-types/field-types/string-field-type/keyword/>Keyword 字段类型</a></li><li><a href=/easysearch/main/docs/references/mappings-and-field-types/field-types/string-field-type/text/>Text 字段类型</a></li></ul></li><li><input type=checkbox id=section-37ac2b2e61a91ff3354b11d860ec66cf class=toggle>
<label for=section-37ac2b2e61a91ff3354b11d860ec66cf class="flex justify-between"><a href=/easysearch/main/docs/references/mappings-and-field-types/field-types/object-field-type/>对象字段类型</a>
<span>▾</span></label><ul><li><a href=/easysearch/main/docs/references/mappings-and-field-types/field-types/object-field-type/flattened/>Flat 对象字段类型</a></li><li><a href=/easysearch/main/docs/references/mappings-and-field-types/field-types/object-field-type/flattened_text/>Flat 对象字段类型</a></li><li><a href=/easysearch/main/docs/references/mappings-and-field-types/field-types/object-field-type/join/>Join 字段类型</a></li><li><a href=/easysearch/main/docs/references/mappings-and-field-types/field-types/object-field-type/nested/>Nested 字段类型</a></li><li><a href=/easysearch/main/docs/references/mappings-and-field-types/field-types/object-field-type/object/>Object 对象字段类型</a></li></ul></li><li><input type=checkbox id=section-4f4e977370cb5a089a66f2d06c0cf2fc class=toggle>
<label for=section-4f4e977370cb5a089a66f2d06c0cf2fc class="flex justify-between"><a href=/easysearch/main/docs/references/mappings-and-field-types/field-types/date-field-type/>日期字段类型</a>
<span>▾</span></label><ul><li><a href=/easysearch/main/docs/references/mappings-and-field-types/field-types/date-field-type/date-nanos/>Date nanoseconds 字段类型</a></li><li><a href=/easysearch/main/docs/references/mappings-and-field-types/field-types/date-field-type/date/>Date 字段类型</a></li></ul></li><li><a href=/easysearch/main/docs/references/mappings-and-field-types/field-types/ip/>IP 地址字段类型</a></li><li><a href=/easysearch/main/docs/references/mappings-and-field-types/field-types/match_only_text/>match_only_text 字段类型</a></li><li><a href=/easysearch/main/docs/references/mappings-and-field-types/field-types/percolator/>Percolator 过滤器字段类型</a></li><li><a href=/easysearch/main/docs/references/mappings-and-field-types/field-types/binary/>二进制字段类型</a></li><li><a href=/easysearch/main/docs/references/mappings-and-field-types/field-types/alias/>别名字段类型</a></li><li><a href=/easysearch/main/docs/references/mappings-and-field-types/field-types/knn/>向量字段类型</a></li><li><a href=/easysearch/main/docs/references/mappings-and-field-types/field-types/boolean/>布尔字段类型</a></li><li><a href=/easysearch/main/docs/references/mappings-and-field-types/field-types/numeric-field/>数值字段类型</a></li><li><input type=checkbox id=section-d087fbeb67c721ac6618bf4ae5f3be20 class=toggle>
<label for=section-d087fbeb67c721ac6618bf4ae5f3be20 class="flex justify-between"><a href=/easysearch/main/docs/references/mappings-and-field-types/field-types/autocomplete-field-type/>自动补全字段类型</a>
<span>▾</span></label><ul><li><a href=/easysearch/main/docs/references/mappings-and-field-types/field-types/autocomplete-field-type/search-as-you-type/>Search-as-you-type 字段类型</a></li><li><a href=/easysearch/main/docs/references/mappings-and-field-types/field-types/autocomplete-field-type/completion/>自动补全字段类型</a></li></ul></li><li><a href=/easysearch/main/docs/references/mappings-and-field-types/field-types/range-field-type/>范围字段类型</a></li><li><a href=/easysearch/main/docs/references/mappings-and-field-types/field-types/wildcard/>Wildcard 字段类型</a></li></ul></li><li><input type=checkbox id=section-92a866d9a34e707f209ba1cdbeaba985 class=toggle>
<label for=section-92a866d9a34e707f209ba1cdbeaba985 class="flex justify-between"><a href=/easysearch/main/docs/references/mappings-and-field-types/metadata-field/>元数据字段</a>
<span>▾</span></label><ul><li><a href=/easysearch/main/docs/references/mappings-and-field-types/metadata-field/id/>ID 属性</a></li><li><a href=/easysearch/main/docs/references/mappings-and-field-types/metadata-field/meta/>元数据属性</a></li><li><a href=/easysearch/main/docs/references/mappings-and-field-types/metadata-field/field-names/>字段名称</a></li><li><a href=/easysearch/main/docs/references/mappings-and-field-types/metadata-field/ignored/>忽略属性</a></li><li><a href=/easysearch/main/docs/references/mappings-and-field-types/metadata-field/source/>源文档属性</a></li><li><a href=/easysearch/main/docs/references/mappings-and-field-types/metadata-field/index1/>索引属性</a></li><li><a href=/easysearch/main/docs/references/mappings-and-field-types/metadata-field/routing/>路由属性</a></li></ul></li></ul></li><li><input type=checkbox id=section-232f0668f3be6ea64e1c220baec34dfc class=toggle>
<label for=section-232f0668f3be6ea64e1c220baec34dfc class="flex justify-between"><a>文档操作</a>
<span>▾</span></label><ul><li><a href=/easysearch/main/docs/references/document/index-data/>增删改查</a></li><li><a href=/easysearch/main/docs/references/document/index-alias/>别名操作</a></li><li><a href=/easysearch/main/docs/references/document/index-compression/>索引压缩</a></li></ul></li><li><input type=checkbox id=section-6b02990358c7382bac3f39043e5fd437 class=toggle checked>
<label for=section-6b02990358c7382bac3f39043e5fd437 class="flex justify-between"><a>搜索操作</a>
<span>▾</span></label><ul><li><a href=/easysearch/main/docs/references/search/term/>词项查询</a></li><li><a href=/easysearch/main/docs/references/search/full-text/ class=active>全文查询</a></li><li><a href=/easysearch/main/docs/references/search/knn_api/>向量查询</a></li><li><a href=/easysearch/main/docs/references/search/bool/>布尔查询</a></li><li><a href=/easysearch/main/docs/references/search/search-template/>查询模版</a></li><li><a href=/easysearch/main/docs/references/search/async_search/>异步搜索</a></li><li><a href=/easysearch/main/docs/references/search/pit_api/>定点查询</a></li></ul></li><li><input type=checkbox id=section-69a0462c4990a8b0bf6189289fb56e8a class=toggle>
<label for=section-69a0462c4990a8b0bf6189289fb56e8a class="flex justify-between"><a href=/easysearch/main/docs/references/aggregation/>聚合操作</a>
<span>▾</span></label><ul><li><a href=/easysearch/main/docs/references/aggregation/metric-agg/>指标聚合</a></li><li><a href=/easysearch/main/docs/references/aggregation/bucket-agg/>分桶聚合</a></li><li><a href=/easysearch/main/docs/references/aggregation/pipeline-agg/>管道聚合</a></li></ul></li><li><input type=checkbox id=section-86e828ca7e30e9d2e35881b956319411 class=toggle>
<label for=section-86e828ca7e30e9d2e35881b956319411 class="flex justify-between"><a>SQL 查询</a>
<span>▾</span></label><ul><li><a href=/easysearch/main/docs/references/sql/sql-jdbc/>SQL-JDBC</a></li><li><a href=/easysearch/main/docs/references/sql/aggregations/>聚合查询</a></li><li><a href=/easysearch/main/docs/references/sql/fulltext/>全文搜索</a></li><li><a href=/easysearch/main/docs/references/sql/complex/>复杂查询</a></li><li><a href=/easysearch/main/docs/references/sql/basics/>基础查询</a></li></ul></li><li><input type=checkbox id=section-1c80046b8a7d2b6f02509e78096b1388 class=toggle>
<label for=section-1c80046b8a7d2b6f02509e78096b1388 class="flex justify-between"><a href=/easysearch/main/docs/references/security/>安全模块</a>
<span>▾</span></label><ul><li><input type=checkbox id=section-4c0acfad57ce0b1db83571ad903a192e class=toggle>
<label for=section-4c0acfad57ce0b1db83571ad903a192e class="flex justify-between"><a href=/easysearch/main/docs/references/security/configuration/>配置说明</a>
<span>▾</span></label><ul><li><a href=/easysearch/main/docs/references/security/configuration/yaml/>本地配置</a></li><li><a href=/easysearch/main/docs/references/security/configuration/backend/>后端配置</a></li><li><a href=/easysearch/main/docs/references/security/configuration/tls/>证书配置</a></li><li><a href=/easysearch/main/docs/references/security/configuration/system-indices/>系统索引</a></li></ul></li><li><input type=checkbox id=section-4854412a16ac224d9851d23b7bf6bdea class=toggle>
<label for=section-4854412a16ac224d9851d23b7bf6bdea class="flex justify-between"><a href=/easysearch/main/docs/references/security/access-control/>权限控制</a>
<span>▾</span></label><ul><li><a href=/easysearch/main/docs/references/security/access-control/users-roles/>用户角色</a></li><li><a href=/easysearch/main/docs/references/security/access-control/document-level-security/>文档权限</a></li><li><a href=/easysearch/main/docs/references/security/access-control/field-level-security/>字段权限</a></li><li><a href=/easysearch/main/docs/references/security/access-control/field-masking/>数据脱敏</a></li><li><a href=/easysearch/main/docs/references/security/access-control/run-as/>身份模拟</a></li><li><a href=/easysearch/main/docs/references/security/access-control/cross-cluster-search/>跨集群搜索</a></li><li><a href=/easysearch/main/docs/references/security/access-control/api/>API 接口</a></li><li><a href=/easysearch/main/docs/references/security/access-control/permissions/>权限列表</a></li></ul></li></ul></li><li><input type=checkbox id=section-52d7e2e9abce80d3dc7a6a56a0089b77 class=toggle>
<label for=section-52d7e2e9abce80d3dc7a6a56a0089b77 class="flex justify-between"><a>管理模块</a>
<span>▾</span></label><ul><li><a href=/easysearch/main/docs/references/management/cluster/>搭建集群</a></li><li><a href=/easysearch/main/docs/references/management/catapis/>CAT API</a></li><li><a href=/easysearch/main/docs/references/management/logs/>系统日志</a></li><li><a href=/easysearch/main/docs/references/management/index-templates/>索引模板</a></li><li><a href=/easysearch/main/docs/references/management/reindex-data/>重建数据</a></li><li><a href=/easysearch/main/docs/references/management/tasksapis/>任务管理</a></li><li><a href=/easysearch/main/docs/references/management/slm_api/>快照生命周期管理</a></li><li><a href=/easysearch/main/docs/references/management/ilm_api/>索引生命周期管理</a></li><li><a href=/easysearch/main/docs/references/management/ccr_api/>跨集群复制</a></li><li><a href=/easysearch/main/docs/references/management/snapshot-restore/>备份还原</a></li><li><a href=/easysearch/main/docs/references/management/throttling/>写入限流</a></li><li><a href=/easysearch/main/docs/references/management/searchable_snapshot/>可搜索快照</a></li><li><a href=/easysearch/main/docs/references/management/rollup_api/>数据汇总</a></li><li><a href=/easysearch/main/docs/references/management/popular-api/>其它常用 API</a></li></ul></li><li><input type=checkbox id=section-b34adbce31bce6650a0099282b315617 class=toggle>
<label for=section-b34adbce31bce6650a0099282b315617 class="flex justify-between"><a>客户端</a>
<span>▾</span></label><ul><li><a href=/easysearch/main/docs/references/client/java-client/>快速开始</a></li><li><a href=/easysearch/main/docs/references/client/client-api/>API 使用</a></li></ul></li></ul></li><li><input type=checkbox id=section-1adc738e7351809ea378ec7e9730bd1f class=toggle>
<label for=section-1adc738e7351809ea378ec7e9730bd1f class="flex justify-between"><a>版本历史</a>
<span>▾</span></label><ul><li><a href=/easysearch/main/docs/release-notes/client/>Easysearch-client</a></li><li><a href=/easysearch/main/docs/release-notes/easysearch/>Easysearch</a></li></ul></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/easysearch/main/svg/menu.svg class=book-icon alt=Menu></label>
<strong>全文查询</strong>
<label for=toc-control><img src=/easysearch/main/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#全文查询>全文查询</a><ul><li><a href=#匹配>匹配</a></li><li><a href=#多重匹配>多重匹配</a></li><li><a href=#匹配布尔前缀>匹配布尔前缀</a></li><li><a href=#匹配短语>匹配短语</a></li><li><a href=#匹配短语前缀>匹配短语前缀</a></li><li><a href=#通用条件>通用条件</a></li><li><a href=#查询字符串>查询字符串</a></li><li><a href=#简单查询字符串>简单查询字符串</a></li><li><a href=#全部匹配>全部匹配</a></li><li><a href=#不匹配>不匹配</a></li><li><a href=#查询选项>查询选项</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=全文查询>全文查询
<a class=anchor href=#%e5%85%a8%e6%96%87%e6%9f%a5%e8%af%a2>#</a></h1><p>尽管可以使用 HTTP 请求参数执行简单搜索，但 Easysearch 查询域特定语言（DSL）允许您指定全部搜索选项。查询 DSL 使用 HTTP 请求主体。以这种方式指定的查询还有一个额外的优点，即其意图更加明确，并且更易于随时间调整。</p><p>此页面列出了所有全文查询类型和常用选项。考虑到选项的数量和微妙的行为，确保有用搜索结果的最佳方法是根据代表性索引测试不同的查询并验证输出。</p><h2 id=匹配>匹配
<a class=anchor href=#%e5%8c%b9%e9%85%8d>#</a></h2><p>创建一个
<a href=https://lucene.apache.org/core/8_4_0/core/org/apache/lucene/search/BooleanQuery.html>布尔查询</a> ，如果字段中存在搜索项，则返回结果。</p><p>查询的最基本形式仅提供字段（ <code>title</code> ）和对应的值（ <code>wind</code> ）:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#960050;background-color:#1e0010>GET</span> <span style=color:#960050;background-color:#1e0010>_search</span>
{
  <span style=color:#f92672>&#34;query&#34;</span>: {
    <span style=color:#f92672>&#34;match&#34;</span>: {
      <span style=color:#f92672>&#34;title&#34;</span>: <span style=color:#e6db74>&#34;wind&#34;</span>
    }
  }
}
</code></pre></div><p>采用
<a href=https://curl.haxx.se/>curl</a>的方式:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>curl --insecure -XGET -u <span style=color:#e6db74>&#39;admin:admin&#39;</span> https://&lt;host&gt;:&lt;port&gt;/&lt;index&gt;/_search <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>  -H <span style=color:#e6db74>&#34;content-type: application/json&#34;</span> <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>  -d <span style=color:#e6db74>&#39;{
</span><span style=color:#e6db74>    &#34;query&#34;: {
</span><span style=color:#e6db74>      &#34;match&#34;: {
</span><span style=color:#e6db74>        &#34;title&#34;: &#34;wind&#34;
</span><span style=color:#e6db74>      }
</span><span style=color:#e6db74>    }
</span><span style=color:#e6db74>  }&#39;</span>
</code></pre></div><p>查询接受以下选项。有关每个参数的描述，请参见
<a href=/easysearch/main/docs/references/search/full-text/#%e6%9f%a5%e8%af%a2%e9%80%89%e9%a1%b9>查询选项</a></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#960050;background-color:#1e0010>GET</span> <span style=color:#960050;background-color:#1e0010>_search</span>
{
  <span style=color:#f92672>&#34;query&#34;</span>: {
    <span style=color:#f92672>&#34;match&#34;</span>: {
      <span style=color:#f92672>&#34;title&#34;</span>: {
        <span style=color:#f92672>&#34;query&#34;</span>: <span style=color:#e6db74>&#34;wind&#34;</span>,
        <span style=color:#f92672>&#34;fuzziness&#34;</span>: <span style=color:#e6db74>&#34;AUTO&#34;</span>,
        <span style=color:#f92672>&#34;fuzzy_transpositions&#34;</span>: <span style=color:#66d9ef>true</span>,
        <span style=color:#f92672>&#34;operator&#34;</span>:  <span style=color:#e6db74>&#34;or&#34;</span>,
        <span style=color:#f92672>&#34;minimum_should_match&#34;</span>: <span style=color:#ae81ff>1</span>,
        <span style=color:#f92672>&#34;analyzer&#34;</span>: <span style=color:#e6db74>&#34;standard&#34;</span>,
        <span style=color:#f92672>&#34;zero_terms_query&#34;</span>: <span style=color:#e6db74>&#34;none&#34;</span>,
        <span style=color:#f92672>&#34;lenient&#34;</span>: <span style=color:#66d9ef>false</span>,
        <span style=color:#f92672>&#34;cutoff_frequency&#34;</span>: <span style=color:#ae81ff>0.01</span>,
        <span style=color:#f92672>&#34;prefix_length&#34;</span>: <span style=color:#ae81ff>0</span>,
        <span style=color:#f92672>&#34;max_expansions&#34;</span>: <span style=color:#ae81ff>50</span>,
        <span style=color:#f92672>&#34;boost&#34;</span>: <span style=color:#ae81ff>1</span>
      }
    }
  }
}
</code></pre></div><h2 id=多重匹配>多重匹配
<a class=anchor href=#%e5%a4%9a%e9%87%8d%e5%8c%b9%e9%85%8d>#</a></h2><p>类似于
<a href=/easysearch/main/docs/references/search/full-text/#%e5%8c%b9%e9%85%8d>匹配</a>，但搜索多个字段.</p><p><code>^</code> 允许您 <code>增强</code> 某些字段。助推是一种乘数，它对一个领域中的匹配比其他领域的匹配更为重要。在下面的示例中，标题字段中 <code>wind</code> 的匹配对 <code>_score</code> 的影响是绘图字段中匹配的四倍。结果是，像 <em>The Wind Rises</em>和<em>Gone with the Wind</em> 这样的电影接近搜索结果的顶部，而像 <em>Twister</em> 和 <em>Sharknado</em> 这样的影片，大概在剧情摘要中都有 <code>wind</code> 。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#960050;background-color:#1e0010>GET</span> <span style=color:#960050;background-color:#1e0010>_search</span>
{
  <span style=color:#f92672>&#34;query&#34;</span>: {
    <span style=color:#f92672>&#34;multi_match&#34;</span>: {
      <span style=color:#f92672>&#34;query&#34;</span>: <span style=color:#e6db74>&#34;wind&#34;</span>,
      <span style=color:#f92672>&#34;fields&#34;</span>: [<span style=color:#e6db74>&#34;title^4&#34;</span>, <span style=color:#e6db74>&#34;plot&#34;</span>]
    }
  }
}
</code></pre></div><p>查询接受以下选项。有关每个参数的描述，请参见
<a href=/easysearch/main/docs/references/search/full-text/#%e6%9f%a5%e8%af%a2%e9%80%89%e9%a1%b9>查询选项</a></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#960050;background-color:#1e0010>GET</span> <span style=color:#960050;background-color:#1e0010>_search</span>
{
  <span style=color:#f92672>&#34;query&#34;</span>: {
    <span style=color:#f92672>&#34;multi_match&#34;</span>: {
      <span style=color:#f92672>&#34;query&#34;</span>: <span style=color:#e6db74>&#34;wind&#34;</span>,
      <span style=color:#f92672>&#34;fields&#34;</span>: [<span style=color:#e6db74>&#34;title^4&#34;</span>, <span style=color:#e6db74>&#34;description&#34;</span>],
      <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;most_fields&#34;</span>,
      <span style=color:#f92672>&#34;operator&#34;</span>: <span style=color:#e6db74>&#34;and&#34;</span>,
      <span style=color:#f92672>&#34;minimum_should_match&#34;</span>: <span style=color:#ae81ff>3</span>,
      <span style=color:#f92672>&#34;tie_breaker&#34;</span>: <span style=color:#ae81ff>0.0</span>,
      <span style=color:#f92672>&#34;analyzer&#34;</span>: <span style=color:#e6db74>&#34;standard&#34;</span>,
      <span style=color:#f92672>&#34;boost&#34;</span>: <span style=color:#ae81ff>1</span>,
      <span style=color:#f92672>&#34;fuzziness&#34;</span>: <span style=color:#e6db74>&#34;AUTO&#34;</span>,
      <span style=color:#f92672>&#34;fuzzy_transpositions&#34;</span>: <span style=color:#66d9ef>true</span>,
      <span style=color:#f92672>&#34;lenient&#34;</span>: <span style=color:#66d9ef>false</span>,
      <span style=color:#f92672>&#34;prefix_length&#34;</span>: <span style=color:#ae81ff>0</span>,
      <span style=color:#f92672>&#34;max_expansions&#34;</span>: <span style=color:#ae81ff>50</span>,
      <span style=color:#f92672>&#34;auto_generate_synonyms_phrase_query&#34;</span>: <span style=color:#66d9ef>true</span>,
      <span style=color:#f92672>&#34;cutoff_frequency&#34;</span>: <span style=color:#ae81ff>0.01</span>,
      <span style=color:#f92672>&#34;zero_terms_query&#34;</span>: <span style=color:#e6db74>&#34;none&#34;</span>
    }
  }
}
</code></pre></div><h2 id=匹配布尔前缀>匹配布尔前缀
<a class=anchor href=#%e5%8c%b9%e9%85%8d%e5%b8%83%e5%b0%94%e5%89%8d%e7%bc%80>#</a></h2><p>类似于
<a href=/easysearch/main/docs/references/search/full-text/#%e5%8c%b9%e9%85%8d>匹配</a>, 创建一个
<a href=https://lucene.apache.org/core/8_4_0/core/org/apache/lucene/search/PrefixQuery.html>前缀查询</a></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#960050;background-color:#1e0010>GET</span> <span style=color:#960050;background-color:#1e0010>_search</span>
{
  <span style=color:#f92672>&#34;query&#34;</span>: {
    <span style=color:#f92672>&#34;match_bool_prefix&#34;</span>: {
      <span style=color:#f92672>&#34;title&#34;</span>: <span style=color:#e6db74>&#34;rises wi&#34;</span>
    }
  }
}
</code></pre></div><p>查询接受以下选项。有关每个参数的描述，请参见
<a href=/easysearch/main/docs/references/search/full-text/#%e6%9f%a5%e8%af%a2%e9%80%89%e9%a1%b9>查询选项</a></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#960050;background-color:#1e0010>GET</span> <span style=color:#960050;background-color:#1e0010>_search</span>
{
  <span style=color:#f92672>&#34;query&#34;</span>: {
    <span style=color:#f92672>&#34;match_bool_prefix&#34;</span>: {
      <span style=color:#f92672>&#34;title&#34;</span>: {
        <span style=color:#f92672>&#34;query&#34;</span>: <span style=color:#e6db74>&#34;rises wi&#34;</span>,
        <span style=color:#f92672>&#34;fuzziness&#34;</span>: <span style=color:#e6db74>&#34;AUTO&#34;</span>,
        <span style=color:#f92672>&#34;fuzzy_transpositions&#34;</span>: <span style=color:#66d9ef>true</span>,
        <span style=color:#f92672>&#34;max_expansions&#34;</span>: <span style=color:#ae81ff>50</span>,
        <span style=color:#f92672>&#34;prefix_length&#34;</span>: <span style=color:#ae81ff>0</span>,
        <span style=color:#f92672>&#34;operator&#34;</span>:  <span style=color:#e6db74>&#34;or&#34;</span>,
        <span style=color:#f92672>&#34;minimum_should_match&#34;</span>: <span style=color:#ae81ff>2</span>,
        <span style=color:#f92672>&#34;analyzer&#34;</span>: <span style=color:#e6db74>&#34;standard&#34;</span>
      }
    }
  }
}
</code></pre></div><h2 id=匹配短语>匹配短语
<a class=anchor href=#%e5%8c%b9%e9%85%8d%e7%9f%ad%e8%af%ad>#</a></h2><p>创建一个
<a href=https://lucene.apache.org/core/8_4_0/core/org/apache/lucene/search/PhraseQuery.html>匹配短语</a></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#960050;background-color:#1e0010>GET</span> <span style=color:#960050;background-color:#1e0010>_search</span>
{
  <span style=color:#f92672>&#34;query&#34;</span>: {
    <span style=color:#f92672>&#34;match_phrase&#34;</span>: {
      <span style=color:#f92672>&#34;title&#34;</span>: <span style=color:#e6db74>&#34;the wind rises&#34;</span>
    }
  }
}
</code></pre></div><p>查询接受以下选项。有关每个参数的描述，请参见
<a href=/easysearch/main/docs/references/search/full-text/#%e6%9f%a5%e8%af%a2%e9%80%89%e9%a1%b9>查询选项</a></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#960050;background-color:#1e0010>GET</span> <span style=color:#960050;background-color:#1e0010>_search</span>
{
  <span style=color:#f92672>&#34;query&#34;</span>: {
    <span style=color:#f92672>&#34;match_phrase&#34;</span>: {
      <span style=color:#f92672>&#34;title&#34;</span>: {
        <span style=color:#f92672>&#34;query&#34;</span>: <span style=color:#e6db74>&#34;wind rises the&#34;</span>,
        <span style=color:#f92672>&#34;slop&#34;</span>: <span style=color:#ae81ff>3</span>,
        <span style=color:#f92672>&#34;analyzer&#34;</span>: <span style=color:#e6db74>&#34;standard&#34;</span>,
        <span style=color:#f92672>&#34;zero_terms_query&#34;</span>: <span style=color:#e6db74>&#34;none&#34;</span>
      }
    }
  }
}
</code></pre></div><h2 id=匹配短语前缀>匹配短语前缀
<a class=anchor href=#%e5%8c%b9%e9%85%8d%e7%9f%ad%e8%af%ad%e5%89%8d%e7%bc%80>#</a></h2><p>类似于
<a href=/easysearch/main/docs/references/search/full-text/#%e5%8c%b9%e9%85%8d%e7%9f%ad%e8%af%ad>匹配短语</a>, 创建一个
<a href=https://lucene.apache.org/core/8_4_0/core/org/apache/lucene/search/PrefixQuery.html>匹配短语前缀</a></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#960050;background-color:#1e0010>GET</span> <span style=color:#960050;background-color:#1e0010>_search</span>
{
  <span style=color:#f92672>&#34;query&#34;</span>: {
    <span style=color:#f92672>&#34;match_phrase_prefix&#34;</span>: {
      <span style=color:#f92672>&#34;title&#34;</span>: <span style=color:#e6db74>&#34;the wind ri&#34;</span>
    }
  }
}
</code></pre></div><p>查询接受以下选项。有关每个参数的描述，请参见
<a href=/easysearch/main/docs/references/search/full-text/#%e6%9f%a5%e8%af%a2%e9%80%89%e9%a1%b9>查询选项</a></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#960050;background-color:#1e0010>GET</span> <span style=color:#960050;background-color:#1e0010>_search</span>
{
  <span style=color:#f92672>&#34;query&#34;</span>: {
    <span style=color:#f92672>&#34;match_phrase_prefix&#34;</span>: {
      <span style=color:#f92672>&#34;title&#34;</span>: {
        <span style=color:#f92672>&#34;query&#34;</span>: <span style=color:#e6db74>&#34;the wind ri&#34;</span>,
        <span style=color:#f92672>&#34;analyzer&#34;</span>: <span style=color:#e6db74>&#34;standard&#34;</span>,
        <span style=color:#f92672>&#34;max_expansions&#34;</span>: <span style=color:#ae81ff>50</span>,
        <span style=color:#f92672>&#34;slop&#34;</span>: <span style=color:#ae81ff>3</span>
      }
    }
  }
}
</code></pre></div><h2 id=通用条件>通用条件
<a class=anchor href=#%e9%80%9a%e7%94%a8%e6%9d%a1%e4%bb%b6>#</a></h2><p>公共条件查询根据分片上出现的次数将查询字符串分成高频和低频条件。低频项在结果中的权重更大，高频项仅适用于已匹配一个或多个低频项的文档。从这个意义上说，您可以将这个查询看作是一个内置的、不断变化的停止词列表。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#960050;background-color:#1e0010>GET</span> <span style=color:#960050;background-color:#1e0010>_search</span>
{
  <span style=color:#f92672>&#34;query&#34;</span>: {
    <span style=color:#f92672>&#34;common&#34;</span>: {
      <span style=color:#f92672>&#34;title&#34;</span>: {
        <span style=color:#f92672>&#34;query&#34;</span>: <span style=color:#e6db74>&#34;the wind rises&#34;</span>
      }
    }
  }
}
</code></pre></div><p>查询接受以下选项。有关每个参数的描述，请参见
<a href=/easysearch/main/docs/references/search/full-text/#%e6%9f%a5%e8%af%a2%e9%80%89%e9%a1%b9>查询选项</a></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#960050;background-color:#1e0010>GET</span> <span style=color:#960050;background-color:#1e0010>_search</span>
{
  <span style=color:#f92672>&#34;query&#34;</span>: {
    <span style=color:#f92672>&#34;common&#34;</span>: {
      <span style=color:#f92672>&#34;title&#34;</span>: {
        <span style=color:#f92672>&#34;query&#34;</span>: <span style=color:#e6db74>&#34;the wind rises&#34;</span>,
        <span style=color:#f92672>&#34;cutoff_frequency&#34;</span>: <span style=color:#ae81ff>0.002</span>,
        <span style=color:#f92672>&#34;low_freq_operator&#34;</span>: <span style=color:#e6db74>&#34;or&#34;</span>,
        <span style=color:#f92672>&#34;boost&#34;</span>: <span style=color:#ae81ff>1</span>,
        <span style=color:#f92672>&#34;analyzer&#34;</span>: <span style=color:#e6db74>&#34;standard&#34;</span>,
        <span style=color:#f92672>&#34;minimum_should_match&#34;</span>: {
          <span style=color:#f92672>&#34;low_freq&#34;</span> : <span style=color:#ae81ff>2</span>,
          <span style=color:#f92672>&#34;high_freq&#34;</span> : <span style=color:#ae81ff>3</span>
        }
      }
    }
  }
}
</code></pre></div><h2 id=查询字符串>查询字符串
<a class=anchor href=#%e6%9f%a5%e8%af%a2%e5%ad%97%e7%ac%a6%e4%b8%b2>#</a></h2><p>查询字符串查询根据运算符拆分文本，并逐个分析.</p><blockquote><p>如果使用 HTTP 请求参数（即 <code>_search?q=wind</code> ）进行搜索，Easysearch 将创建一个查询字符串查询。</p></blockquote><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#960050;background-color:#1e0010>GET</span> <span style=color:#960050;background-color:#1e0010>_search</span>
{
  <span style=color:#f92672>&#34;query&#34;</span>: {
    <span style=color:#f92672>&#34;query_string&#34;</span>: {
      <span style=color:#f92672>&#34;query&#34;</span>: <span style=color:#e6db74>&#34;the wind AND (rises OR rising)&#34;</span>
    }
  }
}
</code></pre></div><p>查询接受以下选项。有关每个参数的描述，请参见
<a href=/easysearch/main/docs/references/search/full-text/#%e6%9f%a5%e8%af%a2%e9%80%89%e9%a1%b9>查询选项</a></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#960050;background-color:#1e0010>GET</span> <span style=color:#960050;background-color:#1e0010>_search</span>
{
  <span style=color:#f92672>&#34;query&#34;</span>: {
    <span style=color:#f92672>&#34;query_string&#34;</span>: {
      <span style=color:#f92672>&#34;query&#34;</span>: <span style=color:#e6db74>&#34;the wind AND (rises OR rising)&#34;</span>,
      <span style=color:#f92672>&#34;default_field&#34;</span>: <span style=color:#e6db74>&#34;title&#34;</span>,
      <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;best_fields&#34;</span>,
      <span style=color:#f92672>&#34;fuzziness&#34;</span>: <span style=color:#e6db74>&#34;AUTO&#34;</span>,
      <span style=color:#f92672>&#34;fuzzy_transpositions&#34;</span>: <span style=color:#66d9ef>true</span>,
      <span style=color:#f92672>&#34;fuzzy_max_expansions&#34;</span>: <span style=color:#ae81ff>50</span>,
      <span style=color:#f92672>&#34;fuzzy_prefix_length&#34;</span>: <span style=color:#ae81ff>0</span>,
      <span style=color:#f92672>&#34;minimum_should_match&#34;</span>: <span style=color:#ae81ff>1</span>,
      <span style=color:#f92672>&#34;default_operator&#34;</span>: <span style=color:#e6db74>&#34;or&#34;</span>,
      <span style=color:#f92672>&#34;analyzer&#34;</span>: <span style=color:#e6db74>&#34;standard&#34;</span>,
      <span style=color:#f92672>&#34;lenient&#34;</span>: <span style=color:#66d9ef>false</span>,
      <span style=color:#f92672>&#34;boost&#34;</span>: <span style=color:#ae81ff>1</span>,
      <span style=color:#f92672>&#34;allow_leading_wildcard&#34;</span>: <span style=color:#66d9ef>true</span>,
      <span style=color:#f92672>&#34;enable_position_increments&#34;</span>: <span style=color:#66d9ef>true</span>,
      <span style=color:#f92672>&#34;phrase_slop&#34;</span>: <span style=color:#ae81ff>3</span>,
      <span style=color:#f92672>&#34;max_determinized_states&#34;</span>: <span style=color:#ae81ff>10000</span>,
      <span style=color:#f92672>&#34;time_zone&#34;</span>: <span style=color:#e6db74>&#34;-08:00&#34;</span>,
      <span style=color:#f92672>&#34;quote_field_suffix&#34;</span>: <span style=color:#e6db74>&#34;&#34;</span>,
      <span style=color:#f92672>&#34;quote_analyzer&#34;</span>: <span style=color:#e6db74>&#34;standard&#34;</span>,
      <span style=color:#f92672>&#34;analyze_wildcard&#34;</span>: <span style=color:#66d9ef>false</span>,
      <span style=color:#f92672>&#34;auto_generate_synonyms_phrase_query&#34;</span>: <span style=color:#66d9ef>true</span>
    }
  }
}
</code></pre></div><h2 id=简单查询字符串>简单查询字符串
<a class=anchor href=#%e7%ae%80%e5%8d%95%e6%9f%a5%e8%af%a2%e5%ad%97%e7%ac%a6%e4%b8%b2>#</a></h2><p>简单的查询字符串查询类似于查询字符串查询，但它允许高级用户直接在查询字符串中指定许多参数。查询将丢弃查询字符串的任何无效部分。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#960050;background-color:#1e0010>GET</span> <span style=color:#960050;background-color:#1e0010>_search</span>
{
  <span style=color:#f92672>&#34;query&#34;</span>: {
    <span style=color:#f92672>&#34;simple_query_string&#34;</span>: {
      <span style=color:#f92672>&#34;query&#34;</span>: <span style=color:#e6db74>&#34;\&#34;rises wind the\&#34;~4 | *ising~2&#34;</span>,
      <span style=color:#f92672>&#34;fields&#34;</span>: [<span style=color:#e6db74>&#34;title&#34;</span>]
    }
  }
}
</code></pre></div><table><thead><tr><th style=text-align:left>特殊字符</th><th style=text-align:left>说明</th></tr></thead><tbody><tr><td style=text-align:left><code>+</code></td><td style=text-align:left>与 <code>and</code> 操作符一样</td></tr><tr><td style=text-align:left><code>\|</code></td><td style=text-align:left>与 <code>or</code> 操作符一样</td></tr><tr><td style=text-align:left><code>*</code></td><td style=text-align:left>通配符</td></tr><tr><td style=text-align:left><code>""</code></td><td style=text-align:left>将若干个字组成一个短语</td></tr><tr><td style=text-align:left><code>()</code></td><td style=text-align:left>将一组条件组合到一起</td></tr><tr><td style=text-align:left><code>~n</code></td><td style=text-align:left>用于单词后面 (e.g. <code>wnid~3</code> ), 设置模糊程度参数 <code>fuzziness</code> 。当用于词语后面，则设置 <code>slop</code> 参数。参见
<a href=/easysearch/main/docs/references/search/full-text/#%e6%9f%a5%e8%af%a2%e9%80%89%e9%a1%b9>查询选项</a>.</td></tr><tr><td style=text-align:left><code>-</code></td><td style=text-align:left>Negates the term.</td></tr></tbody></table><p>查询接受以下选项。有关每个参数的描述，请参见
<a href=/easysearch/main/docs/references/search/full-text/#%e6%9f%a5%e8%af%a2%e9%80%89%e9%a1%b9>查询选项</a></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#960050;background-color:#1e0010>GET</span> <span style=color:#960050;background-color:#1e0010>_search</span>
{
  <span style=color:#f92672>&#34;query&#34;</span>: {
    <span style=color:#f92672>&#34;simple_query_string&#34;</span>: {
      <span style=color:#f92672>&#34;query&#34;</span>: <span style=color:#e6db74>&#34;\&#34;rises wind the\&#34;~4 | *ising~2&#34;</span>,
      <span style=color:#f92672>&#34;fields&#34;</span>: [<span style=color:#e6db74>&#34;title&#34;</span>],
      <span style=color:#f92672>&#34;flags&#34;</span>: <span style=color:#e6db74>&#34;ALL&#34;</span>,
      <span style=color:#f92672>&#34;fuzzy_transpositions&#34;</span>: <span style=color:#66d9ef>true</span>,
      <span style=color:#f92672>&#34;fuzzy_max_expansions&#34;</span>: <span style=color:#ae81ff>50</span>,
      <span style=color:#f92672>&#34;fuzzy_prefix_length&#34;</span>: <span style=color:#ae81ff>0</span>,
      <span style=color:#f92672>&#34;minimum_should_match&#34;</span>: <span style=color:#ae81ff>1</span>,
      <span style=color:#f92672>&#34;default_operator&#34;</span>: <span style=color:#e6db74>&#34;or&#34;</span>,
      <span style=color:#f92672>&#34;analyzer&#34;</span>: <span style=color:#e6db74>&#34;standard&#34;</span>,
      <span style=color:#f92672>&#34;lenient&#34;</span>: <span style=color:#66d9ef>false</span>,
      <span style=color:#f92672>&#34;quote_field_suffix&#34;</span>: <span style=color:#e6db74>&#34;&#34;</span>,
      <span style=color:#f92672>&#34;analyze_wildcard&#34;</span>: <span style=color:#66d9ef>false</span>,
      <span style=color:#f92672>&#34;auto_generate_synonyms_phrase_query&#34;</span>: <span style=color:#66d9ef>true</span>
    }
  }
}
</code></pre></div><h2 id=全部匹配>全部匹配
<a class=anchor href=#%e5%85%a8%e9%83%a8%e5%8c%b9%e9%85%8d>#</a></h2><p>匹配所有文档。可用于测试。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#960050;background-color:#1e0010>GET</span> <span style=color:#960050;background-color:#1e0010>_search</span>
{
  <span style=color:#f92672>&#34;query&#34;</span>: {
    <span style=color:#f92672>&#34;match_all&#34;</span>: {}
  }
}
</code></pre></div><h2 id=不匹配>不匹配
<a class=anchor href=#%e4%b8%8d%e5%8c%b9%e9%85%8d>#</a></h2><p>不匹配任何文档。很少有人用。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#960050;background-color:#1e0010>GET</span> <span style=color:#960050;background-color:#1e0010>_search</span>
{
  <span style=color:#f92672>&#34;query&#34;</span>: {
    <span style=color:#f92672>&#34;match_none&#34;</span>: {}
  }
}
</code></pre></div><h2 id=查询选项>查询选项
<a class=anchor href=#%e6%9f%a5%e8%af%a2%e9%80%89%e9%a1%b9>#</a></h2><table><thead><tr><th style=text-align:left>选项</th><th style=text-align:left>类型</th><th style=text-align:left>说明</th></tr></thead><tbody><tr><td style=text-align:left><code>allow_leading_wildcard</code></td><td style=text-align:left>布尔值</td><td style=text-align:left><code>*</code> 和 <code>？</code> 是否允许作为搜索项的第一个字符。默认值为 true</td></tr><tr><td style=text-align:left><code>analyze_wildcard</code></td><td style=text-align:left>Boolean</td><td style=text-align:left>Easysearch 是否应尝试分析通配符。一些分析器在这项任务上做得很差，因此默认值为 false</td></tr><tr><td style=text-align:left><code>analyzer</code></td><td style=text-align:left><code>standard, simple, whitespace, stop, keyword, pattern, &lt;language>, fingerprint</code></td><td style=text-align:left>要用于查询的分析器。不同的分析器具有不同的字符过滤器、标记化器和标记过滤器。例如， <code>stop</code> 分析器从查询字符串中删除停止词（例如 <code>an</code> 、 <code>but</code> 、 <code>this</code> ）。</td></tr><tr><td style=text-align:left><code>auto_generate_synonyms_phrase_query</code></td><td style=text-align:left>Boolean</td><td style=text-align:left>值 true（默认值）自动生成
<a href=https://lucene.apache.org/core/8_4_0/core/org/apache/lucene/search/PhraseQuery.html>短语查询</a>多术语同义词。例如，如果您有同义词 <code>ba, batting average</code> 并搜索 <code>ba</code> ，Easysearch 将搜索 <code>ba OR batting average</code>（如果此选项为 true ）或 <code>ba OR（batting 与 average）</code>（如果该选项为 false）。</td></tr><tr><td style=text-align:left><code>boost</code></td><td style=text-align:left>Floating-point</td><td style=text-align:left>按给定乘数增加子句。用于权衡复合查询中的子句。默认值为 1.0。</td></tr><tr><td style=text-align:left><code>cutoff_frequency</code></td><td style=text-align:left>Between <code>0.0</code> and <code>1.0</code> or a positive integer</td><td style=text-align:left>该值允许您根据索引中出现的次数定义高频和低频项。介于 0 和 1 之间的数字被视为百分比。例如，0.10 为 10%。这个值意味着，如果一个单词出现在碎片上超过 10%的文档中的搜索字段中，Easysearch 会考虑单词 <code>高频</code> ，并在计算搜索分数时不再强调它因为此设置是<strong>每个碎片</strong>，所以测试它对搜索结果的影响可能很困难，除非集群有很多文档。</td></tr><tr><td style=text-align:left><code>enable_position_increments</code></td><td style=text-align:left>Boolean</td><td style=text-align:left>如果为 true，结果查询将知道位置增量。当删除停止词在术语之间留下不需要的 <code>间隙</code> 时，此设置非常有用。默认值为 true。</td></tr><tr><td style=text-align:left><code>fields</code></td><td style=text-align:left>String array</td><td style=text-align:left>要搜索的字段列表（例如 <code>"fields": ["title^4", "description"]</code>）。如果未指定，则默认为 <code>index.query.default_field</code> 设置，默认为 <code>[ "*" ]</code>。</td></tr><tr><td style=text-align:left><code>flags</code></td><td style=text-align:left>String</td><td style=text-align:left>要启用的以 <code>\|</code> 分隔的[标志]字符串（
<a href=/easysearch/main/docs/references/search/full-text/#%e7%ae%80%e5%8d%95%e6%9f%a5%e8%af%a2%e5%ad%97%e7%ac%a6%e4%b8%b2>简单查询字符串</a>）（例如 <code>AND \| OR \| NOT</code> ），默认值为 <code>ALL</code> 。</td></tr><tr><td style=text-align:left><code>fuzziness</code></td><td style=text-align:left><code>AUTO</code> , <code>0</code> , or a positive integer</td><td style=text-align:left>在确定术语是否与值匹配时，将一个单词更改为另一个单词所需的字符编辑（插入、删除、替换）次数。例如， <code>wined</code> 和 <code>wind</code> 之间的距离为 1。默认值 <code>AUTO</code> 基于每个术语的长度选择一个值，对于大多数用例来说是一个很好的选择。</td></tr><tr><td style=text-align:left><code>fuzzy_transpositions</code></td><td style=text-align:left>Boolean</td><td style=text-align:left>将 <code>fuzzy_transposions</code> 设置为 true（默认值）会将相邻字符的交换添加到 <code>fuzzy</code> 选项的插入、删除和替换操作中。例如，如果 <code>fuzzy_transpositions</code> 为真（交换 <code>n</code> 和 <code>i</code> ），则 <code>wind</code> 和 <code>wnid</code> 之间的距离为 1；如果为假（删除 <code>n</code> ，插入 <code>n</code> ），那么 <code>wind</code> 和 <code>wnid</code> 之间距离为 2。如果 <code>fuzzy_transpositions</code> 为假，则 <code>rewind</code> 和 <code>wnid</code> 与 <code>wind</code> 的距离相同（2），尽管更以人为中心的观点认为 <code>wnid</code> 是一个明显的拼写错误。对于大多数用例来说，默认值是一个不错的选择。</td></tr><tr><td style=text-align:left><code>lenient</code></td><td style=text-align:left>Boolean</td><td style=text-align:left>将 <code>lenient</code> 设置为 true 可以忽略查询和文档字段之间的数据类型不匹配。例如，查询字符串 <code>8.2</code> 可以匹配 <code>float</code> 类型的字段。默认值为 false。</td></tr><tr><td style=text-align:left><code>low_freq_operator</code></td><td style=text-align:left><code>and, or</code></td><td style=text-align:left>低频项的运算符。默认值为 <code>或</code> 。请参阅此表中的
<a href=/easysearch/main/docs/references/search/full-text/#%e9%80%9a%e7%94%a8%e6%9d%a1%e4%bb%b6>通用条件</a>查询和 <code>operator</code> 。</td></tr><tr><td style=text-align:left><code>max_determinized_states</code></td><td style=text-align:left>Positive integer</td><td style=text-align:left>Lucene 可以为包含正则表达式的查询字符串（例如 <code>"query" ："/wind.+？/"</code> ）创建的 “
<a href=https://lucene.apache.org/core/8_4_0/core/org/apache/lucene/util/automaton/Operations.html#DEFAULT_MAX_DETERMINIZED_STATES>states</a>”（复杂性度量）的最大数量。较大的数字允许使用更多内存的查询。默认值为 10000。</td></tr><tr><td style=text-align:left><code>max_expansions</code></td><td style=text-align:left>Positive integer</td><td style=text-align:left>模糊查询 <code>expand</code> 在 <code>fuzziness</code> 中指定的距离内的许多匹配项。然后 Easysearch 试图将这些条款与其指数相匹配 <code>max_expansions</code> 指定模糊查询扩展到的最大项数。默认值为 50。</td></tr><tr><td style=text-align:left><code>minimum_should_match</code></td><td style=text-align:left>正或负整数、正或负百分比、组合</td><td style=text-align:left>如果查询字符串包含多个搜索项，并且您使用了 <code>或</code> 运算符，则需要匹配的项数将被视为匹配项。例如，如果 <code>minimum_should_match</code> 为 2，则 <code>wind often rising</code> 与 <code>The Wind Rises</code> 不匹配。如果 <code>minium_sshould_match</code> 为 1，则匹配。此选项还具有
<a href=/easysearch/main/docs/references/search/full-text/#%e9%80%9a%e7%94%a8%e6%9d%a1%e4%bb%b6>通用条件</a>查询的 <code>low_freq</code> 和 <code>high_freq</code>。</td></tr><tr><td style=text-align:left><code>operator</code></td><td style=text-align:left><code>or, and</code></td><td style=text-align:left>如果查询字符串包含多个搜索项，则是否所有项都需要匹配（ <code>and</code> ），或者只有一个项需要匹配（ <code>or</code> ），才能将文档视为匹配项。</td></tr><tr><td style=text-align:left><code>phrase_slop</code></td><td style=text-align:left><code>0</code> (default) or a positive integer</td><td style=text-align:left>See <code>slop</code> .</td></tr><tr><td style=text-align:left><code>prefix_length</code></td><td style=text-align:left><code>0</code> (default) or a positive integer</td><td style=text-align:left>在模糊性中可以不考虑的主要字符数量。</td></tr><tr><td style=text-align:left><code>quote_field_suffix</code></td><td style=text-align:left>String</td><td style=text-align:left>此选项允许您根据术语是否用引号括起来来搜索不同的字段。例如，如果 <code>quote_field_suffix</code> 是 <code>.exact</code> ，并且在 <code>title</code> 字段中搜索 <code>light</code> （用引号括起来），则 Easysearch 将搜索 <code>title.exact</code> 字段。第二个字段可能使用不同的类型（例如 <code>关键字</code> 而不是 <code>文本</code> ）或不同的分析器。默认值为空。</td></tr><tr><td style=text-align:left><code>rewrite</code></td><td style=text-align:left><code>constant_score, scoring_boolean, constant_score_boolean, top_terms_N, top_terms_boost_N, top_terms_blended_freqs_N</code></td><td style=text-align:left>确定 Easysearch 如何重写和评分多术语查询。默认值为 <code>constant_score</code> 。</td></tr><tr><td style=text-align:left><code>slop</code></td><td style=text-align:left><code>0</code> (default) or a positive integer</td><td style=text-align:left>控制查询中的单词可能被错误排序并且仍然被视为匹配的程度。来自
<a href=https://lucene.apache.org/core/8_4_0/core/org/apache/lucene/search/PhraseQuery.html#getSlop-->Lucene 文档</a>： 查询短语中单词之间允许的其他单词的数量。例如，要切换两个单词的顺序，需要两次移动（第一次移动将单词放在另一个单词的顶部），因此为了允许短语的重新排序，slop 必须至少为两个。值为零需要完全匹配。</td></tr><tr><td style=text-align:left><code>tie_breaker</code></td><td style=text-align:left><code>0.0</code> (default) to <code>1.0</code></td><td style=text-align:left>改变 Easysearch 评分搜索的方式。例如， <code>类型</code> 的 <code>best_fields</code> 通常使用任何一个字段的最高分数。如果指定介于 0.0 和 1.0 之间的 <code>tie_breaker</code> 值，则所有其他匹配字段的得分将更改为最高得分 + <code>tie_bbreaker</code> * 得分。如果指定值为 1.0，Easysearch 会将所有匹配字段的分数相加（有效地挫败了 <code>best_fields</code> 的目的）。</td></tr><tr><td style=text-align:left><code>time_zone</code></td><td style=text-align:left>UTC offset</td><td style=text-align:left>如果查询字符串包含日期范围（例如 <code>"query" ： "wind rises release_date[2012-01-01 to 2014-01-01]"</code> ），则使用的时区（例如 <code>-08:00</code> ）。默认值为 <code>UTC</code> 。</td></tr><tr><td style=text-align:left><code>type</code></td><td style=text-align:left><code>best_fields, most_fields, cross-fields, phrase, phrase_prefix</code></td><td style=text-align:left>确定 Easysearch 如何执行查询并对结果进行评分。默认值为 <code>best_fields</code> 。</td></tr><tr><td style=text-align:left><code>zero_terms_query</code></td><td style=text-align:left><code>none, all</code></td><td style=text-align:left>如果分析器从查询字符串中删除所有术语，则是不匹配任何文档（默认）还是匹配所有文档。例如， <code>stop</code> 分析器从字符串 <code>an but this</code> 中删除所有项</td></tr></tbody></table></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/infinilabs/loadgen/edit/master/docs/content.zh/docs/references/search/full-text.md target=_blank rel=noopener><img src=/easysearch/main/svg/edit.svg class=book-icon alt=Edit>
<span>编辑本页</span></a></div><div class="flex align-center footer">©INFINI.LTD, All Rights Reserved.</div><script>(function(h,o,t,j,a,r){h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};h._hjSettings={hjid:2567416,hjsv:6};a=o.getElementsByTagName('head')[0];r=o.createElement('script');r.async=1;r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;a.appendChild(r);})(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-RJPTVP614C"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','G-RJPTVP614C');</script><script type=text/javascript>var _smartsupp=_smartsupp||{};_smartsupp.key='691ff544d18a237005a011a7290b839d8fe811a4';window.smartsupp||(function(d){var s,c,o=smartsupp=function(){o._.push(arguments)};o._=[];s=d.getElementsByTagName('script')[0];c=d.createElement('script');c.type='text/javascript';c.charset='utf-8';c.async=true;c.src='https://www.smartsuppchat.com/loader.js?';s.parentNode.insertBefore(c,s);})(document);</script></div></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents><ul><li><a href=#全文查询>全文查询</a><ul><li><a href=#匹配>匹配</a></li><li><a href=#多重匹配>多重匹配</a></li><li><a href=#匹配布尔前缀>匹配布尔前缀</a></li><li><a href=#匹配短语>匹配短语</a></li><li><a href=#匹配短语前缀>匹配短语前缀</a></li><li><a href=#通用条件>通用条件</a></li><li><a href=#查询字符串>查询字符串</a></li><li><a href=#简单查询字符串>简单查询字符串</a></li><li><a href=#全部匹配>全部匹配</a></li><li><a href=#不匹配>不匹配</a></li><li><a href=#查询选项>查询选项</a></li></ul></li></ul></nav></aside></main><script src=/easysearch/main/js/asciinema-player.js></script></body></html>