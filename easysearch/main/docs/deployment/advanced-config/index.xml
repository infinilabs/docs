<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>高阶配置与调优 on INFINI Easysearch (main)</title><link>/easysearch/main/docs/deployment/advanced-config/</link><description>Recent content in 高阶配置与调优 on INFINI Easysearch (main)</description><generator>Hugo -- gohugo.io</generator><atom:link href="/easysearch/main/docs/deployment/advanced-config/index.xml" rel="self" type="application/rss+xml"/><item><title>NUMA 配置</title><link>/easysearch/main/docs/deployment/advanced-config/numa/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/easysearch/main/docs/deployment/advanced-config/numa/</guid><description>NUMA 配置指南 # 在多路服务器（2 路及以上 CPU）上部署 Easysearch 时，NUMA（Non-Uniform Memory Access）拓扑会显著影响性能。不当的配置可能导致跨节点内存访问，增加延迟 30%–50%。
NUMA 基础概念 # ┌──────────────┐ ┌──────────────┐ │ NUMA Node 0│ │ NUMA Node 1│ │ CPU 0-15 │ │ CPU 16-31 │ │ 本地内存 128G│◄──►│ 本地内存 128G│ │ 延迟 ~80ns │ QPI│ 延迟 ~80ns │ └──────────────┘ └──────────────┘ 本地访问快 跨节点访问慢 (~130ns) 每个 CPU 有自己的本地内存，访问本地内存最快 访问远端 NUMA 节点的内存需要通过互联总线（QPI/UPI），延迟更高 JVM 大堆 + 跨 NUMA 节点 = GC 停顿时间增加 查看 NUMA 拓扑 # # 查看 NUMA 节点信息 numactl --hardware # 输出示例 available: 2 nodes (0-1) node 0 cpus: 0 1 2 3 4 5 6 7 16 17 18 19 20 21 22 23 node 0 size: 131072 MB node 1 cpus: 8 9 10 11 12 13 14 15 24 25 26 27 28 29 30 31 node 1 size: 131072 MB node distances: node 0 1 0: 10 21 1: 21 10 # 查看当前内存分配策略 numactl --show 推荐配置方案 # 方案一：绑定单个 NUMA 节点（推荐） # 将 Easysearch 进程绑定到一个 NUMA 节点，确保所有内存访问都在本地：</description></item><item><title>NVMe 配置</title><link>/easysearch/main/docs/deployment/advanced-config/nvme/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/easysearch/main/docs/deployment/advanced-config/nvme/</guid><description>NVMe 配置指南 # NVMe SSD 提供极高的 IOPS 和带宽，是 Easysearch 生产环境的首选存储。
为什么选择 NVMe # 指标 SATA SSD NVMe SSD 随机读 IOPS ~90K ~500K+ 随机写 IOPS ~50K ~200K+ 顺序读带宽 ~550 MB/s ~3,500 MB/s 延迟 ~100us ~20us Easysearch 的段合并、translog 写入、倒排索引读取都受益于低延迟和高 IOPS。
磁盘格式化与挂载 # # 查看 NVMe 设备 lsblk | grep nvme # 格式化（推荐 xfs 或 ext4） mkfs.</description></item><item><title>RAID 配置</title><link>/easysearch/main/docs/deployment/advanced-config/raid/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/easysearch/main/docs/deployment/advanced-config/raid/</guid><description>RAID 配置指南 # 本文讨论 Easysearch 环境中 RAID 的选型与配置建议。
RAID 与 Easysearch 的关系 # Easysearch 自身通过副本机制实现数据冗余。因此 RAID 在 Easysearch 场景中的定位与传统数据库不同：
方案 数据冗余 性能 适用场景 无 RAID + 副本 由 ES 副本保障 最高 推荐方案 RAID-0 无 高 多 SATA 盘聚合（有副本前提下） RAID-1 镜像 中 单节点无副本（不推荐） RAID-5/6 校验 较低 不推荐（写放大严重） RAID-10 镜像+条带 中高 预算充足且需要本地冗余 核心建议：优先使用 Easysearch 副本，而非 RAID 来保障数据安全。</description></item><item><title>磁盘加密</title><link>/easysearch/main/docs/deployment/advanced-config/disk-encryption/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/easysearch/main/docs/deployment/advanced-config/disk-encryption/</guid><description>磁盘加密配置指南 # 在合规要求较高的场景（金融、政务、医疗），可能需要对 Easysearch 数据所在磁盘进行静态加密（Encryption at Rest）。
加密方案对比 # 方案 透明性 性能影响 适用场景 LUKS (dm-crypt) 完全透明 5~15% Linux 原生，推荐 eCryptfs 文件级 15~30% 不推荐（性能差） 硬件自加密 (SED) 完全透明 ~0% 硬件支持时首选 云盘加密 完全透明 ~0% 云环境推荐 LUKS 全盘加密（Linux） # 配置步骤 # # 1. 安装 cryptsetup yum install -y cryptsetup # CentOS/RHEL apt install -y cryptsetup # Ubuntu/Debian # 2.</description></item><item><title>TLS 安全配置</title><link>/easysearch/main/docs/deployment/advanced-config/tls-secure/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/easysearch/main/docs/deployment/advanced-config/tls-secure/</guid><description>TLS 安全配置指南 # Easysearch 默认启用安全功能，包括 TLS 加密。本文介绍如何配置和管理 TLS 证书，以保障集群通信安全。
TLS 的两层保护 # 层级 配置项 保护范围 HTTP 层 security.ssl.http.* 客户端 ↔ Easysearch REST API Transport 层 security.ssl.transport.* Easysearch 节点 ↔ 节点 生产环境两层都必须启用。
使用自签名证书（快速启动） # bin/initialize.sh -s 会自动生成自签名证书，适合测试和快速验证：
bin/initialize.sh -s # 生成的证书位于 config/ 目录 使用企业 CA 证书（生产推荐） # 1. 准备证书文件 # 需要以下文件：
文件 说明 ca.</description></item><item><title>国密配置</title><link>/easysearch/main/docs/deployment/advanced-config/guomi/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/easysearch/main/docs/deployment/advanced-config/guomi/</guid><description>国密 / TLCP 配置指南 # 在政务、金融等信创场景中，要求使用国密（SM）系列算法进行 TLS 加密。Easysearch 基于 铜锁（Tongsuo） 提供国密 TLCP 双证书能力，支持 SM2/SM3/SM4 加密套件。
国密算法简介 # 算法 类型 对应国际算法 用途 SM2 非对称加密 ECDSA / RSA 数字签名、密钥交换 SM3 哈希 SHA-256 完整性校验 SM4 对称加密 AES 数据加密 国密 TLS 使用 SM2 证书 + SM4 加密 + SM3 哈希，组成完整的加密通信套件。
前置条件 # 条件 说明 平台 当前仅集成 tongsuo-openjdk:1.</description></item><item><title>集群协调调优</title><link>/easysearch/main/docs/deployment/advanced-config/cluster-coordination/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/easysearch/main/docs/deployment/advanced-config/cluster-coordination/</guid><description>集群协调调优 # 本文介绍 Easysearch 集群协调层的高级调优参数，包括选举、故障检测和集群状态发布。这些参数通常不需要修改，仅在大规模集群或网络条件不佳时才需要调整。
前提：请先阅读 集群发现 了解基础配置。
选举调优 # 选举机制控制集群在主节点失联后如何选出新的主节点。
cluster.election.initial_timeout # 项目 说明 参数 cluster.election.initial_timeout 默认值 100ms 属性 静态 说明 节点首次发起选举前的随机等待上界。初始超时引入随机性，避免多个节点同时发起选举导致票数分裂 cluster.election.back_off_time # 项目 说明 参数 cluster.election.back_off_time 默认值 100ms 属性 静态 说明 每次选举失败后增加的退避时间上界。防止选举风暴 cluster.</description></item><item><title>Ingest Pipeline 配置</title><link>/easysearch/main/docs/deployment/advanced-config/ingest-pipeline-config/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/easysearch/main/docs/deployment/advanced-config/ingest-pipeline-config/</guid><description>Ingest Pipeline 配置指南 # Ingest Pipeline 允许在文档索引之前进行预处理（如字段提取、数据转换、富化等）。本文介绍 Ingest 节点的配置和 Pipeline 的高级使用技巧。
启用 Ingest 功能 # 默认情况下所有节点都具备 Ingest 功能。如需将 Ingest 角色分配给专用节点，请参考 集群节点配置 中的节点角色说明。
Pipeline 管理 # 创建 Pipeline # PUT /_ingest/pipeline/my-pipeline { &amp;#34;description&amp;#34;: &amp;#34;日志预处理流水线&amp;#34;, &amp;#34;processors&amp;#34;: [ { &amp;#34;grok&amp;#34;: { &amp;#34;field&amp;#34;: &amp;#34;message&amp;#34;, &amp;#34;patterns&amp;#34;: [&amp;#34;%{COMBINEDAPACHELOG}&amp;#34;] } }, { &amp;#34;date&amp;#34;: { &amp;#34;field&amp;#34;: &amp;#34;timestamp&amp;#34;, &amp;#34;formats&amp;#34;: [&amp;#34;dd/MMM/yyyy:HH:mm:ss Z&amp;#34;] } }, { &amp;#34;remove&amp;#34;: { &amp;#34;field&amp;#34;: &amp;#34;message&amp;#34; } } ] } 查看 Pipeline # # 查看所有 GET /_ingest/pipeline # 查看指定 GET /_ingest/pipeline/my-pipeline # 查看 Pipeline 统计 GET /_nodes/stats/ingest 删除 Pipeline # DELETE /_ingest/pipeline/my-pipeline 模拟测试 # 在正式使用前模拟验证 Pipeline 处理效果：</description></item><item><title>索引排序</title><link>/easysearch/main/docs/deployment/advanced-config/index-sorting/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/easysearch/main/docs/deployment/advanced-config/index-sorting/</guid><description>索引排序配置指南 # 索引排序（Index Sorting）允许在索引阶段对文档按指定字段排序存储。这可以显著加速按排序字段的查询和聚合操作，但会增加索引写入开销。
工作原理 # 默认情况下，Lucene 按文档写入顺序存储。启用索引排序后，每个段（Segment）内的文档将按排序字段有序存储：
默认存储： doc1 → doc2 → doc3 → doc4 → doc5 索引排序后： doc3 → doc1 → doc5 → doc2 → doc4 (按 timestamp 降序) 优势：
按排序字段查询时可提前终止（Early Termination），大幅减少扫描量 提高按排序字段做聚合的效率 改善压缩率（相邻文档字段值更接近） 代价：
索引写入速度降低 ~40%–50%（段合并时需要排序） 索引大小可能增加 排序字段只能在索引创建时指定，无法修改 配置参数 # index.sort.field # 项目 说明 参数 index.sort.field 默认值 无（不排序） 属性 静态（仅在索引创建时设置） 说明 排序字段列表。支持多字段排序。字段类型必须是 boolean、numeric、date 或 keyword index.</description></item><item><title>高级配置参数</title><link>/easysearch/main/docs/deployment/advanced-config/advanced-settings/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/easysearch/main/docs/deployment/advanced-config/advanced-settings/</guid><description>高级配置参数 # 本页面详细列举 Easysearch 的所有高级配置参数，包括集群、节点、索引等多层级配置。
概述 # Easysearch 配置涉及多个层级：
节点级：影响单个节点的行为（node., path., 等） 集群级：影响整个集群的行为（cluster., discovery., 等） 索引级：影响单个索引的行为（index.*, 等） 传输层：网络通信相关（transport., http., 等） 集群协调配置 # 集群选举、节点发现和主节点选择的相关配置。
选举配置 # 参数 默认值 动态 说明 cluster.election.initial_timeout 100ms ✗ 初始选举超时 cluster.election.back_off_time 100ms ✗ 选举退避时间 cluster.election.max_timeout 10s ✗ 最大选举超时 cluster.election.duration 30s ✗ 选举持续时间 主节点检查配置 # 参数 默认值 动态 说明 cluster.</description></item></channel></rss>