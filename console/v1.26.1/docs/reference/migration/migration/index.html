<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.79.1"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Data Migration #  Create Migration Task #  Click on the Data Tools option in the left menu of the INFINI Console, then click the New button to create a migration task, as shown in the following image:
Configure Migration Clusters #  Select the cluster es-v5616 from the source cluster list and es-v710 from the destination cluster list.
Configure Migration Indices #  Click the Select Migration Indices button, as shown in the image below:"><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="Data Migration"><meta property="og:description" content="Data Migration #  Create Migration Task #  Click on the Data Tools option in the left menu of the INFINI Console, then click the New button to create a migration task, as shown in the following image:
Configure Migration Clusters #  Select the cluster es-v5616 from the source cluster list and es-v710 from the destination cluster list.
Configure Migration Indices #  Click the Select Migration Indices button, as shown in the image below:"><meta property="og:type" content="article"><meta property="og:url" content="/console/v1.26.1/docs/reference/migration/migration/"><title>Data Migration | INFINI Console</title><link rel=manifest href=/console/v1.26.1/manifest.json><link rel=icon href=/console/v1.26.1/favicon.png type=image/x-icon><link rel=stylesheet href=/console/v1.26.1/book.min.b92cd6e9ba162b80e3bd9182198c09f19253fb9cd8348610af7595cd33d05445.css integrity="sha256-uSzW6boWK4DjvZGCGYwJ8ZJT+5zYNIYQr3WVzTPQVEU="><link rel=stylesheet type=text/css href=/console/v1.26.1/css/asciinema-player.css><script defer src=/console/v1.26.1/js/jquery-2.x.min.js></script><script defer src=/console/v1.26.1/js/doc.js></script></head><body><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=/console/v1.26.1><img src=/console/v1.26.1/img/logo-en.svg alt=Logo></a></h2><div class=heading><select class=version-selector>
<option value>main (latest)</option>
<option value=v1.26.1>v1.26.x</option></select></div><ul><li><input type=checkbox id=section-f1b7c1b2e5dd43526e77637c475d35b8 class=toggle>
<label for=section-f1b7c1b2e5dd43526e77637c475d35b8 class="flex justify-between"><a>Getting Started</a>
<span>▾</span></label><ul><li><a href=/console/v1.26.1/docs/getting-started/install/>Installation</a></li><li><a href=/console/v1.26.1/docs/getting-started/docker/>Docker</a></li><li><a href=/console/v1.26.1/docs/getting-started/helm/>Kubernetes</a></li></ul></li><li><input type=checkbox id=section-084ba1dbb512652712ad881ff8045610 class=toggle checked>
<label for=section-084ba1dbb512652712ad881ff8045610 class="flex justify-between"><a>References</a>
<span>▾</span></label><ul><li><a href=/console/v1.26.1/docs/reference/setup/>Setup wizard</a><ul></ul></li><li><a href=/console/v1.26.1/docs/reference/overview/>Overview</a><ul></ul></li><li><input type=checkbox id=section-dc19493497a0afff7833e4e9dc3568aa class=toggle>
<label for=section-dc19493497a0afff7833e4e9dc3568aa class="flex justify-between"><a>Platform</a>
<span>▾</span></label><ul><li><a href=/console/v1.26.1/docs/reference/platform/overview/>Platform Overview</a></li><li><a href=/console/v1.26.1/docs/reference/platform/monitoring/>Cluster Monitoring</a></li><li><a href=/console/v1.26.1/docs/reference/platform/activities/>Cluster Activities</a></li></ul></li><li><input type=checkbox id=section-77e7dc04d6c2293e5fe55f48c5b1a96d class=toggle>
<label for=section-77e7dc04d6c2293e5fe55f48c5b1a96d class="flex justify-between"><a href=/console/v1.26.1/docs/reference/data/>Data Management</a>
<span>▾</span></label><ul><li><a href=/console/v1.26.1/docs/reference/data/indices/>Index Management</a></li><li><a href=/console/v1.26.1/docs/reference/data/alias/>Alias Management</a></li><li><a href=/console/v1.26.1/docs/reference/data/view/>Data View</a></li></ul></li><li><input type=checkbox id=section-1f2a999bd81c4d3893f4d18a1b6bee8a class=toggle>
<label for=section-1f2a999bd81c4d3893f4d18a1b6bee8a class="flex justify-between"><a>Data Insight</a>
<span>▾</span></label><ul><li><a href=/console/v1.26.1/docs/reference/data-insight/dashboard/>Dashboard</a></li><li><a href=/console/v1.26.1/docs/reference/data-insight/discover/>Discover</a></li></ul></li><li><input type=checkbox id=section-5e5111152017c79ed39a34209990dab7 class=toggle>
<label for=section-5e5111152017c79ed39a34209990dab7 class="flex justify-between"><a>Alerting</a>
<span>▾</span></label><ul><li><a href=/console/v1.26.1/docs/reference/alerting/message/>Alerting Center</a></li><li><a href=/console/v1.26.1/docs/reference/alerting/rule/>Alerting Rules</a></li><li><a href=/console/v1.26.1/docs/reference/alerting/channel/>Alerting Channels</a></li><li><a href=/console/v1.26.1/docs/reference/alerting/variables/>Template variables</a></li></ul></li><li><input type=checkbox id=section-9d29fb1eabf25b6edd736a2b92f0b4fe class=toggle>
<label for=section-9d29fb1eabf25b6edd736a2b92f0b4fe class="flex justify-between"><a>Dev Tools</a>
<span>▾</span></label><ul><li><a href=/console/v1.26.1/docs/reference/dev-tools/dev-tools/>Dev Tools</a></li><li><a href=/console/v1.26.1/docs/reference/dev-tools/command/>Common Commands</a></li></ul></li><li><input type=checkbox id=section-9b62d84ee4a467c77c95c7cc15b0a09e class=toggle checked>
<label for=section-9b62d84ee4a467c77c95c7cc15b0a09e class="flex justify-between"><a>Data Tools</a>
<span>▾</span></label><ul><li><a href=/console/v1.26.1/docs/reference/migration/comparison/>Data Comparison</a></li><li><a href=/console/v1.26.1/docs/reference/migration/migration/ class=active>Data Migration</a></li></ul></li><li><input type=checkbox id=section-9a37092c3581f4c91275ae58f0fb21f2 class=toggle>
<label for=section-9a37092c3581f4c91275ae58f0fb21f2 class="flex justify-between"><a>Inventory</a>
<span>▾</span></label><ul><li><a href=/console/v1.26.1/docs/reference/resource/gateway/>Gateway Management</a></li><li><a href=/console/v1.26.1/docs/reference/resource/cluster/>Cluster Management</a></li></ul></li><li><input type=checkbox id=section-4d372e275e589511fb7282b1f9f3f20f class=toggle>
<label for=section-4d372e275e589511fb7282b1f9f3f20f class="flex justify-between"><a>System</a>
<span>▾</span></label><ul><li><a href=/console/v1.26.1/docs/reference/system/credential/>Credential Management</a><ul></ul></li><li><input type=checkbox id=section-89e2a3b5192ba2e5bd11dc7aab78be3d class=toggle>
<label for=section-89e2a3b5192ba2e5bd11dc7aab78be3d class="flex justify-between"><a href=/console/v1.26.1/docs/reference/system/security/>Security</a>
<span>▾</span></label><ul><li><a href=/console/v1.26.1/docs/reference/system/security/role/>Role</a></li><li><a href=/console/v1.26.1/docs/reference/system/security/user/>User</a></li></ul></li></ul></li><li><input type=checkbox id=section-5860fb455fea11f0ed079673fd767cda class=toggle>
<label for=section-5860fb455fea11f0ed079673fd767cda class="flex justify-between"><a>Agent</a>
<span>▾</span></label><ul><li><a href=/console/v1.26.1/docs/reference/agent/manage/manage/>Overview</a></li><li><a href=/console/v1.26.1/docs/reference/agent/install/>Installing Agent</a></li><li><a href=/console/v1.26.1/docs/reference/agent/docker/>Container Deployment</a></li></ul></li></ul></li><li><input type=checkbox id=section-7dd85575c84e6825eb9419e748eb5977 class=toggle>
<label for=section-7dd85575c84e6825eb9419e748eb5977 class="flex justify-between"><a>Tutorials</a>
<span>▾</span></label><ul><li><a href=/console/v1.26.1/docs/tutorials/create_readonly_account/>How to easily create an Elasticsearch "guest" user</a></li><li><a href=/console/v1.26.1/docs/tutorials/role_with_different_rights/>How to assign different Elasticsearch cluster access permissions to different INFINI Console accounts</a></li><li><a href=/console/v1.26.1/docs/tutorials/role_with_index_limit/>How to assign Elasticsearch index-level permissions to INFINI Console accounts</a></li><li><a href=/console/v1.26.1/docs/tutorials/cluster_health_change/>How to Monitor Elasticsearch Cluster Health</a></li><li><a href=/console/v1.26.1/docs/tutorials/cluster_node_disk_usage/>How to monitor Elasticsearch cluster node disk usage</a></li><li><a href=/console/v1.26.1/docs/tutorials/cluster_slow_request/>How to monitor slow query requests in Elasticsearch</a></li><li><a href=/console/v1.26.1/docs/tutorials/cluster_node_cpu_usage/>How to monitor the CPU usage of Elasticsearch cluster nodes</a></li><li><a href=/console/v1.26.1/docs/tutorials/cluster_node_jvm_usage/>How to monitor JVM usage of Elasticsearch cluster nodes</a></li></ul></li><li><a href=/console/v1.26.1/docs/user-cases/>User Cases</a><ul></ul></li><li><a href=/console/v1.26.1/docs/screenshot/>Screenshots</a><ul></ul></li><li><a href=/console/v1.26.1/docs/troubleshooting/>FAQs</a><ul></ul></li><li><a href=/console/v1.26.1/docs/release-notes/>Release Notes</a><ul></ul></li></ul><ul><li><a href=https://github.com/infinilabs/console target=_blank rel=noopener>Github</a></li></ul><ul><a class=download-btn href=https://release.infinilabs.com/gateway/>Download</a></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/console/v1.26.1/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Data Migration</strong>
<label for=toc-control><img src=/console/v1.26.1/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#data-migration>Data Migration</a><ul><li><a href=#create-migration-task>Create Migration Task</a><ul><li><a href=#configure-migration-clusters>Configure Migration Clusters</a></li><li><a href=#configure-migration-indices>Configure Migration Indices</a></li><li><a href=#configure-data-range>Configure Data Range</a></li><li><a href=#configure-data-partition>Configure Data Partition</a></li><li><a href=#runtime-configuration>Runtime Configuration</a></li><li><a href=#configure-incremental-data-migration>Configure Incremental Data Migration</a></li></ul></li><li><a href=#start-migration-task>Start Migration Task</a></li><li><a href=#view-migration-task-progress>View Migration Task Progress</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=data-migration>Data Migration
<a class=anchor href=#data-migration>#</a></h1><h2 id=create-migration-task>Create Migration Task
<a class=anchor href=#create-migration-task>#</a></h2><p>Click on the <strong>Data Tools</strong> option in the left menu of the INFINI Console, then click the <strong>New</strong> button to create a migration task, as shown in the following image:</p><h3 id=configure-migration-clusters>Configure Migration Clusters
<a class=anchor href=#configure-migration-clusters>#</a></h3><p><img src=/console/v1.26.1/img/screenshot/migration/20221025-migration-step1-1.jpg alt></p><p>Select the cluster <code>es-v5616</code> from the source cluster list and <code>es-v710</code> from the destination cluster list.</p><h3 id=configure-migration-indices>Configure Migration Indices
<a class=anchor href=#configure-migration-indices>#</a></h3><p>Click the <strong>Select Migration Indices</strong> button, as shown in the image below:</p><p><img src=/console/v1.26.1/img/screenshot/migration/20230420-create-migration3.jpg alt></p><p>Here, we select the index <code>test</code> and then click <strong>Confirm</strong>.</p><p><img src=/console/v1.26.1/img/screenshot/migration/20230420-create-migration4.jpg alt></p><blockquote><p>The <code>test</code> index contains two types, which are automatically split into two indices.</p></blockquote><p>You can modify the target index name and document type on the right side of the table as needed. After selecting the index, click <strong>Next</strong> to perform index initialization, as shown in the following image:</p><p><img src=/console/v1.26.1/img/screenshot/migration/20230420-create-migration5.jpg alt></p><p>After expanding, you can see the mappings and settings. The mappings on the left side display the mappings of the source cluster index. You can click the middle button to copy them to the right side. Then click <code>Auto Optimize</code> for automatic optimization (compatibility optimization). After completing the settings, click <code>Start</code> to initialize the mappings and settings. If no settings are provided, it will be skipped automatically.</p><blockquote><p>If you have already initialized the index settings and mappings through other means, you can directly click <strong>Next</strong> to skip this step.</p></blockquote><p>After completing the index initialization, click <strong>Next</strong> to set the data range and partition settings for the migration task, as shown in the following image:</p><p><img src=/console/v1.26.1/img/screenshot/migration/20230420-create-migration6.jpg alt></p><h3 id=configure-data-range>Configure Data Range
<a class=anchor href=#configure-data-range>#</a></h3><p>If you need to filter the data migration, you can set the data range. In this case, we are performing a full data migration, so we won&rsquo;t set it.</p><p><img src=/console/v1.26.1/img/screenshot/migration/20230420-create-migration7.jpg alt></p><h3 id=configure-data-partition>Configure Data Partition
<a class=anchor href=#configure-data-partition>#</a></h3><p>If an index has a large amount of data, you can configure data partitioning. Data partitioning divides the data into multiple segments based on the specified field and partitioning step. The system will treat each segment as a subtask for migrating the data. This way, even if an exception occurs during the migration of one segment, you only need to rerun that subtask.</p><p><img src=/console/v1.26.1/img/screenshot/migration/20230420-create-migration8.jpg alt></p><p>Data partitioning currently supports partitioning based on date type fields (date) and numeric type fields (number). In the example above, we select the date type field <code>now_widh_format</code> for partitioning and set the partitioning step to 5 minutes (5m). Then click the <strong>Preview</strong> button to see the result. Based on the settings, it will generate 8 partitions (partitions with 0 documents will not generate subtasks). After confirming the partition settings based on the preview information, click <strong>Save</strong> to close the partition settings and proceed to the next step for runtime configuration.</p><h3 id=runtime-configuration>Runtime Configuration
<a class=anchor href=#runtime-configuration>#</a></h3><p><img src=/console/v1.26.1/img/screenshot/migration/20230420-create-migration9.jpg alt></p><p>In general, use the default settings and select the previously registered gateway instance, Nebula, for the execution nodes. Then click <strong>Create Task</strong>.</p><h3 id=configure-incremental-data-migration>Configure Incremental Data Migration
<a class=anchor href=#configure-incremental-data-migration>#</a></h3><p>If the data within the index is continuously being written (e.g., log data), you can configure incremental migration to continuously detect and migrate data from the source cluster to ensure synchronization with the destination cluster.</p><p>When configuring the index, specify the incremental field (e.g., timestamp) and the data write delay (default is 15 minutes) for the index. The purpose of configuring the write delay is to prevent data loss in the destination cluster due to some data not being persisted when exporting from the source cluster:</p><p><img src=/console/v1.26.1/img/screenshot/migration/20230608-migration-incremental-1.png alt></p><p>When creating the task, select <strong>Detect Incremental Data</strong> and set the detection interval (default is 15 minutes):</p><p><img src=/console/v1.26.1/img/screenshot/migration/20230608-migration-incremental-2.png alt></p><p>After clicking <strong>Start</strong>, the task will import incremental data from the source cluster to the destination cluster every 15 minutes. To pause the incremental migration, you can click the <strong>Pause</strong> button. Clicking <strong>Resume</strong> will resume the incremental task, and the data written to the source cluster during the pause will be imported to the destination cluster as usual:</p><p><img src=/console/v1.26.1/img/screenshot/migration/20230608-migration-incremental-3.png alt></p><h2 id=start-migration-task>Start Migration Task
<a class=anchor href=#start-migration-task>#</a></h2><p>After successfully creating the migration task, you will see the task list, as shown in the following image:</p><p><img src=/console/v1.26.1/img/screenshot/migration/20230420-migration10.jpg alt></p><p>You can see that the recently created task is listed. Click the <strong>Start</strong> button in the action bar on the right side of the table to begin the task.</p><blockquote><p>Before starting the task, make sure that if the migration index involves ILM configuration, the relevant index templates and ILM aliases are properly configured in the destination cluster.</p></blockquote><p>Click the <strong>Start</strong> button to initiate the migration task.</p><h2 id=view-migration-task-progress>View Migration Task Progress
<a class=anchor href=#view-migration-task-progress>#</a></h2><p>After the task is successfully started, click on <strong>Details</strong> to view the task execution status. By clicking the <strong>Refresh</strong> button to enable auto-refresh, you will see the following changes in the task details:</p><p><img src=/console/v1.26.1/img/screenshot/migration/20230420-migration11.jpg alt></p><p>The blue squares indicate that the subtasks (partition tasks) are already running, while the gray squares indicate that the tasks have not started.</p><p><img src=/console/v1.26.1/img/screenshot/migration/20230420-migration12.jpg alt></p><p>In the image above, you can see that the squares have turned green, indicating that the subtasks (partition tasks) have completed data migration. The migration progress for the index <code>test-doc</code> is 100%, and for the index <code>test-doc1</code>, it is 21.11.</p><p><img src=/console/v1.26.1/img/screenshot/migration/20230420-migration13.jpg alt></p><p>In the image above, all the squares have turned green, indicating that the migration progress for all indices is 100%, indicating that the data migration is complete. If any square turns red during the migration, it means that an error has occurred. In such cases, you can click on the task square to view the error log in the progress information and identify the specific cause of the error.</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/infinilabs/console/edit/v1.26.1/docs/content.en/docs/reference/migration/migration.md target=_blank rel=noopener><img src=/console/v1.26.1/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div><div class="flex align-center footer">©INFINI.LTD, All Rights Reserved.</div><script>(function(h,o,t,j,a,r){h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};h._hjSettings={hjid:2567416,hjsv:6};a=o.getElementsByTagName('head')[0];r=o.createElement('script');r.async=1;r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;a.appendChild(r);})(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-VV6PGDHH84"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','G-VV6PGDHH84');</script><script type=text/javascript>var _smartsupp=_smartsupp||{};_smartsupp.key='691ff544d18a237005a011a7290b839d8fe811a4';window.smartsupp||(function(d){var s,c,o=smartsupp=function(){o._.push(arguments)};o._=[];s=d.getElementsByTagName('script')[0];c=d.createElement('script');c.type='text/javascript';c.charset='utf-8';c.async=true;c.src='https://www.smartsuppchat.com/loader.js?';s.parentNode.insertBefore(c,s);})(document);</script></div></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents><ul><li><a href=#data-migration>Data Migration</a><ul><li><a href=#create-migration-task>Create Migration Task</a><ul><li><a href=#configure-migration-clusters>Configure Migration Clusters</a></li><li><a href=#configure-migration-indices>Configure Migration Indices</a></li><li><a href=#configure-data-range>Configure Data Range</a></li><li><a href=#configure-data-partition>Configure Data Partition</a></li><li><a href=#runtime-configuration>Runtime Configuration</a></li><li><a href=#configure-incremental-data-migration>Configure Incremental Data Migration</a></li></ul></li><li><a href=#start-migration-task>Start Migration Task</a></li><li><a href=#view-migration-task-progress>View Migration Task Progress</a></li></ul></li></ul></nav></aside></main><script src=/console/v1.26.1/js/asciinema-player.js></script></body></html>