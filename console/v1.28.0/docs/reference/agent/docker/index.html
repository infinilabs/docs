<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.79.1"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Container Deployment #  INFINI Agent supports container deployment.
Download Image #  The images of INFINI Agent are published at the official repository of Docker. The URL is as follows: https://hub.docker.com/r/infinilabs/agent
Run the following command:
docker pull infinilabs/agent:1.27.0-1936 Verifying the Image #  After downloading the image locally, you will notice that the container image of INFINI Agent is very small, with a size less than 25 MB. So, the downloading is very fast."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="Container Deployment"><meta property="og:description" content="Container Deployment #  INFINI Agent supports container deployment.
Download Image #  The images of INFINI Agent are published at the official repository of Docker. The URL is as follows: https://hub.docker.com/r/infinilabs/agent
Run the following command:
docker pull infinilabs/agent:1.27.0-1936 Verifying the Image #  After downloading the image locally, you will notice that the container image of INFINI Agent is very small, with a size less than 25 MB. So, the downloading is very fast."><meta property="og:type" content="article"><meta property="og:url" content="/console/v1.28.0/docs/reference/agent/docker/"><title>Container Deployment | INFINI Console</title><link rel=manifest href=/console/v1.28.0/manifest.json><link rel=icon href=/console/v1.28.0/favicon.png type=image/x-icon><link rel=stylesheet href=/console/v1.28.0/book.min.d80e87b12a4b49d9913d0bdd98bd83b7a44988be784760ba15522b377313dcf9.css integrity="sha256-2A6HsSpLSdmRPQvdmL2Dt6RJiL54R2C6FVIrN3MT3Pk="><link rel=stylesheet type=text/css href=/console/v1.28.0/css/asciinema-player.css><script defer src=/console/v1.28.0/js/jquery-2.x.min.js></script><script defer src=/console/v1.28.0/js/doc.js></script></head><body><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=/console/v1.28.0><img src=/console/v1.28.0/img/logo-en.svg alt=Logo></a></h2><div class=heading><select class=version-selector>
<option value>main (latest)</option>
<option value=v1.28.0>v1.28.x</option>
<option value=v1.27.0>v1.27.x</option>
<option value=v1.26.1>v1.26.x</option></select></div><ul><li><input type=checkbox id=section-f1b7c1b2e5dd43526e77637c475d35b8 class=toggle>
<label for=section-f1b7c1b2e5dd43526e77637c475d35b8 class="flex justify-between"><a>Getting Started</a>
<span>▾</span></label><ul><li><a href=/console/v1.28.0/docs/getting-started/install/>Installation</a></li><li><a href=/console/v1.28.0/docs/getting-started/docker/>Docker</a></li><li><a href=/console/v1.28.0/docs/getting-started/helm/>Kubernetes</a></li></ul></li><li><input type=checkbox id=section-084ba1dbb512652712ad881ff8045610 class=toggle checked>
<label for=section-084ba1dbb512652712ad881ff8045610 class="flex justify-between"><a>References</a>
<span>▾</span></label><ul><li><a href=/console/v1.28.0/docs/reference/setup/>Setup wizard</a><ul></ul></li><li><a href=/console/v1.28.0/docs/reference/overview/>Overview</a><ul></ul></li><li><input type=checkbox id=section-dc19493497a0afff7833e4e9dc3568aa class=toggle>
<label for=section-dc19493497a0afff7833e4e9dc3568aa class="flex justify-between"><a>Platform</a>
<span>▾</span></label><ul><li><a href=/console/v1.28.0/docs/reference/platform/overview/>Platform Overview</a></li><li><a href=/console/v1.28.0/docs/reference/platform/monitoring/>Cluster Monitoring</a></li><li><a href=/console/v1.28.0/docs/reference/platform/activities/>Cluster Activities</a></li></ul></li><li><input type=checkbox id=section-77e7dc04d6c2293e5fe55f48c5b1a96d class=toggle>
<label for=section-77e7dc04d6c2293e5fe55f48c5b1a96d class="flex justify-between"><a href=/console/v1.28.0/docs/reference/data/>Data Management</a>
<span>▾</span></label><ul><li><a href=/console/v1.28.0/docs/reference/data/indices/>Index Management</a></li><li><a href=/console/v1.28.0/docs/reference/data/alias/>Alias Management</a></li><li><a href=/console/v1.28.0/docs/reference/data/view/>Data View</a></li></ul></li><li><input type=checkbox id=section-1f2a999bd81c4d3893f4d18a1b6bee8a class=toggle>
<label for=section-1f2a999bd81c4d3893f4d18a1b6bee8a class="flex justify-between"><a>Data Insight</a>
<span>▾</span></label><ul><li><a href=/console/v1.28.0/docs/reference/data-insight/dashboard/>Dashboard</a></li><li><a href=/console/v1.28.0/docs/reference/data-insight/discover/>Discover</a></li></ul></li><li><input type=checkbox id=section-5e5111152017c79ed39a34209990dab7 class=toggle>
<label for=section-5e5111152017c79ed39a34209990dab7 class="flex justify-between"><a>Alerting</a>
<span>▾</span></label><ul><li><a href=/console/v1.28.0/docs/reference/alerting/message/>Alerting Center</a></li><li><a href=/console/v1.28.0/docs/reference/alerting/rule/>Alerting Rules</a></li><li><a href=/console/v1.28.0/docs/reference/alerting/channel/>Alerting Channels</a></li><li><a href=/console/v1.28.0/docs/reference/alerting/variables/>Template variables</a></li></ul></li><li><input type=checkbox id=section-9d29fb1eabf25b6edd736a2b92f0b4fe class=toggle>
<label for=section-9d29fb1eabf25b6edd736a2b92f0b4fe class="flex justify-between"><a>Dev Tools</a>
<span>▾</span></label><ul><li><a href=/console/v1.28.0/docs/reference/dev-tools/dev-tools/>Dev Tools</a></li><li><a href=/console/v1.28.0/docs/reference/dev-tools/command/>Common Commands</a></li></ul></li><li><input type=checkbox id=section-9b62d84ee4a467c77c95c7cc15b0a09e class=toggle>
<label for=section-9b62d84ee4a467c77c95c7cc15b0a09e class="flex justify-between"><a>Data Tools</a>
<span>▾</span></label><ul><li><a href=/console/v1.28.0/docs/reference/migration/comparison/>Data Comparison</a></li><li><a href=/console/v1.28.0/docs/reference/migration/migration/>Data Migration</a></li></ul></li><li><input type=checkbox id=section-9a37092c3581f4c91275ae58f0fb21f2 class=toggle>
<label for=section-9a37092c3581f4c91275ae58f0fb21f2 class="flex justify-between"><a>Inventory</a>
<span>▾</span></label><ul><li><a href=/console/v1.28.0/docs/reference/resource/gateway/>Gateway Management</a></li><li><a href=/console/v1.28.0/docs/reference/resource/cluster/>Cluster Management</a></li></ul></li><li><input type=checkbox id=section-4d372e275e589511fb7282b1f9f3f20f class=toggle>
<label for=section-4d372e275e589511fb7282b1f9f3f20f class="flex justify-between"><a>System</a>
<span>▾</span></label><ul><li><a href=/console/v1.28.0/docs/reference/system/credential/>Credential Management</a><ul></ul></li><li><input type=checkbox id=section-89e2a3b5192ba2e5bd11dc7aab78be3d class=toggle>
<label for=section-89e2a3b5192ba2e5bd11dc7aab78be3d class="flex justify-between"><a href=/console/v1.28.0/docs/reference/system/security/>Security</a>
<span>▾</span></label><ul><li><a href=/console/v1.28.0/docs/reference/system/security/role/>Role</a></li><li><a href=/console/v1.28.0/docs/reference/system/security/user/>User</a></li></ul></li></ul></li><li><input type=checkbox id=section-5860fb455fea11f0ed079673fd767cda class=toggle checked>
<label for=section-5860fb455fea11f0ed079673fd767cda class="flex justify-between"><a>Agent</a>
<span>▾</span></label><ul><li><a href=/console/v1.28.0/docs/reference/agent/manage/manage/>Overview</a></li><li><a href=/console/v1.28.0/docs/reference/agent/install/>Installing Agent</a></li><li><a href=/console/v1.28.0/docs/reference/agent/docker/ class=active>Container Deployment</a></li></ul></li></ul></li><li><input type=checkbox id=section-7dd85575c84e6825eb9419e748eb5977 class=toggle>
<label for=section-7dd85575c84e6825eb9419e748eb5977 class="flex justify-between"><a>Tutorials</a>
<span>▾</span></label><ul><li><a href=/console/v1.28.0/docs/tutorials/create_readonly_account/>How to easily create an Elasticsearch "guest" user</a></li><li><a href=/console/v1.28.0/docs/tutorials/role_with_different_rights/>How to assign different Elasticsearch cluster access permissions to different INFINI Console accounts</a></li><li><a href=/console/v1.28.0/docs/tutorials/role_with_index_limit/>How to assign Elasticsearch index-level permissions to INFINI Console accounts</a></li><li><a href=/console/v1.28.0/docs/tutorials/cluster_health_change/>How to Monitor Elasticsearch Cluster Health</a></li><li><a href=/console/v1.28.0/docs/tutorials/cluster_node_disk_usage/>How to monitor Elasticsearch cluster node disk usage</a></li><li><a href=/console/v1.28.0/docs/tutorials/cluster_slow_request/>How to monitor slow query requests in Elasticsearch</a></li><li><a href=/console/v1.28.0/docs/tutorials/cluster_node_cpu_usage/>How to monitor the CPU usage of Elasticsearch cluster nodes</a></li><li><a href=/console/v1.28.0/docs/tutorials/cluster_node_jvm_usage/>How to monitor JVM usage of Elasticsearch cluster nodes</a></li></ul></li><li><a href=/console/v1.28.0/docs/user-cases/>User Cases</a><ul></ul></li><li><a href=/console/v1.28.0/docs/screenshot/>Screenshots</a><ul></ul></li><li><a href=/console/v1.28.0/docs/troubleshooting/>FAQs</a><ul></ul></li><li><a href=/console/v1.28.0/docs/release-notes/>Release Notes</a><ul></ul></li></ul><ul><li><a href=https://github.com/infinilabs/console target=_blank rel=noopener>Github</a></li></ul><ul><a class=download-btn href=https://release.infinilabs.com/console/>Download</a></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/console/v1.28.0/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Container Deployment</strong>
<label for=toc-control><img src=/console/v1.28.0/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#container-deployment>Container Deployment</a><ul><li><a href=#download-image>Download Image</a></li><li><a href=#verifying-the-image>Verifying the Image</a></li><li><a href=#configuration>Configuration</a></li><li><a href=#starting>Starting</a></li><li><a href=#docker-compose>Docker Compose</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=container-deployment>Container Deployment
<a class=anchor href=#container-deployment>#</a></h1><p>INFINI Agent supports container deployment.</p><h2 id=download-image>Download Image
<a class=anchor href=#download-image>#</a></h2><p>The images of INFINI Agent are published at the official repository of Docker. The URL is as follows:
<a href=https://hub.docker.com/r/infinilabs/agent>https://hub.docker.com/r/infinilabs/agent</a></p><p>Run the following command:</p><pre><code>docker pull infinilabs/agent:1.27.0-1936
</code></pre><h2 id=verifying-the-image>Verifying the Image
<a class=anchor href=#verifying-the-image>#</a></h2><p>After downloading the image locally, you will notice that the container image of INFINI Agent is very small, with a size less than 25 MB. So, the downloading is very fast.</p><pre><code>✗ docker images |grep &quot;agent&quot; |grep &quot;1.27.0-1936&quot;
REPOSITORY         TAG               IMAGE ID       CREATED        SIZE
infinilabs/agent   1.27.0-1936            c7bd9ad063d9   4 days ago     13.8MB
</code></pre><h2 id=configuration>Configuration
<a class=anchor href=#configuration>#</a></h2><p>Create a configuration file <code>agent.yml</code> to perform basic configuration as follows:</p><pre><code>api:
  enabled: true
  network:
    binding: 0.0.0.0:8080

metrics:
  enabled: true
  queue: metrics
  network:
    enabled: true
    summary: true
    details: true
  memory:
    metrics:
      - swap
      - memory
  disk:
    metrics:
      - ioqs
      - usage
  cpu:
    metrics:
      - idle
      - system
      - user
      - iowait
      - load
  elasticsearch:
    enabled: true
    agent_mode: true
    node_stats: true
    index_stats: true
    cluster_stats: true

elasticsearch:
  - name: default
    enabled: true
    endpoint: http://192.168.3.4:9200
    monitored: false
    discovery:
      enabled: true

pipeline:
  - name: metrics_ingest
    auto_start: true
    keep_running: true
    processor:
      - json_indexing:
          index_name: &quot;.infini_metrics&quot;
          elasticsearch: &quot;default&quot;
          input_queue: &quot;metrics&quot;
          output_queue:
            name: &quot;metrics_requests&quot;
            label:
              tag: &quot;metrics&quot;
          worker_size: 1
          bulk_size_in_mb: 10
  - name: consume-metrics_requests
    auto_start: true
    keep_running: true
    processor:
      - bulk_indexing:
          bulk:
            compress: true
            batch_size_in_mb: 10
            batch_size_in_docs: 5000
          consumer:
            fetch_max_messages: 100
          queues:
            type: indexing_merge
          when:
            cluster_available: [ &quot;default&quot; ]

agent:
  major_ip_pattern: &quot;192.*&quot;
  labels:
    env: dev
  tags:
    - linux
    - x86
    - es7
    - v7.5

path.data: data
path.logs: log

agent.manager.endpoint: http://192.168.3.4:9000
</code></pre><p>Note: In the above configuration, replace the Elasticsearch configuration with the actual server connection address and authentication information.</p><h2 id=starting>Starting
<a class=anchor href=#starting>#</a></h2><p>Run the following command:</p><pre><code>docker run -p 8080:8080  -v=`pwd`/agent.yml:/agent.yml  infinilabs/agent:1.27.0-1936
</code></pre><h2 id=docker-compose>Docker Compose
<a class=anchor href=#docker-compose>#</a></h2><p>You can also use docker compose to manage container instances. Create one docker-compose.yml file as follows:</p><pre><code>version: &quot;3.5&quot;

services:
  infini-agent:
    image: infinilabs/agent:1.27.0-1936
    ports:
      - 8080:8080
    container_name: &quot;infini-agent&quot;
    volumes:
      - ./agent.yml:/agent.yml

volumes:
  dist:
</code></pre><p>Run the following command to start INFINI Agent.</p><pre><code>➜  docker-compose up
Recreating infini-agent ... done
Attaching to infini-agent
infini-agent    |    _      ___   __    __  _____
infini-agent    |   /_\    / _ \ /__\/\ \ \/__   \
infini-agent    |  //_\\  / /_\//_\ /  \/ /  / /\/
infini-agent    | /  _  \/ /_\\//__/ /\  /  / /
infini-agent    | \_/ \_/\____/\__/\_\ \/   \/
infini-agent    |
infini-agent    | [AGENT] A light-weight, powerful and high-performance elasticsearch agent.
infini-agent    | [AGENT] 0.1.0_SNAPSHOT#15, 2022-08-26 15:05:43, 2025-12-31 10:10:10, 164bd8a0d74cfd0ba5607352e125d72b46a1079e
infini-agent    | [08-31 09:11:45] [INF] [app.go:164] initializing agent.
infini-agent    | [08-31 09:11:45] [INF] [app.go:165] using config: /agent.yml.
infini-agent    | [08-31 09:11:45] [INF] [instance.go:72] workspace: /data/agent/nodes/cc7ibke5epac7314bf9g
infini-agent    | [08-31 09:11:45] [INF] [metrics.go:63] ip:172.18.0.2, host:bd9f43490911, labels:, tags:
infini-agent    | [08-31 09:11:45] [INF] [api.go:261] api listen at: http://0.0.0.0:8080
infini-agent    | [08-31 09:11:45] [INF] [actions.go:367] elasticsearch [default] is available
infini-agent    | [08-31 09:11:45] [INF] [module.go:116] all modules are started
infini-agent    | [08-31 09:11:45] [INF] [manage.go:180] register agent to console
infini-agent    | [08-31 09:11:45] [INF] [app.go:334] agent is up and running now.
</code></pre></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/infinilabs/console/edit/v1.28.0/docs/content.en/docs/reference/agent/docker.md target=_blank rel=noopener><img src=/console/v1.28.0/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div><div class="flex align-center footer">©INFINI.LTD, All Rights Reserved.</div><script>(function(h,o,t,j,a,r){h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};h._hjSettings={hjid:2567416,hjsv:6};a=o.getElementsByTagName('head')[0];r=o.createElement('script');r.async=1;r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;a.appendChild(r);})(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-RJPTVP614C"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','G-RJPTVP614C');</script><script type=text/javascript>var _smartsupp=_smartsupp||{};_smartsupp.key='691ff544d18a237005a011a7290b839d8fe811a4';window.smartsupp||(function(d){var s,c,o=smartsupp=function(){o._.push(arguments)};o._=[];s=d.getElementsByTagName('script')[0];c=d.createElement('script');c.type='text/javascript';c.charset='utf-8';c.async=true;c.src='https://www.smartsuppchat.com/loader.js?';s.parentNode.insertBefore(c,s);})(document);</script></div></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents><ul><li><a href=#container-deployment>Container Deployment</a><ul><li><a href=#download-image>Download Image</a></li><li><a href=#verifying-the-image>Verifying the Image</a></li><li><a href=#configuration>Configuration</a></li><li><a href=#starting>Starting</a></li><li><a href=#docker-compose>Docker Compose</a></li></ul></li></ul></nav></aside></main><script src=/console/v1.28.0/js/asciinema-player.js></script></body></html>