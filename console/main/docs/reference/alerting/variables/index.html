<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.79.1"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Template variables #  Introduction #  When custom alerting triggers event content, in addition to the fixed copy written by yourself, the event title and event content also support template syntax. The rendering of the text can be achieved using fields in the event.
Variables #  The syntax for rendering fields is {{ .fieldname }}, and the variable fields that can be used for template content rendering are as follows:"><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="Template variables"><meta property="og:description" content="Template variables #  Introduction #  When custom alerting triggers event content, in addition to the fixed copy written by yourself, the event title and event content also support template syntax. The rendering of the text can be achieved using fields in the event.
Variables #  The syntax for rendering fields is {{ .fieldname }}, and the variable fields that can be used for template content rendering are as follows:"><meta property="og:type" content="article"><meta property="og:url" content="/console/main/docs/reference/alerting/variables/"><title>Template variables | INFINI Console</title><link rel=manifest href=/console/main/manifest.json><link rel=icon href=/console/main/favicon.png type=image/x-icon><link rel=stylesheet href=/console/main/book.min.d80e87b12a4b49d9913d0bdd98bd83b7a44988be784760ba15522b377313dcf9.css integrity="sha256-2A6HsSpLSdmRPQvdmL2Dt6RJiL54R2C6FVIrN3MT3Pk="><link rel=stylesheet type=text/css href=/console/main/css/asciinema-player.css><script defer src=/console/main/js/jquery-2.x.min.js></script><script defer src=/console/main/js/doc.js></script></head><body><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=/console/main><img src=/console/main/img/logo-en.svg alt=Logo></a></h2><div class=heading><select class=version-selector>
<option value>main (latest)</option>
<option value=v1.26.1>v1.26.x</option></select></div><ul><li><input type=checkbox id=section-f1b7c1b2e5dd43526e77637c475d35b8 class=toggle>
<label for=section-f1b7c1b2e5dd43526e77637c475d35b8 class="flex justify-between"><a>Getting Started</a>
<span>▾</span></label><ul><li><a href=/console/main/docs/getting-started/install/>Installation</a></li><li><a href=/console/main/docs/getting-started/docker/>Docker</a></li><li><a href=/console/main/docs/getting-started/helm/>Kubernetes</a></li></ul></li><li><input type=checkbox id=section-084ba1dbb512652712ad881ff8045610 class=toggle checked>
<label for=section-084ba1dbb512652712ad881ff8045610 class="flex justify-between"><a>References</a>
<span>▾</span></label><ul><li><a href=/console/main/docs/reference/setup/>Setup wizard</a><ul></ul></li><li><a href=/console/main/docs/reference/overview/>Overview</a><ul></ul></li><li><input type=checkbox id=section-dc19493497a0afff7833e4e9dc3568aa class=toggle>
<label for=section-dc19493497a0afff7833e4e9dc3568aa class="flex justify-between"><a>Platform</a>
<span>▾</span></label><ul><li><a href=/console/main/docs/reference/platform/overview/>Platform Overview</a></li><li><a href=/console/main/docs/reference/platform/monitoring/>Cluster Monitoring</a></li><li><a href=/console/main/docs/reference/platform/activities/>Cluster Activities</a></li></ul></li><li><input type=checkbox id=section-77e7dc04d6c2293e5fe55f48c5b1a96d class=toggle>
<label for=section-77e7dc04d6c2293e5fe55f48c5b1a96d class="flex justify-between"><a href=/console/main/docs/reference/data/>Data Management</a>
<span>▾</span></label><ul><li><a href=/console/main/docs/reference/data/indices/>Index Management</a></li><li><a href=/console/main/docs/reference/data/alias/>Alias Management</a></li><li><a href=/console/main/docs/reference/data/view/>Data View</a></li></ul></li><li><input type=checkbox id=section-1f2a999bd81c4d3893f4d18a1b6bee8a class=toggle>
<label for=section-1f2a999bd81c4d3893f4d18a1b6bee8a class="flex justify-between"><a>Data Insight</a>
<span>▾</span></label><ul><li><a href=/console/main/docs/reference/data-insight/dashboard/>Dashboard</a></li><li><a href=/console/main/docs/reference/data-insight/discover/>Discover</a></li></ul></li><li><input type=checkbox id=section-5e5111152017c79ed39a34209990dab7 class=toggle checked>
<label for=section-5e5111152017c79ed39a34209990dab7 class="flex justify-between"><a>Alerting</a>
<span>▾</span></label><ul><li><a href=/console/main/docs/reference/alerting/message/>Alerting Center</a></li><li><a href=/console/main/docs/reference/alerting/rule/>Alerting Rules</a></li><li><a href=/console/main/docs/reference/alerting/channel/>Alerting Channels</a></li><li><a href=/console/main/docs/reference/alerting/variables/ class=active>Template variables</a></li></ul></li><li><input type=checkbox id=section-9d29fb1eabf25b6edd736a2b92f0b4fe class=toggle>
<label for=section-9d29fb1eabf25b6edd736a2b92f0b4fe class="flex justify-between"><a>Dev Tools</a>
<span>▾</span></label><ul><li><a href=/console/main/docs/reference/dev-tools/dev-tools/>Dev Tools</a></li><li><a href=/console/main/docs/reference/dev-tools/command/>Common Commands</a></li></ul></li><li><input type=checkbox id=section-9b62d84ee4a467c77c95c7cc15b0a09e class=toggle>
<label for=section-9b62d84ee4a467c77c95c7cc15b0a09e class="flex justify-between"><a>Data Tools</a>
<span>▾</span></label><ul><li><a href=/console/main/docs/reference/migration/comparison/>Data Comparison</a></li><li><a href=/console/main/docs/reference/migration/migration/>Data Migration</a></li></ul></li><li><input type=checkbox id=section-9a37092c3581f4c91275ae58f0fb21f2 class=toggle>
<label for=section-9a37092c3581f4c91275ae58f0fb21f2 class="flex justify-between"><a>Inventory</a>
<span>▾</span></label><ul><li><a href=/console/main/docs/reference/resource/gateway/>Gateway Management</a></li><li><a href=/console/main/docs/reference/resource/cluster/>Cluster Management</a></li></ul></li><li><input type=checkbox id=section-4d372e275e589511fb7282b1f9f3f20f class=toggle>
<label for=section-4d372e275e589511fb7282b1f9f3f20f class="flex justify-between"><a>System</a>
<span>▾</span></label><ul><li><a href=/console/main/docs/reference/system/credential/>Credential Management</a><ul></ul></li><li><input type=checkbox id=section-89e2a3b5192ba2e5bd11dc7aab78be3d class=toggle>
<label for=section-89e2a3b5192ba2e5bd11dc7aab78be3d class="flex justify-between"><a href=/console/main/docs/reference/system/security/>Security</a>
<span>▾</span></label><ul><li><a href=/console/main/docs/reference/system/security/role/>Role</a></li><li><a href=/console/main/docs/reference/system/security/user/>User</a></li></ul></li></ul></li><li><input type=checkbox id=section-5860fb455fea11f0ed079673fd767cda class=toggle>
<label for=section-5860fb455fea11f0ed079673fd767cda class="flex justify-between"><a>Agent</a>
<span>▾</span></label><ul><li><a href=/console/main/docs/reference/agent/manage/manage/>Overview</a></li><li><a href=/console/main/docs/reference/agent/install/>Installing Agent</a></li><li><a href=/console/main/docs/reference/agent/docker/>Container Deployment</a></li></ul></li></ul></li><li><input type=checkbox id=section-7dd85575c84e6825eb9419e748eb5977 class=toggle>
<label for=section-7dd85575c84e6825eb9419e748eb5977 class="flex justify-between"><a>Tutorials</a>
<span>▾</span></label><ul><li><a href=/console/main/docs/tutorials/create_readonly_account/>How to easily create an Elasticsearch "guest" user</a></li><li><a href=/console/main/docs/tutorials/role_with_different_rights/>How to assign different Elasticsearch cluster access permissions to different INFINI Console accounts</a></li><li><a href=/console/main/docs/tutorials/role_with_index_limit/>How to assign Elasticsearch index-level permissions to INFINI Console accounts</a></li><li><a href=/console/main/docs/tutorials/cluster_health_change/>How to Monitor Elasticsearch Cluster Health</a></li><li><a href=/console/main/docs/tutorials/cluster_node_disk_usage/>How to monitor Elasticsearch cluster node disk usage</a></li><li><a href=/console/main/docs/tutorials/cluster_slow_request/>How to monitor slow query requests in Elasticsearch</a></li><li><a href=/console/main/docs/tutorials/cluster_node_cpu_usage/>How to monitor the CPU usage of Elasticsearch cluster nodes</a></li><li><a href=/console/main/docs/tutorials/cluster_node_jvm_usage/>How to monitor JVM usage of Elasticsearch cluster nodes</a></li></ul></li><li><a href=/console/main/docs/user-cases/>User Cases</a><ul></ul></li><li><a href=/console/main/docs/screenshot/>Screenshots</a><ul></ul></li><li><a href=/console/main/docs/troubleshooting/>FAQs</a><ul></ul></li><li><a href=/console/main/docs/release-notes/>Release Notes</a><ul></ul></li></ul><ul><li><a href=https://github.com/infinilabs/console target=_blank rel=noopener>Github</a></li></ul><ul><a class=download-btn href=https://release.infinilabs.com/console/>Download</a></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/console/main/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Template variables</strong>
<label for=toc-control><img src=/console/main/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#template-variables>Template variables</a><ul><li><a href=#introduction>Introduction</a></li><li><a href=#variables>Variables</a><ul><li><a href=#variable-usage-example>Variable usage example</a></li></ul></li><li><a href=#template-functions>Template functions</a></li><li><a href=#common-template-syntax>Common Template Syntax</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=template-variables>Template variables
<a class=anchor href=#template-variables>#</a></h1><h2 id=introduction>Introduction
<a class=anchor href=#introduction>#</a></h2><p>When custom alerting triggers event content, in addition to the fixed copy written by yourself, the event title and event content also support template syntax. The rendering of the text can be achieved using fields in the event.</p><h2 id=variables>Variables
<a class=anchor href=#variables>#</a></h2><p>The syntax for rendering fields is <code>{{ .fieldname }}</code>, and the variable fields that can be used for template content rendering are as follows:</p><table><thead><tr><th>Field Name</th><th>Type</th><th>Descriction</th><th>eg</th></tr></thead><tbody><tr><td>rule_id</td><td>string</td><td>rule uuid</td><td>c9f663tath2e5a0vksjg</td></tr><tr><td>rule_name</td><td>string</td><td>rule name</td><td>High CPU usage</td></tr><tr><td>resource_id</td><td>string</td><td>resource uuid</td><td>c9f663tath2e5a0vksjg</td></tr><tr><td>resource_name</td><td>string</td><td>resource name</td><td>es-v716</td></tr><tr><td>event_id</td><td>string</td><td>identifier for check details</td><td>c9f663tath2e5a0vksjx</td></tr><tr><td>timestamp</td><td>number</td><td>Millisecond timestamp</td><td>1654595042399</td></tr><tr><td>first_group_value</td><td>string</td><td>The first value of group_values in results</td><td>c9aikmhpdamkiurn1vq0</td></tr><tr><td>first_threshold</td><td>string</td><td>The first value of threshold in results</td><td>90</td></tr><tr><td>priority</td><td>string</td><td>The highest priority in results</td><td>critical</td></tr><tr><td>title</td><td>string</td><td>event title</td><td>Node (<code>{{.first_group_value}}</code>) disk used >= 90%</td></tr><tr><td>message</td><td>string</td><td>event content</td><td>EventID：<code>{{.event_id}}</code>; Cluster：<code>{{.resource_name}}</code></td></tr><tr><td>results</td><td>array</td><td>result of groups</td><td></td></tr><tr><td>┗ threshold</td><td>array</td><td></td><td>[&ldquo;90&rdquo;]</td></tr><tr><td>┗ priority</td><td>string</td><td></td><td>high</td></tr><tr><td>┗ group_values</td><td>array</td><td></td><td>[&ldquo;cluster-xxx&rdquo;, &ldquo;node-xxx&rdquo;]</td></tr><tr><td>┗ issue_timestamp</td><td>number</td><td>Millisecond timestamp</td><td>1654595042399</td></tr><tr><td>┗ result_value</td><td>float</td><td></td><td>91.2</td></tr><tr><td>┗ relation_values</td><td>map</td><td></td><td>{a:100, b:91.2}</td></tr></tbody></table><h3 id=variable-usage-example>Variable usage example
<a class=anchor href=#variable-usage-example>#</a></h3><p>Example 1:</p><pre><code>{&quot;content&quot;:&quot;【Alerting】Event ID: {{.event_id}}, Cluster：{{.resource_name}}&quot;}
</code></pre><p>Example 2(array traversal):</p><pre><code>{{range .results}} Cluster ID: {{index .group_values 0}} {{end}}
</code></pre><h2 id=template-functions>Template functions
<a class=anchor href=#template-functions>#</a></h2><p>In addition to directly displaying the field value in the alerting event, it also supports the use of template functions to further process the field value to optimize the output.</p><p>Functions support extra parameters. When no parameters are required or passed, the following syntax can be used directly:</p><p><code>{{ &lt;field> | &lt;function> }}</code></p><p>Specific examples are as follows:</p><p>Functions take no parameters:</p><pre><code>Alerting event trigger time:{{ .timestamp | datetime }}
</code></pre><p>Functions take parameters:</p><pre><code>Alerting event trigger time:{{ .timestamp | datetime_in_zone &quot;Asia/Shanghai&quot; }}
</code></pre><p>Use multiple functions in combination:</p><pre><code>{{.result_value | format_bytes 2 ｜ to_upper}}
</code></pre><p>The complete list of template functions is as follows:</p><table><thead><tr><th>Functions</th><th>params</th><th>Descriction</th><th></th></tr></thead><tbody><tr><td>to_fixed</td><td>fixed number of decimal places</td><td>The float type value retains N decimal places<br>Example:<code>{{.result_value | to_fixed 2}}</code><br>Output:10.35</td><td></td></tr><tr><td>format_bytes</td><td>fixed number of decimal places</td><td>Byte type numeric formatting<br>Example:<code>{{.result_value | format_bytes 2}}</code><br>Output:10.35gb</td><td></td></tr><tr><td>date</td><td></td><td>Convert timestamp to UTC date<br>Example:<code>{{.timestamp | date}}</code><br>Output:2022-05-01</td><td></td></tr><tr><td>date_in_zone</td><td>Time zone</td><td>Convert timestamp to current zone date<br>Example:<code>{{.timestamp | date_in_zone "Asia/Shanghai"}}</code><br>Output:2022-05-01</td><td></td></tr><tr><td>datetime</td><td></td><td>Convert timestamp to UTC time<br>Example:<code>{{.timestamp | datetime}}</code><br>Output:2022-05-01 10:10:10</td><td></td></tr><tr><td>datetime_in_zone</td><td>Time zone</td><td>Convert timestamp to current zone time<br>Example:<code>{{.timestamp | datetime_in_zone "Asia/Shanghai"}}</code><br>Output:2022-05-01 10:10:10</td><td></td></tr><tr><td>to_lower</td><td></td><td>Convert characters to lowercase<br>Example:<code>{{.resource_name | to_lower }}</code><br>Output:cluster</td><td></td></tr><tr><td>to_upper</td><td></td><td>Convert characters to uppercase<br>Example:<code>{{.resource_name | to_upper }}</code><br>Output:CLUSTER</td><td></td></tr><tr><td>add</td><td>number</td><td>Example: a+b<br><code>{{.result_value | add 1 }}</code><br>Output：2</td><td></td></tr><tr><td>sub</td><td>number</td><td>Example: a - b<br><code>{{sub .result_value 1 }}</code><br>Output：0</td><td></td></tr><tr><td>mul</td><td>number</td><td>Example: a _ b _ c<br><code>{{mul .result_value 3 2 }}</code><br>Output：6</td><td></td></tr><tr><td>div</td><td>number</td><td>Example: a/b<br><code>{{div .result_value 2 }}</code><br>Output：0.5</td><td></td></tr></tbody></table><h2 id=common-template-syntax>Common Template Syntax
<a class=anchor href=#common-template-syntax>#</a></h2><p>Array traversal：</p><pre><code>{{range .results}} priority: {{.priority}} {{end}}
</code></pre><p>Get values by array subscript:</p><p>Example: group_values = [&ldquo;value1&rdquo;,&ldquo;value2&rdquo;,&ldquo;value3&rdquo;]</p><pre><code>{{index .group_values 0}}
# output: value1
{{index .group_values 2}}
# output: value3
</code></pre><p>if conditional branch：</p><pre><code>{{if pipeline}} T1 {{else}} T0 {{end}}
</code></pre><p>Example:</p><pre><code>{{if eq .priority &quot;critical&quot;}} &quot;#C91010&quot; {{else if eq .priority &quot;high&quot;}} &quot;#EB4C21&quot; {{else}} &quot;#FFB449&quot; {{end}}
</code></pre><p>There is also a set of binary comparison operators defined as functions:</p><pre><code>eq
	Returns the boolean truth of arg1 == arg2
ne
	Returns the boolean truth of arg1 != arg2
lt
	Returns the boolean truth of arg1 &lt; arg2
le
	Returns the boolean truth of arg1 &lt;= arg2
gt
	Returns the boolean truth of arg1 &gt; arg2
ge
	Returns the boolean truth of arg1 &gt;= arg2
</code></pre><div class=book-expand><label><div class="book-expand-head flex justify-between"><span>A more complete example for Slack message</span>
<span>...</span></div><input type=checkbox class=hidden><div class="book-expand-content markdown-inner"><pre><code>{
    &quot;blocks&quot;: [
        {
            &quot;type&quot;: &quot;section&quot;,
            &quot;text&quot;: {
                &quot;type&quot;: &quot;mrkdwn&quot;,
                &quot;text&quot;: &quot;【test201】Alerting:\n&lt;http://localhost:8000/#/alerting/alert/{{.event_id}}|{{.title}}&gt; &lt;@username&gt;&quot;
            }
        },
        {
            &quot;type&quot;: &quot;section&quot;,
            &quot;text&quot;: {
                &quot;type&quot;: &quot;mrkdwn&quot;,
                &quot;text&quot;: &quot;*Timestamp:* {{.issue_timestamp | datetime}}&quot;
            }
        }
    ],
    &quot;attachments&quot;: [
        {{range .results}}
        {
            &quot;color&quot;: {{if eq .priority &quot;critical&quot;}} &quot;#C91010&quot; {{else if eq .priority &quot;high&quot;}} &quot;#EB4C21&quot; {{else}} &quot;#FFB449&quot; {{end}},
            &quot;blocks&quot;: [
                {
                    &quot;type&quot;: &quot;section&quot;,
                    &quot;fields&quot;: [
                        {
                            &quot;type&quot;: &quot;mrkdwn&quot;,
                            &quot;text&quot;: &quot;*Cluster:* {{index .group_values 0}}&quot;
                        },
                        {
                            &quot;type&quot;: &quot;mrkdwn&quot;,
                            &quot;text&quot;: &quot;*Node:* {{index .group_values 1}}&quot;
                        },
                        {
                            &quot;type&quot;: &quot;mrkdwn&quot;,
                            &quot;text&quot;: &quot;*Threshold:* {{index .threshold 0}}&quot;
                        },
                        {
                            &quot;type&quot;: &quot;mrkdwn&quot;,
                            &quot;text&quot;: &quot;*Priority:* {{.priority}}&quot;
                        },
                        {
                            &quot;type&quot;: &quot;mrkdwn&quot;,
                            &quot;text&quot;: &quot;*Monitoring value:* {{.result_value}}&quot;
                        },
                        {
                            &quot;type&quot;: &quot;mrkdwn&quot;,
                            &quot;text&quot;: &quot;*Disk usage:* {{.relation_values.a | format_bytes 2 | to_upper}}&quot;
                        }
                    ]
                }
            ]
        },
        {{end}}
    ]
}
</code></pre></div></label></div><p>More template syntax
<a href=https://pkg.go.dev/text/template#pkg-overview>Click me</a></p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/infinilabs/console/edit/main/docs/content.en/docs/reference/alerting/variables.md target=_blank rel=noopener><img src=/console/main/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div><div class="flex align-center footer">©INFINI.LTD, All Rights Reserved.</div><script>(function(h,o,t,j,a,r){h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};h._hjSettings={hjid:2567416,hjsv:6};a=o.getElementsByTagName('head')[0];r=o.createElement('script');r.async=1;r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;a.appendChild(r);})(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-RJPTVP614C"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','G-RJPTVP614C');</script><script type=text/javascript>var _smartsupp=_smartsupp||{};_smartsupp.key='691ff544d18a237005a011a7290b839d8fe811a4';window.smartsupp||(function(d){var s,c,o=smartsupp=function(){o._.push(arguments)};o._=[];s=d.getElementsByTagName('script')[0];c=d.createElement('script');c.type='text/javascript';c.charset='utf-8';c.async=true;c.src='https://www.smartsuppchat.com/loader.js?';s.parentNode.insertBefore(c,s);})(document);</script></div></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents><ul><li><a href=#template-variables>Template variables</a><ul><li><a href=#introduction>Introduction</a></li><li><a href=#variables>Variables</a><ul><li><a href=#variable-usage-example>Variable usage example</a></li></ul></li><li><a href=#template-functions>Template functions</a></li><li><a href=#common-template-syntax>Common Template Syntax</a></li></ul></li></ul></nav></aside></main><script src=/console/main/js/asciinema-player.js></script></body></html>