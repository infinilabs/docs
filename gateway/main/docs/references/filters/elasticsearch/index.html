<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.79.1"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="elasticsearch #  Description #  The elasticsearch filter is used to forward requests to back-end Elasticsearch clusters.
Configuration Example #  Before using the elasticsearch filter, define one Elasticsearch cluster configuration node as follows:
elasticsearch: - name: prod enabled: true endpoint: http://192.168.3.201:9200 The following shows a flow configuration example.
flow: - name: cache_first filter: - elasticsearch: elasticsearch: prod The preceding example forwards requests to the prod cluster.
Automatic Update #  For a large cluster that contains many nodes, it is almost impossible to configure all back-end nodes individually."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="elasticsearch"><meta property="og:description" content="elasticsearch #  Description #  The elasticsearch filter is used to forward requests to back-end Elasticsearch clusters.
Configuration Example #  Before using the elasticsearch filter, define one Elasticsearch cluster configuration node as follows:
elasticsearch: - name: prod enabled: true endpoint: http://192.168.3.201:9200 The following shows a flow configuration example.
flow: - name: cache_first filter: - elasticsearch: elasticsearch: prod The preceding example forwards requests to the prod cluster.
Automatic Update #  For a large cluster that contains many nodes, it is almost impossible to configure all back-end nodes individually."><meta property="og:type" content="article"><meta property="og:url" content="/gateway/main/docs/references/filters/elasticsearch/"><title>elasticsearch | INFINI Gateway</title><link rel=manifest href=/gateway/main/manifest.json><link rel=icon href=/gateway/main/favicon.png type=image/x-icon><link rel=alternate hreflang=zh href=/gateway/main/zh/docs/references/filters/elasticsearch/ title=elasticsearch><link rel=stylesheet href=/gateway/main/book.min.d80e87b12a4b49d9913d0bdd98bd83b7a44988be784760ba15522b377313dcf9.css integrity="sha256-2A6HsSpLSdmRPQvdmL2Dt6RJiL54R2C6FVIrN3MT3Pk="><script defer src=/gateway/main/js/jquery-2.x.min.js></script><script defer src=/gateway/main/js/doc.js></script></head><body><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=/gateway/main><img src=/gateway/main/img/logo-en.svg alt=Logo></a></h2><div id=searchbox style=margin-bottom:10px></div><div class=heading><select class=version-selector>
<option value>main (latest)</option>
<option value=v1.29.2>v1.29.2</option>
<option value=v1.29.1>v1.29.1</option>
<option value=v1.29.0>v1.29.0</option>
<option value=v1.28.2>v1.28.2</option>
<option value=v1.28.0>v1.28.0</option>
<option value=v1.27.0>v1.27.0</option>
<option value=v1.26.1>v1.26.1</option></select></div><ul><li><a href=/gateway/main/docs/overview/>Overview</a><ul></ul></li><li><input type=checkbox id=section-f1b7c1b2e5dd43526e77637c475d35b8 class=toggle>
<label for=section-f1b7c1b2e5dd43526e77637c475d35b8 class="flex justify-between"><a>Getting Started</a>
<span>▾</span></label><ul><li><a href=/gateway/main/docs/getting-started/install/>Installing the Gateway</a></li><li><a href=/gateway/main/docs/getting-started/configuration/>Configuring the Gateway</a></li><li><a href=/gateway/main/docs/getting-started/docker/>Container Deployment</a></li><li><a href=/gateway/main/docs/getting-started/helm/>Kubernetes Deployment</a></li><li><a href=/gateway/main/docs/getting-started/optimization/>System Optimization</a></li><li><a href=/gateway/main/docs/getting-started/benchmark/>Benchmark Testing</a></li></ul></li><li><input type=checkbox id=section-fb088f8a9be33f7f260ad2b140bb7bdc class=toggle checked>
<label for=section-fb088f8a9be33f7f260ad2b140bb7bdc class="flex justify-between"><a>References</a>
<span>▾</span></label><ul><li><a href=/gateway/main/docs/references/entry/>Service Entry</a></li><li><a href=/gateway/main/docs/references/router/>Service Router</a></li><li><a href=/gateway/main/docs/references/flow/>Handling Flow</a></li><li><a href=/gateway/main/docs/references/elasticsearch/>Elasticsearch</a></li><li><a href=/gateway/main/docs/references/context/>Request Context</a></li><li><input type=checkbox id=section-a53d1bd91095fa28aef70cee327a5121 class=toggle checked>
<label for=section-a53d1bd91095fa28aef70cee327a5121 class="flex justify-between"><a href=/gateway/main/docs/references/filters/>Online Filter</a>
<span>▾</span></label><ul><li><a href=/gateway/main/docs/references/filters/echo/>echo</a></li><li><a href=/gateway/main/docs/references/filters/auto_generate_doc_id/>auto_generate_doc_id</a></li><li><a href=/gateway/main/docs/references/filters/basic_auth/>basic_auth</a></li><li><a href=/gateway/main/docs/references/filters/bulk_request_mutate/>bulk_request_mutate</a></li><li><a href=/gateway/main/docs/references/filters/bulk_request_throttle/>bulk_request_throttle</a></li><li><a href=/gateway/main/docs/references/filters/bulk_reshuffle/>bulk_reshuffle</a></li><li><a href=/gateway/main/docs/references/filters/bulk_response_process/>bulk_response_process</a></li><li><a href=/gateway/main/docs/references/filters/cache/>cache</a></li><li><a href=/gateway/main/docs/references/filters/clone/>clone</a></li><li><a href=/gateway/main/docs/references/filters/context_filter/>context_filter</a></li><li><a href=/gateway/main/docs/references/filters/context_limiter/>context_limiter</a></li><li><a href=/gateway/main/docs/references/filters/context_parse/>context_parse</a></li><li><a href=/gateway/main/docs/references/filters/context_regex_replace/>context_regex_replace</a></li><li><a href=/gateway/main/docs/references/filters/context_switch/>context_switch</a></li><li><a href=/gateway/main/docs/references/filters/date_range_precision_tuning/>date_range_precision_tuning</a></li><li><a href=/gateway/main/docs/references/filters/drop/>drop</a></li><li><a href=/gateway/main/docs/references/filters/dump/>dump</a></li><li><a href=/gateway/main/docs/references/filters/elasticsearch/ class=active>elasticsearch</a></li><li><a href=/gateway/main/docs/references/filters/elasticsearch_health_check/>elasticsearch_health_check</a></li><li><a href=/gateway/main/docs/references/filters/flow/>flow</a></li><li><a href=/gateway/main/docs/references/filters/hash_mod/>hash_mod</a></li><li><a href=/gateway/main/docs/references/filters/http/>http</a></li><li><a href=/gateway/main/docs/references/filters/javascript/>javascript</a></li><li><a href=/gateway/main/docs/references/filters/ldap_auth/>ldap_auth</a></li><li><a href=/gateway/main/docs/references/filters/logging/>logging</a></li><li><a href=/gateway/main/docs/references/filters/queue/>queue</a></li><li><a href=/gateway/main/docs/references/filters/ratio/>ratio</a></li><li><a href=/gateway/main/docs/references/filters/record/>record</a></li><li><a href=/gateway/main/docs/references/filters/redirect/>redirect</a></li><li><a href=/gateway/main/docs/references/filters/redis_pubsub/>redis_pubsub</a></li><li><a href=/gateway/main/docs/references/filters/request_api_key_filter/>request_api_key_filter</a></li><li><a href=/gateway/main/docs/references/filters/request_api_key_limiter/>request_api_key_limiter</a></li><li><a href=/gateway/main/docs/references/filters/request_body_json_del/>request_body_json_del</a></li><li><a href=/gateway/main/docs/references/filters/request_body_json_set/>request_body_json_set</a></li><li><a href=/gateway/main/docs/references/filters/request_body_regex_replace/>request_body_regex_replace</a></li><li><a href=/gateway/main/docs/references/filters/request_client_ip_filter/>request_client_ip_filter</a></li><li><a href=/gateway/main/docs/references/filters/request_client_ip_limiter/>request_client_ip_limiter</a></li><li><a href=/gateway/main/docs/references/filters/request_header_filter/>request_header_filter</a></li><li><a href=/gateway/main/docs/references/filters/request_host_filter/>request_host_filter</a></li><li><a href=/gateway/main/docs/references/filters/request_host_limiter/>request_host_limiter</a></li><li><a href=/gateway/main/docs/references/filters/request_method_filter/>request_method_filter</a></li><li><a href=/gateway/main/docs/references/filters/request_path_filter/>request_path_filter</a></li><li><a href=/gateway/main/docs/references/filters/request_path_limiter/>request_path_limiter</a></li><li><a href=/gateway/main/docs/references/filters/request_reshuffle/>request_reshuffle</a></li><li><a href=/gateway/main/docs/references/filters/request_user_filter/>request_user_filter</a></li><li><a href=/gateway/main/docs/references/filters/request_user_limiter/>request_user_limiter</a></li><li><a href=/gateway/main/docs/references/filters/response_body_regex_replace/>response_body_regex_replace</a></li><li><a href=/gateway/main/docs/references/filters/response_header_filter/>response_header_filter</a></li><li><a href=/gateway/main/docs/references/filters/response_header_format/>response_header_format</a></li><li><a href=/gateway/main/docs/references/filters/response_status_filter/>response_status_filter</a></li><li><a href=/gateway/main/docs/references/filters/retry_limiter/>retry_limiter</a></li><li><a href=/gateway/main/docs/references/filters/rewrite_to_bulk/>rewrite_to_bulk</a></li><li><a href=/gateway/main/docs/references/filters/sample/>sample</a></li><li><a href=/gateway/main/docs/references/filters/set_basic_auth/>set_basic_auth</a></li><li><a href=/gateway/main/docs/references/filters/set_context/>set_context</a></li><li><a href=/gateway/main/docs/references/filters/set_hostname/>set_hostname</a></li><li><a href=/gateway/main/docs/references/filters/set_request_header/>set_request_header</a></li><li><a href=/gateway/main/docs/references/filters/set_request_query_args/>set_request_query_args</a></li><li><a href=/gateway/main/docs/references/filters/set_response/>set_response</a></li><li><a href=/gateway/main/docs/references/filters/set_response_header/>set_response_header</a></li><li><a href=/gateway/main/docs/references/filters/sleep/>sleep</a></li><li><a href=/gateway/main/docs/references/filters/switch/>switch</a></li><li><a href=/gateway/main/docs/references/filters/translog/>translog</a></li></ul></li><li><input type=checkbox id=section-82db29a871579194764c352cfff582f2 class=toggle>
<label for=section-82db29a871579194764c352cfff582f2 class="flex justify-between"><a href=/gateway/main/docs/references/processors/>Offline Processor</a>
<span>▾</span></label><ul><li><a href=/gateway/main/docs/references/processors/bulk_indexing/>bulk_indexing</a></li><li><a href=/gateway/main/docs/references/processors/consumer/>consumer</a></li><li><a href=/gateway/main/docs/references/processors/dag/>dag</a></li><li><a href=/gateway/main/docs/references/processors/dump_hash/>dump_hash</a></li><li><a href=/gateway/main/docs/references/processors/flow_replay/>flow_replay</a></li><li><a href=/gateway/main/docs/references/processors/flow_runner/>flow_runner</a></li><li><a href=/gateway/main/docs/references/processors/index_diff/>index_diff</a></li><li><a href=/gateway/main/docs/references/processors/indexing_merge/>indexing_merge</a></li><li><a href=/gateway/main/docs/references/processors/json_indexing/>json_indexing</a></li><li><a href=/gateway/main/docs/references/processors/merge_to_bulk/>merge_to_bulk</a></li><li><a href=/gateway/main/docs/references/processors/queue_consumer/>queue_consumer</a></li><li><a href=/gateway/main/docs/references/processors/replay/>replay</a></li><li><a href=/gateway/main/docs/references/processors/smtp/>smtp</a></li></ul></li><li><input type=checkbox id=section-3de6688eceb9f20db2f0270adccf76e2 class=toggle>
<label for=section-3de6688eceb9f20db2f0270adccf76e2 class="flex justify-between"><a>Functional Component</a>
<span>▾</span></label><ul><li><a href=/gateway/main/docs/references/modules/floating_ip/>Floating IP</a></li><li><a href=/gateway/main/docs/references/modules/force_merge/>Index Segment Merging</a></li></ul></li><li><a href=/gateway/main/docs/references/config/>Other Configurations</a></li></ul></li><li><input type=checkbox id=section-391bcaab6cc03bd87e3373752bfd390e class=toggle>
<label for=section-391bcaab6cc03bd87e3373752bfd390e class="flex justify-between"><a>Tutorials</a>
<span>▾</span></label><ul><li><a href=/gateway/main/docs/tutorial/log4j2_filtering/>Protect Elasticsearch from Apache Log4j Vulnerability</a></li><li><a href=/gateway/main/docs/tutorial/online_query_rewrite/>Rewrite Your Elasticsearch Requests OnTheFly</a></li><li><a href=/gateway/main/docs/tutorial/request-logging/>Elasticsearch Search Requests Analysis/Audit</a></li><li><a href=/gateway/main/docs/tutorial/index_diff/>Document-Level Index Diff Between Two Elasticsearch Clusters</a></li><li><a href=/gateway/main/docs/tutorial/proxy_kibana/>Adding a TLS and Basic Security for Kibana</a></li><li><a href=/gateway/main/docs/tutorial/proxy_elasticsearch/>Enable HTTPS/TLS + Basic Auth for Elasticsearch easily</a></li><li><a href=/gateway/main/docs/tutorial/fix_count_in_search_response/>Handle Count Structure of Different Elasticsearch Versions</a></li><li><a href=/gateway/main/docs/tutorial/es-hadoop_integration/>Integrate with Elasticsearch-Hadoop</a></li><li><a href=/gateway/main/docs/tutorial/prometheus_integration/>Integration with Prometheus</a></li><li><a href=/gateway/main/docs/tutorial/routing_to_cluser_by_index/>Unified access indexes from different clusters in Kibana</a></li><li><a href=/gateway/main/docs/tutorial/path_rewrite_by_javascript/>Use JavaScript for complex query rewriting</a></li></ul></li><li><input type=checkbox id=section-7e4e95606453deb85437b78d9c3f2d72 class=toggle>
<label for=section-7e4e95606453deb85437b78d9c3f2d72 class="flex justify-between"><a href=/gateway/main/docs/user-cases/>User Cases</a>
<span>▾</span></label><ul><li><a href=/gateway/main/docs/user-cases/stories/indexing_speedup_for_big_index_rebuild/>How an Insurance Group Improved the Indexing Speed by 200x Times</a></li><li><a href=/gateway/main/docs/user-cases/stories/a_cross_region_cluster_access_locality/>Nearest Cluster Access Across Two Cloud Providers</a></li></ul></li><li><a href=/gateway/main/docs/troubleshooting/>FAQs</a><ul></ul></li><li><a href=/gateway/main/docs/release-notes/>Release Notes</a><ul></ul></li></ul><ul><li><a href=https://github.com/infinilabs/gateway target=_blank rel=noopener>Github</a></li></ul><div class=book-languages tabindex=0 aria-haspopup=true><ul><li class="flex align-center"><img src=/gateway/main/svg/translate.svg class=book-icon alt=Languages>
English</li></ul><ul class=book-languages-list><li class=active><a href=/gateway/main/ class="flex align-center"><img src=/gateway/main/svg/translate.svg class=book-icon alt=Languages>
English</a></li><li><a href=/gateway/main/zh/docs/references/filters/elasticsearch/ class="flex align-center"><img src=/gateway/main/svg/translate.svg class=book-icon alt=Languages>
简体中文</a></li></ul></div></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/gateway/main/svg/menu.svg class=book-icon alt=Menu></label>
<strong>elasticsearch</strong>
<label for=toc-control><img src=/gateway/main/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#elasticsearch>elasticsearch</a><ul><li><a href=#description>Description</a></li><li><a href=#configuration-example>Configuration Example</a></li><li><a href=#automatic-update>Automatic Update</a></li><li><a href=#setting-the-weight>Setting the Weight</a></li><li><a href=#filtering-node>Filtering Node</a></li><li><a href=#parameter-description>Parameter Description</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=elasticsearch>elasticsearch
<a class=anchor href=#elasticsearch>#</a></h1><h2 id=description>Description
<a class=anchor href=#description>#</a></h2><p>The elasticsearch filter is used to forward requests to back-end Elasticsearch clusters.</p><h2 id=configuration-example>Configuration Example
<a class=anchor href=#configuration-example>#</a></h2><p>Before using the elasticsearch filter, define one Elasticsearch cluster configuration node as follows:</p><pre><code>elasticsearch:
- name: prod
  enabled: true
  endpoint: http://192.168.3.201:9200
</code></pre><p>The following shows a flow configuration example.</p><pre><code>flow:
  - name: cache_first
    filter:
      - elasticsearch:
          elasticsearch: prod
</code></pre><p>The preceding example forwards requests to the <code>prod</code> cluster.</p><h2 id=automatic-update>Automatic Update
<a class=anchor href=#automatic-update>#</a></h2><p>For a large cluster that contains many nodes, it is almost impossible to configure all back-end nodes individually. Instead, you only need to enable auto-discovery of back-end nodes on the Elasticsearch module. See the following example.</p><pre><code>elasticsearch:
- name: prod
  enabled: true
  endpoint: http://192.168.3.201:9200
  discovery:
    enabled: true
    refresh:
      enabled: true
  basic_auth:
    username: elastic
    password: pass
</code></pre><p>Then, enable automatic configuration refresh on the filter. Now, all back-end nodes can be accessed and the status of online and offline nodes is automatically updated. See the following example.</p><pre><code>flow:
  - name: cache_first
    filter:
      - elasticsearch:
          elasticsearch: prod
          refresh:
            enabled: true
            interval: 30s
</code></pre><h2 id=setting-the-weight>Setting the Weight
<a class=anchor href=#setting-the-weight>#</a></h2><p>If there are many back-end clusters, INFINI Gateway allows you to set different access weights for different nodes. See the following configuration example.</p><pre><code>flow:
  - name: cache_first
    filter:
      - elasticsearch:
          elasticsearch: prod
          balancer: weight
          refresh:
            enabled: true
            interval: 30s
          weights:
            - host: 192.168.3.201:9200
              weight: 10
            - host: 192.168.3.202:9200
              weight: 20
            - host: 192.168.3.203:9200
              weight: 30
</code></pre><p>In the above example, the traffic destined for an Elasticsearch cluster is distributed to the <code>203</code>, <code>202</code>, and <code>201</code> nodes at a ratio of <code>3：2：1</code>.</p><h2 id=filtering-node>Filtering Node
<a class=anchor href=#filtering-node>#</a></h2><p>INFINI Gateway can also filter requests based on node IP address, label, or role to avoid sending requests to specific nodes, such as the master and cold nodes. See the following configuration example.</p><pre><code>flow:
  - name: cache_first
    filter:
      - elasticsearch:
          elasticsearch: prod
          balancer: weight
          refresh:
            enabled: true
            interval: 30s
          filter:
            hosts:
              exclude:
                - 192.168.3.201:9200
              include:
                - 192.168.3.202:9200
                - 192.168.3.203:9200
            tags:
              exclude:
                - temp: cold
              include:
                - disk: ssd
            roles:
              exclude:
                - master
              include:
                - data
                - ingest
</code></pre><h2 id=parameter-description>Parameter Description
<a class=anchor href=#parameter-description>#</a></h2><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>elasticsearch</td><td>string</td><td>Name of an Elasticsearch cluster</td></tr><tr><td>max_connection_per_node</td><td>int</td><td>Maximum number of TCP connections that are allowed to access each node of an Elasticsearch cluster. The default value is <code>5000</code>.</td></tr><tr><td>max_response_size</td><td>int</td><td>Maximum size of the message body returned in response to an Elasticsearch request. The default value is <code>100*1024*1024</code>.</td></tr><tr><td>max_conn_wait_timeout</td><td>duration</td><td>Timeout duration for Elasticsearch to wait for an idle connection. The default value is <code>30s</code>.</td></tr><tr><td>max_idle_conn_duration</td><td>duration</td><td>Idle duration of an Elasticsearch connection. The default value is <code>30s</code>.</td></tr><tr><td>max_retry_times</td><td>duration</td><td>Limit the number of retries on Elasticsearch errors, default <code>0</code></td></tr><tr><td>max_conn_duration</td><td>duration</td><td>Duration of an Elasticsearch connection. The default value is <code>0s</code>.</td></tr><tr><td>timeout</td><td>duration</td><td>Timeout duration to wait for the response. The default value is <code>30s</code>. Warning: <code>timeout</code> will not terminate the request, it will continue in the background. If response time is too long and the connection pool is full, try to set <code>read_timeout</code>.</td></tr><tr><td>dial_timeout</td><td>duration</td><td>Timeout duration to wait for dialing the remote host. The default value is <code>3s</code>.</td></tr><tr><td>read_timeout</td><td>duration</td><td>Read timeout duration of an Elasticsearch request. The default value is <code>0s</code>.</td></tr><tr><td>write_timeout</td><td>duration</td><td>Write timeout duration of an Elasticsearch request. The default value is <code>0s</code>.</td></tr><tr><td>read_buffer_size</td><td>int</td><td>Read cache size for an Elasticsearch request. The default value is <code>4096*4</code>.</td></tr><tr><td>write_buffer_size</td><td>int</td><td>Write cache size for an Elasticsearch request. The default value is <code>4096*4</code>.</td></tr><tr><td>tls_insecure_skip_verify</td><td>bool</td><td>Whether to ignore TLS certificate verification of an Elasticsearch cluster. The default value is <code>true</code>.</td></tr><tr><td>max_retry_times</td><td>int</td><td>The maximum number of retry attempts for requests. The default value is <code>5</code>.</td></tr><tr><td>retry_on_backend_failure</td><td>bool</td><td>Whether to retry requests when backend failures occur. Used to switch to another available host. The default value is <code>true</code>.</td></tr><tr><td>retry_readonly_on_backend_failure</td><td>bool</td><td>Whether to retry readonly requests (e.g., <code>GET</code>/<code>HEAD</code>) on backend failure. This is generally safe as it does not risk data duplication or corruption. The default value is <code>true</code>.</td></tr><tr><td>retry_writes_on_backend_failure</td><td>bool</td><td>Whether to retry write operations (e.g., <code>POST</code>/<code>PUT</code>/<code>PATCH</code>) on backend failure. Use with caution, as retries can lead to duplicate writes. Recommended to use with additional filters. The default value is <code>false</code>.</td></tr><tr><td>retry_on_backend_busy</td><td>bool</td><td>Whether to retry requests when the backend is busy with status code <code>429</code>. This helps handle temporary overloads or throttling. The default value is <code>false</code>.</td></tr><tr><td>retry_delay_in_ms</td><td>int</td><td>The delay in milliseconds between retry attempts. Does not apply when switching hosts. The default value is <code>1000</code>.</td></tr><tr><td>balancer</td><td>string</td><td>Load balancing algorithm of a back-end Elasticsearch node. Currently, only the <code>weight</code> weight-based algorithm is available.</td></tr><tr><td>skip_metadata_enrich</td><td>bool</td><td>Whether to skip the processing of Elasticsearch metadata and not add <code>X-*</code> metadata to the header of the request and response</td></tr><tr><td>refresh.enable</td><td>bool</td><td>Whether to enable automatic refresh of node status changes, to perceive changes in the back-end Elasticsearch topology</td></tr><tr><td>refresh.interval</td><td>int</td><td>Interval of the node status refresh</td></tr><tr><td>weights</td><td>array</td><td>Priority of a back-end node. A node with a larger weight is assigned a higher proportion of request forwarding.</td></tr><tr><td>filter</td><td>object</td><td>Filtering rules for back-end Elasticsearch nodes. Rules can be set to forward requests to a specific node.</td></tr><tr><td>filter.hosts</td><td>object</td><td>Filtering based on the access address of Elasticsearch</td></tr><tr><td>filter.tags</td><td>object</td><td>Filtering based on the label of Elasticsearch</td></tr><tr><td>filter.roles</td><td>object</td><td>Filtering based on the role of Elasticsearch</td></tr><tr><td>filter.*.exclude</td><td>array</td><td>Conditions for excluding. Any matched node is denied handling requests as a proxy.</td></tr><tr><td>filter.*.include</td><td>array</td><td>Elasticsearch nodes that meet conditions are allowed to handle requests as a proxy. When the exclude parameter is not configured but include is configured, any condition in include must be met. Otherwise, the node is not allowed to handle requests as a proxy.</td></tr></tbody></table></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div class=book-languages tabindex=0 aria-haspopup=true><ul><li class="flex align-center"><img src=/gateway/main/svg/translate.svg class=book-icon alt=Languages>
English</li></ul><ul class=book-languages-list><li class=active><a href=/gateway/main/ class="flex align-center"><img src=/gateway/main/svg/translate.svg class=book-icon alt=Languages>
English</a></li><li><a href=/gateway/main/zh/docs/references/filters/elasticsearch/ class="flex align-center"><img src=/gateway/main/svg/translate.svg class=book-icon alt=Languages>
简体中文</a></li></ul></div><div><a class="flex align-center" href=https://github.com/infinilabs/gateway/edit/main/docs/content.en/docs/references/filters/elasticsearch.md target=_blank rel=noopener><img src=/gateway/main/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div><div class="flex align-center footer">©INFINI.LTD, All Rights Reserved.</div><script>(function(h,o,t,j,a,r){h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};h._hjSettings={hjid:2567416,hjsv:6};a=o.getElementsByTagName('head')[0];r=o.createElement('script');r.async=1;r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;a.appendChild(r);})(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-RJPTVP614C"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','G-RJPTVP614C');</script><script type=text/javascript>var _smartsupp=_smartsupp||{};_smartsupp.key='691ff544d18a237005a011a7290b839d8fe811a4';window.smartsupp||(function(d){var s,c,o=smartsupp=function(){o._.push(arguments)};o._=[];s=d.getElementsByTagName('script')[0];c=d.createElement('script');c.type='text/javascript';c.charset='utf-8';c.async=true;c.src='https://www.smartsuppchat.com/loader.js?';s.parentNode.insertBefore(c,s);})(document);</script></div><script type=module>
    import { searchbox } from "https://coco.infini.cloud/integration/cvn0g9ehpcehvsthrakg/widget";
    searchbox({container: "#searchbox"});
</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents><ul><li><a href=#elasticsearch>elasticsearch</a><ul><li><a href=#description>Description</a></li><li><a href=#configuration-example>Configuration Example</a></li><li><a href=#automatic-update>Automatic Update</a></li><li><a href=#setting-the-weight>Setting the Weight</a></li><li><a href=#filtering-node>Filtering Node</a></li><li><a href=#parameter-description>Parameter Description</a></li></ul></li></ul></nav></aside></main></body></html>