<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.79.1"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Other Configurations #  Advanced Usage #  Templates #  Example:
configs.template: - name: &#34;es_gw1&#34; path: ./sample-configs/config_template.tpl variable: name: &#34;es_gw1&#34; binding_host: &#34;0.0.0.0:8000&#34; tls_on_entry: true elasticsearch_endpoint: &#34;http://localhost:9200&#34;    Name Type Description     configs.template array Configuration templates, can specify multiple templates with corresponding parameters   configs.template[].name string Name of the configuration   configs.template[].path string Template configuration path   configs.template[].variable map Template parameter settings, variables in the template are used as $[[variable_name]]    Environment Variables #  The Gateway supports the use of environment variables for flexible parameter control within the configuration."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="Other Configurations"><meta property="og:description" content="Other Configurations #  Advanced Usage #  Templates #  Example:
configs.template: - name: &#34;es_gw1&#34; path: ./sample-configs/config_template.tpl variable: name: &#34;es_gw1&#34; binding_host: &#34;0.0.0.0:8000&#34; tls_on_entry: true elasticsearch_endpoint: &#34;http://localhost:9200&#34;    Name Type Description     configs.template array Configuration templates, can specify multiple templates with corresponding parameters   configs.template[].name string Name of the configuration   configs.template[].path string Template configuration path   configs.template[].variable map Template parameter settings, variables in the template are used as $[[variable_name]]    Environment Variables #  The Gateway supports the use of environment variables for flexible parameter control within the configuration."><meta property="og:type" content="article"><meta property="og:url" content="/gateway/main/docs/references/config/"><title>Other Configurations | INFINI Gateway</title><link rel=manifest href=/gateway/main/manifest.json><link rel=icon href=/gateway/main/favicon.png type=image/x-icon><link rel=alternate hreflang=zh href=/gateway/main/zh/docs/references/config/ title=其它配置><link rel=stylesheet href=/gateway/main/book.min.d80e87b12a4b49d9913d0bdd98bd83b7a44988be784760ba15522b377313dcf9.css integrity="sha256-2A6HsSpLSdmRPQvdmL2Dt6RJiL54R2C6FVIrN3MT3Pk="><script defer src=/gateway/main/js/jquery-2.x.min.js></script><script defer src=/gateway/main/js/doc.js></script></head><body><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=/gateway/main><img src=/gateway/main/img/logo-en.svg alt=Logo></a></h2><div id=searchbox style=margin-bottom:10px;outline:none></div><div class=heading><select class=version-selector>
<option value>main (latest)</option>
<option value=v1.29.7>v1.29.7</option>
<option value=v1.29.6>v1.29.6</option>
<option value=v1.29.4>v1.29.4</option>
<option value=v1.29.3>v1.29.3</option>
<option value=v1.29.2>v1.29.2</option>
<option value=v1.29.1>v1.29.1</option>
<option value=v1.29.0>v1.29.0</option>
<option value=v1.28.2>v1.28.2</option>
<option value=v1.28.0>v1.28.0</option>
<option value=v1.27.0>v1.27.0</option>
<option value=v1.26.1>v1.26.1</option></select></div><ul><li><a href=/gateway/main/docs/overview/>Overview</a><ul></ul></li><li><input type=checkbox id=section-f1b7c1b2e5dd43526e77637c475d35b8 class=toggle>
<label for=section-f1b7c1b2e5dd43526e77637c475d35b8 class="flex justify-between"><a>Getting Started</a>
<span>▾</span></label><ul><li><a href=/gateway/main/docs/getting-started/install/>Installing the Gateway</a></li><li><a href=/gateway/main/docs/getting-started/configuration/>Configuring the Gateway</a></li><li><a href=/gateway/main/docs/getting-started/docker/>Container Deployment</a></li><li><a href=/gateway/main/docs/getting-started/helm/>Kubernetes Deployment</a></li><li><a href=/gateway/main/docs/getting-started/optimization/>System Optimization</a></li><li><a href=/gateway/main/docs/getting-started/benchmark/>Benchmark Testing</a></li></ul></li><li><input type=checkbox id=section-fb088f8a9be33f7f260ad2b140bb7bdc class=toggle checked>
<label for=section-fb088f8a9be33f7f260ad2b140bb7bdc class="flex justify-between"><a>References</a>
<span>▾</span></label><ul><li><a href=/gateway/main/docs/references/entry/>Service Entry</a></li><li><a href=/gateway/main/docs/references/router/>Service Router</a></li><li><a href=/gateway/main/docs/references/flow/>Handling Flow</a></li><li><a href=/gateway/main/docs/references/elasticsearch/>Elasticsearch</a></li><li><a href=/gateway/main/docs/references/context/>Request Context</a></li><li><input type=checkbox id=section-a53d1bd91095fa28aef70cee327a5121 class=toggle>
<label for=section-a53d1bd91095fa28aef70cee327a5121 class="flex justify-between"><a href=/gateway/main/docs/references/filters/>Online Filter</a>
<span>▾</span></label><ul><li><a href=/gateway/main/docs/references/filters/echo/>echo</a></li><li><a href=/gateway/main/docs/references/filters/auto_generate_doc_id/>auto_generate_doc_id</a></li><li><a href=/gateway/main/docs/references/filters/basic_auth/>basic_auth</a></li><li><a href=/gateway/main/docs/references/filters/bulk_request_mutate/>bulk_request_mutate</a></li><li><a href=/gateway/main/docs/references/filters/bulk_request_throttle/>bulk_request_throttle</a></li><li><a href=/gateway/main/docs/references/filters/bulk_reshuffle/>bulk_reshuffle</a></li><li><a href=/gateway/main/docs/references/filters/bulk_response_process/>bulk_response_process</a></li><li><a href=/gateway/main/docs/references/filters/cache/>cache</a></li><li><a href=/gateway/main/docs/references/filters/clone/>clone</a></li><li><a href=/gateway/main/docs/references/filters/context_filter/>context_filter</a></li><li><a href=/gateway/main/docs/references/filters/context_limiter/>context_limiter</a></li><li><a href=/gateway/main/docs/references/filters/context_parse/>context_parse</a></li><li><a href=/gateway/main/docs/references/filters/context_regex_replace/>context_regex_replace</a></li><li><a href=/gateway/main/docs/references/filters/context_switch/>context_switch</a></li><li><a href=/gateway/main/docs/references/filters/date_range_precision_tuning/>date_range_precision_tuning</a></li><li><a href=/gateway/main/docs/references/filters/drop/>drop</a></li><li><a href=/gateway/main/docs/references/filters/dump/>dump</a></li><li><a href=/gateway/main/docs/references/filters/elasticsearch/>elasticsearch</a></li><li><a href=/gateway/main/docs/references/filters/elasticsearch_health_check/>elasticsearch_health_check</a></li><li><a href=/gateway/main/docs/references/filters/flow/>flow</a></li><li><a href=/gateway/main/docs/references/filters/hash_mod/>hash_mod</a></li><li><a href=/gateway/main/docs/references/filters/http/>http</a></li><li><a href=/gateway/main/docs/references/filters/javascript/>javascript</a></li><li><a href=/gateway/main/docs/references/filters/ldap_auth/>ldap_auth</a></li><li><a href=/gateway/main/docs/references/filters/logging/>logging</a></li><li><a href=/gateway/main/docs/references/filters/queue/>queue</a></li><li><a href=/gateway/main/docs/references/filters/ratio/>ratio</a></li><li><a href=/gateway/main/docs/references/filters/record/>record</a></li><li><a href=/gateway/main/docs/references/filters/redirect/>redirect</a></li><li><a href=/gateway/main/docs/references/filters/redis_pubsub/>redis_pubsub</a></li><li><a href=/gateway/main/docs/references/filters/request_api_key_filter/>request_api_key_filter</a></li><li><a href=/gateway/main/docs/references/filters/request_api_key_limiter/>request_api_key_limiter</a></li><li><a href=/gateway/main/docs/references/filters/request_body_json_del/>request_body_json_del</a></li><li><a href=/gateway/main/docs/references/filters/request_body_json_set/>request_body_json_set</a></li><li><a href=/gateway/main/docs/references/filters/request_body_regex_replace/>request_body_regex_replace</a></li><li><a href=/gateway/main/docs/references/filters/request_client_ip_filter/>request_client_ip_filter</a></li><li><a href=/gateway/main/docs/references/filters/request_client_ip_limiter/>request_client_ip_limiter</a></li><li><a href=/gateway/main/docs/references/filters/request_header_filter/>request_header_filter</a></li><li><a href=/gateway/main/docs/references/filters/request_host_filter/>request_host_filter</a></li><li><a href=/gateway/main/docs/references/filters/request_host_limiter/>request_host_limiter</a></li><li><a href=/gateway/main/docs/references/filters/request_method_filter/>request_method_filter</a></li><li><a href=/gateway/main/docs/references/filters/request_path_filter/>request_path_filter</a></li><li><a href=/gateway/main/docs/references/filters/request_path_limiter/>request_path_limiter</a></li><li><a href=/gateway/main/docs/references/filters/request_reshuffle/>request_reshuffle</a></li><li><a href=/gateway/main/docs/references/filters/request_user_filter/>request_user_filter</a></li><li><a href=/gateway/main/docs/references/filters/request_user_limiter/>request_user_limiter</a></li><li><a href=/gateway/main/docs/references/filters/response_body_regex_replace/>response_body_regex_replace</a></li><li><a href=/gateway/main/docs/references/filters/response_header_filter/>response_header_filter</a></li><li><a href=/gateway/main/docs/references/filters/response_header_format/>response_header_format</a></li><li><a href=/gateway/main/docs/references/filters/response_status_filter/>response_status_filter</a></li><li><a href=/gateway/main/docs/references/filters/retry_limiter/>retry_limiter</a></li><li><a href=/gateway/main/docs/references/filters/rewrite_to_bulk/>rewrite_to_bulk</a></li><li><a href=/gateway/main/docs/references/filters/sample/>sample</a></li><li><a href=/gateway/main/docs/references/filters/set_basic_auth/>set_basic_auth</a></li><li><a href=/gateway/main/docs/references/filters/set_context/>set_context</a></li><li><a href=/gateway/main/docs/references/filters/set_hostname/>set_hostname</a></li><li><a href=/gateway/main/docs/references/filters/set_request_header/>set_request_header</a></li><li><a href=/gateway/main/docs/references/filters/set_request_query_args/>set_request_query_args</a></li><li><a href=/gateway/main/docs/references/filters/set_response/>set_response</a></li><li><a href=/gateway/main/docs/references/filters/set_response_header/>set_response_header</a></li><li><a href=/gateway/main/docs/references/filters/sleep/>sleep</a></li><li><a href=/gateway/main/docs/references/filters/switch/>switch</a></li><li><a href=/gateway/main/docs/references/filters/translog/>translog</a></li></ul></li><li><input type=checkbox id=section-82db29a871579194764c352cfff582f2 class=toggle>
<label for=section-82db29a871579194764c352cfff582f2 class="flex justify-between"><a href=/gateway/main/docs/references/processors/>Offline Processor</a>
<span>▾</span></label><ul><li><a href=/gateway/main/docs/references/processors/bulk_indexing/>bulk_indexing</a></li><li><a href=/gateway/main/docs/references/processors/consumer/>consumer</a></li><li><a href=/gateway/main/docs/references/processors/dag/>dag</a></li><li><a href=/gateway/main/docs/references/processors/dump_hash/>dump_hash</a></li><li><a href=/gateway/main/docs/references/processors/flow_replay/>flow_replay</a></li><li><a href=/gateway/main/docs/references/processors/flow_runner/>flow_runner</a></li><li><a href=/gateway/main/docs/references/processors/index_diff/>index_diff</a></li><li><a href=/gateway/main/docs/references/processors/indexing_merge/>indexing_merge</a></li><li><a href=/gateway/main/docs/references/processors/json_indexing/>json_indexing</a></li><li><a href=/gateway/main/docs/references/processors/merge_to_bulk/>merge_to_bulk</a></li><li><a href=/gateway/main/docs/references/processors/queue_consumer/>queue_consumer</a></li><li><a href=/gateway/main/docs/references/processors/replay/>replay</a></li><li><a href=/gateway/main/docs/references/processors/smtp/>smtp</a></li></ul></li><li><input type=checkbox id=section-3de6688eceb9f20db2f0270adccf76e2 class=toggle>
<label for=section-3de6688eceb9f20db2f0270adccf76e2 class="flex justify-between"><a>Functional Component</a>
<span>▾</span></label><ul><li><a href=/gateway/main/docs/references/modules/floating_ip/>Floating IP</a></li><li><a href=/gateway/main/docs/references/modules/force_merge/>Index Segment Merging</a></li></ul></li><li><a href=/gateway/main/docs/references/config/ class=active>Other Configurations</a></li></ul></li><li><input type=checkbox id=section-391bcaab6cc03bd87e3373752bfd390e class=toggle>
<label for=section-391bcaab6cc03bd87e3373752bfd390e class="flex justify-between"><a>Tutorials</a>
<span>▾</span></label><ul><li><a href=/gateway/main/docs/tutorial/log4j2_filtering/>Protect Elasticsearch from Apache Log4j Vulnerability</a></li><li><a href=/gateway/main/docs/tutorial/online_query_rewrite/>Rewrite Your Elasticsearch Requests OnTheFly</a></li><li><a href=/gateway/main/docs/tutorial/request-logging/>Elasticsearch Search Requests Analysis/Audit</a></li><li><a href=/gateway/main/docs/tutorial/index_diff/>Document-Level Index Diff Between Two Elasticsearch Clusters</a></li><li><a href=/gateway/main/docs/tutorial/proxy_kibana/>Adding a TLS and Basic Security for Kibana</a></li><li><a href=/gateway/main/docs/tutorial/proxy_elasticsearch/>Enable HTTPS/TLS + Basic Auth for Elasticsearch easily</a></li><li><a href=/gateway/main/docs/tutorial/fix_count_in_search_response/>Handle Count Structure of Different Elasticsearch Versions</a></li><li><a href=/gateway/main/docs/tutorial/es-hadoop_integration/>Integrate with Elasticsearch-Hadoop</a></li><li><a href=/gateway/main/docs/tutorial/prometheus_integration/>Integration with Prometheus</a></li><li><a href=/gateway/main/docs/tutorial/routing_to_cluser_by_index/>Unified access indexes from different clusters in Kibana</a></li><li><a href=/gateway/main/docs/tutorial/path_rewrite_by_javascript/>Use JavaScript for complex query rewriting</a></li></ul></li><li><input type=checkbox id=section-7e4e95606453deb85437b78d9c3f2d72 class=toggle>
<label for=section-7e4e95606453deb85437b78d9c3f2d72 class="flex justify-between"><a href=/gateway/main/docs/user-cases/>User Cases</a>
<span>▾</span></label><ul><li><a href=/gateway/main/docs/user-cases/stories/indexing_speedup_for_big_index_rebuild/>How an Insurance Group Improved the Indexing Speed by 200x Times</a></li><li><a href=/gateway/main/docs/user-cases/stories/a_cross_region_cluster_access_locality/>Nearest Cluster Access Across Two Cloud Providers</a></li></ul></li><li><a href=/gateway/main/docs/troubleshooting/>FAQs</a><ul></ul></li><li><a href=/gateway/main/docs/release-notes/>Release Notes</a><ul></ul></li></ul><ul><li><a href=https://github.com/infinilabs/gateway target=_blank rel=noopener>Github</a></li></ul><div class=book-languages tabindex=0 aria-haspopup=true><ul><li class="flex align-center"><img src=/gateway/main/svg/translate.svg class=book-icon alt=Languages>
English</li></ul><ul class=book-languages-list><li class=active><a href=/gateway/main/ class="flex align-center"><img src=/gateway/main/svg/translate.svg class=book-icon alt=Languages>
English</a></li><li><a href=/gateway/main/zh/docs/references/config/ class="flex align-center"><img src=/gateway/main/svg/translate.svg class=book-icon alt=Languages>
简体中文</a></li></ul></div></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/gateway/main/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Other Configurations</strong>
<label for=toc-control><img src=/gateway/main/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#other-configurations>Other Configurations</a><ul><li><a href=#advanced-usage>Advanced Usage</a><ul><li><a href=#templates>Templates</a></li><li><a href=#environment-variables>Environment Variables</a></li></ul></li><li><a href=#path>Path</a></li><li><a href=#log>Log</a></li><li><a href=#configs>Configs</a></li><li><a href=#local-disk-queue>Local Disk Queue</a></li><li><a href=#s3>S3</a></li><li><a href=#kafka>Kafka</a></li><li><a href=#badger>Badger</a></li><li><a href=#resource-limitations>Resource Limitations</a></li><li><a href=#network-configuration>Network Configuration</a></li><li><a href=#tls-configuration>TLS Configuration</a><ul><li><a href=#auto-issue-tls-certificates>Auto-Issue TLS Certificates</a></li></ul></li><li><a href=#api>API</a></li><li><a href=#metrics>Metrics</a></li><li><a href=#node>Node</a></li><li><a href=#misc>Misc</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=other-configurations>Other Configurations
<a class=anchor href=#other-configurations>#</a></h1><h2 id=advanced-usage>Advanced Usage
<a class=anchor href=#advanced-usage>#</a></h2><h3 id=templates>Templates
<a class=anchor href=#templates>#</a></h3><p>Example:</p><pre><code>configs.template:
  - name: &quot;es_gw1&quot;
    path: ./sample-configs/config_template.tpl
    variable:
      name: &quot;es_gw1&quot;
      binding_host: &quot;0.0.0.0:8000&quot;
      tls_on_entry: true
      elasticsearch_endpoint: &quot;http://localhost:9200&quot;
</code></pre><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>configs.template</td><td>array</td><td>Configuration templates, can specify multiple templates with corresponding parameters</td></tr><tr><td>configs.template[].name</td><td>string</td><td>Name of the configuration</td></tr><tr><td>configs.template[].path</td><td>string</td><td>Template configuration path</td></tr><tr><td>configs.template[].variable</td><td>map</td><td>Template parameter settings, variables in the template are used as <code>$[[variable_name]]</code></td></tr></tbody></table><h3 id=environment-variables>Environment Variables
<a class=anchor href=#environment-variables>#</a></h3><p>The Gateway supports the use of environment variables for flexible parameter control within the configuration.</p><p>First, define the default values for environment variables in the configuration, as follows:</p><pre><code>env:
  PROD_ES_ENDPOINT: http://localhost:9200
  PROD_ES_USER: elastic
  PROD_ES_PASS: password
</code></pre><p>Then, you can use environment variables in the configuration using the following syntax:</p><pre><code>elasticsearch:
  - name: prod
    enabled: true
    endpoints:
      - $[[env.PROD_ES_ENDPOINT]]
    discovery:
      enabled: false
    basic_auth:
      username: $[[env.PROD_ES_USER]]
      password: $[[env.PROD_ES_PASS]]
</code></pre><p>Note that external environment variables take precedence over internal environment variable settings in the configuration. For example, to override environment variables when starting the program, use the following command:</p><pre><code>PROD_ES_ENDPOINT=http://1.1.1.1:9200 LOGGING_ES_ENDPOINT=http://2.2.2.2:9201 ./bin/gateway
</code></pre><h2 id=path>Path
<a class=anchor href=#path>#</a></h2><p>Common configuration for paths, including data, log and config directories.</p><p>Example:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>path.data</span>: <span style=color:#ae81ff>data</span>
<span style=color:#f92672>path.logs</span>: <span style=color:#ae81ff>log</span>
<span style=color:#f92672>path.configs</span>: <span style=color:#e6db74>&#34;config&#34;</span>
</code></pre></div><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>path.data</td><td>string</td><td>Data directory, default is <code>data</code>.</td></tr><tr><td>path.logs</td><td>string</td><td>Log directory, default is <code>log</code>.</td></tr><tr><td>path.configs</td><td>string</td><td>Configuration directory, default is <code>config</code>.</td></tr></tbody></table><h2 id=log>Log
<a class=anchor href=#log>#</a></h2><p>The configuration for logs.</p><p>Example:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>log</span>:
  <span style=color:#f92672>level</span>: <span style=color:#ae81ff>info</span>
  <span style=color:#f92672>debug</span>: <span style=color:#66d9ef>false</span>
</code></pre></div><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>log.level</td><td>string</td><td>Log level, default is <code>info</code>.</td></tr><tr><td>log.debug</td><td>bool</td><td>Whether to enable debug mode. When enabled, the program exits immediately in case of an exception, printing the complete stack trace. Used for debugging and fault localization. Default is <code>false</code>, do not enable in production as it may result in data loss.</td></tr><tr><td>log.format</td><td>bool</td><td>Log format, default is <code>[%Date(01-02) %Time] [%LEV] [%File:%Line] %Msg%n</code>.
<a href=https://github.com/cihub/seelog/wiki/Format-reference>Format References</a>.</td></tr><tr><td>log.disable_file_output</td><td>bool</td><td>Whether to disable local file log output, default is <code>false</code>. Use this in container environments if you don&rsquo;t want local log output.</td></tr></tbody></table><h2 id=configs>Configs
<a class=anchor href=#configs>#</a></h2><p>Manage the configuration.</p><p>Example:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>configs</span>:
  <span style=color:#f92672>auto_reload</span>: <span style=color:#66d9ef>true</span>
  <span style=color:#f92672>managed</span>: <span style=color:#66d9ef>true</span>
  <span style=color:#f92672>panic_on_config_error</span>: <span style=color:#66d9ef>false</span> 
  <span style=color:#f92672>interval</span>: <span style=color:#e6db74>&#34;1s&#34;</span>
  <span style=color:#f92672>servers</span>:
    - <span style=color:#e6db74>&#34;http://localhost:9000&#34;</span>
  <span style=color:#f92672>max_backup_files</span>: <span style=color:#ae81ff>5</span>
  <span style=color:#f92672>soft_delete</span>: <span style=color:#66d9ef>false</span>
  <span style=color:#f92672>tls</span>:
    <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>false</span>
    <span style=color:#f92672>cert_file</span>: <span style=color:#ae81ff>/etc/ssl.crt</span>
    <span style=color:#f92672>key_file</span>: <span style=color:#ae81ff>/etc/ssl.key</span>
    <span style=color:#f92672>skip_insecure_verify</span>: <span style=color:#66d9ef>false</span>
</code></pre></div><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>configs.auto_reload</td><td>bool</td><td>Whether it supports dynamically loading configuration files under the path.configs path.</td></tr><tr><td>configs.managed</td><td>bool</td><td>Whether configuration management by the configuration center is supported.</td></tr><tr><td>configs.servers</td><td>[]string</td><td>Configuration center address</td></tr><tr><td>configs.interval</td><td>string</td><td>Configuration synchronization interval</td></tr><tr><td>configs.soft_delete</td><td>bool</td><td>The deletion of configuration files is soft deletion, default is <code>true</code>.</td></tr><tr><td>configs.panic_on_config_error</td><td>bool</td><td>If there is an error in configuration loading, it will crash directly, default <code>true</code></td></tr><tr><td>configs.max_backup_files</td><td>int</td><td>The maximum number of configuration file backups, default <code>10</code>.</td></tr><tr><td>configs.valid_config_extensions</td><td>[]string</td><td>Valid configuration file suffixes, default <code>.tpl</code>, <code>.json</code>, <code>.yml</code>, <code>.yaml</code></td></tr><tr><td>configs.tls</td><td>object</td><td>TLS Configuration (Please refer to
<a href=/gateway/main/#tls-configuration>TLS</a>)</td></tr><tr><td>configs.always_register_after_restart</td><td>bool</td><td>Whether to register after the instance is restarted. When the instance runs in the K8S environment, this parameter needs to be enabled.</td></tr><tr><td>configs.allow_generated_metrics_tasks</td><td>bool</td><td>Allow automatic generation of collection metrics tasks.</td></tr><tr><td>configs.ignored_path</td><td>[]string</td><td>Paths of configuration files that need to be ignored.</td></tr></tbody></table><h2 id=local-disk-queue>Local Disk Queue
<a class=anchor href=#local-disk-queue>#</a></h2><p>Example:</p><pre><code>disk_queue:
  upload_to_s3: true
  s3:
    server: my_blob_store
    location: cn-beijing-001
    bucket: infini-store
  max_bytes_per_file: 102400
</code></pre><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>disk_queue.min_msg_size</td><td>int</td><td>Minimum byte limit for a single message sent to the queue, default is <code>1</code></td></tr><tr><td>disk_queue.max_msg_size</td><td>int</td><td>Maximum byte limit for a single message sent to the queue, default is <code>104857600</code> (100MB)</td></tr><tr><td>disk_queue.sync_every_records</td><td>int</td><td>Synchronization interval in terms of the number of records, default is <code>1000</code></td></tr><tr><td>disk_queue.sync_timeout_in_ms</td><td>int</td><td>Synchronization interval in milliseconds, default is <code>1000</code> milliseconds</td></tr><tr><td>disk_queue.max_bytes_per_file</td><td>int</td><td>Maximum size of a single file in the local disk queue. If exceeded, a new file is created. Default is <code>104857600</code> (100MB)</td></tr><tr><td>disk_queue.max_used_bytes</td><td>int</td><td>Maximum allowed storage space used by the local disk queue</td></tr><tr><td>disk_queue.warning_free_bytes</td><td>int</td><td>Free storage space threshold for disk space warnings, default is <code>10737418240</code> (10GB)</td></tr><tr><td>disk_queue.reserved_free_bytes</td><td>int</td><td>Protected value for free storage space on disk. Once reached, the disk becomes read-only and no more writes are allowed. Default is <code>5368709120</code> (5GB)</td></tr><tr><td>disk_queue.auto_skip_corrupted_file</td><td>bool</td><td>Whether to automatically skip corrupted disk files, default is <code>true</code></td></tr><tr><td>disk_queue.upload_to_s3</td><td>bool</td><td>Whether to upload disk queue files to S3, default is <code>false</code></td></tr><tr><td>disk_queue.s3.async</td><td>bool</td><td>Whether to asynchronously upload to the S3 server</td></tr><tr><td>disk_queue.s3.server</td><td>string</td><td>S3 server ID</td></tr><tr><td>disk_queue.s3.location</td><td>string</td><td>S3 server location</td></tr><tr><td>disk_queue.s3.bucket</td><td>string</td><td>S3 server bucket</td></tr><tr><td>disk_queue.retention.max_num_of_local_files</td><td>int</td><td>Maximum number of files to retain locally after uploading to S3, default is <code>3</code></td></tr><tr><td>disk_queue.compress.segment.enabled</td><td>bool</td><td>Whether to enable file-level compression, default is <code>false</code></td></tr></tbody></table><h2 id=s3>S3
<a class=anchor href=#s3>#</a></h2><p>Example:</p><pre><code>s3:
  my_blob_store:
    endpoint: &quot;192.168.3.188:9000&quot;
    access_key: &quot;admin&quot;
    access_secret: &quot;gogoaminio&quot;
</code></pre><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>s3.[id].endpoint</td><td>string</td><td>S3 server address</td></tr><tr><td>s3.[id].access_key</td><td>string</td><td>S3 server key</td></tr><tr><td>s3.[id].access_secret</td><td>string</td><td>S3 server secret key</td></tr><tr><td>s3.[id].token</td><td>string</td><td>S3 server token information</td></tr><tr><td>s3.[id].ssl</td><td>bool</td><td>Whether S3 server uses TLS</td></tr><tr><td>s3.[id].skip_insecure_verify</td><td>bool</td><td>Whether to skip TLS certificate verification for S3 server</td></tr></tbody></table><h2 id=kafka>Kafka
<a class=anchor href=#kafka>#</a></h2><p>The Gateway supports using distributed Kafka as a backend queue. The related parameters are as follows.</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>kafka.enabled</td><td>bool</td><td>Whether the Kafka module is enabled</td></tr><tr><td>kafka.default</td><td>bool</td><td>Whether the Kafka module is the default queue implementation</td></tr><tr><td>kafka.num_of_partition</td><td>int</td><td>Default number of partitions, default is <code>1</code></td></tr><tr><td>kafka.num_of_replica</td><td>int</td><td>Default number of replicas, default is <code>1</code></td></tr><tr><td>kafka.producer_batch_max_bytes</td><td>int</td><td>Maximum size of the batch to submit, default is <code>50 * 1024 * 1024</code></td></tr><tr><td>kafka.max_buffered_records</td><td>int</td><td>Maximum number of buffered request records, default is <code>10000</code></td></tr><tr><td>kafka.manual_flushing</td><td>bool</td><td>Whether to enable manual flushing, default is <code>false</code></td></tr><tr><td>kafka.brokers</td><td>[]string</td><td>Server address information</td></tr><tr><td>kafka.username</td><td>string</td><td>User information</td></tr><tr><td>kafka.password</td><td>string</td><td>Password information</td></tr></tbody></table><h2 id=badger>Badger
<a class=anchor href=#badger>#</a></h2><p>Badger is a lightweight disk-based KeyValue storage engine used by the Gateway to implement the KV module.</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>badger.enabled</td><td>bool</td><td>Whether to enable the KV module implemented by Badger, default is <code>true</code></td></tr><tr><td>badger.single_bucket_mode</td><td>bool</td><td>Whether Badger module uses single bucket mode, default is <code>true</code></td></tr><tr><td>badger.sync_writes</td><td>bool</td><td>Whether Badger module uses synchronous writes, default is <code>false</code></td></tr><tr><td>badger.mem_table_size</td><td>int64</td><td>Size of the in-memory table used by Badger module, default is <code>10 * 1024 * 1024</code> (10485760)</td></tr><tr><td>badger.value_log_file_size</td><td>int64</td><td>Size of Badger module&rsquo;s log files, default is <code>1&lt;&lt;30 - 1</code> (1GB)</td></tr><tr><td>badger.value_log_max_entries</td><td>int64</td><td>Maximum number of log entries for Badger module, default is <code>1000000</code></td></tr><tr><td>badger.value_threshold</td><td>int64</td><td>Value threshold for Badger module&rsquo;s log files, default is <code>1048576</code> (1MB)</td></tr><tr><td>badger.num_mem_tables</td><td>int64</td><td>Number of in-memory tables for Badger module, default is <code>1</code></td></tr><tr><td>badger.num_level0_tables</td><td>int64</td><td>Number of Level0 in-memory tables for Badger module, default is <code>1</code></td></tr></tbody></table><h2 id=resource-limitations>Resource Limitations
<a class=anchor href=#resource-limitations>#</a></h2><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>resource_limit.cpu.max_num_of_cpus</td><td>int</td><td>Maximum number of CPU cores allowed to be used, Linux only with <code>taskset</code> command available.</td></tr><tr><td>resource_limit.cpu.affinity_list</td><td>string</td><td>CPU affinity settings, e.g., <code>0,2,5</code> or <code>0-8</code>, Linux only with <code>taskset</code> command available.</td></tr><tr><td>resource_limit.memory.max_in_bytes</td><td>string</td><td>the max size of Memory to use, soft limit only</td></tr></tbody></table><h2 id=network-configuration>Network Configuration
<a class=anchor href=#network-configuration>#</a></h2><p>Common network configurations.</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>*.network.host</td><td>string</td><td>Network address listened to by the service, for example, <code>192.168.3.10</code></td></tr><tr><td>*.network.port</td><td>int</td><td>Port address listened to by the service, for example, <code>8000</code></td></tr><tr><td>*.network.binding</td><td>string</td><td>Network binding address listened to by the service, for example, <code>0.0.0.0:8000</code></td></tr><tr><td>*.network.publish</td><td>string</td><td>External access address listened to by the service, for example, <code>192.168.3.10:8000</code></td></tr><tr><td>*.network.reuse_port</td><td>bool</td><td>Whether to reuse the network port for multi-process port sharing</td></tr><tr><td>*.network.skip_occupied_port</td><td>bool</td><td>Whether to automatically skip occupied ports</td></tr></tbody></table><h2 id=tls-configuration>TLS Configuration
<a class=anchor href=#tls-configuration>#</a></h2><p>Example:</p><pre><code>web:
  enabled: true
  embedding_api: true
  network:
    binding: $[[env.SERV_BINDING]]
  tls:
    enabled: false
    skip_insecure_verify: true
    default_domain: &quot;api.coco.rs&quot;
    auto_issue:
      enabled: true
      email: &quot;hello@infinilabs.com&quot;
      include_default_domain: true
      domains:
        - &quot;www.coco.rs&quot;
      provider:
        tencent_dns:
          secret_id: $[[keystore.TENCENT_DNS_ID]] #./bin/coco keystore add TENCENT_DNS_ID
          secret_key: $[[keystore.TENCENT_DNS_KEY]] #./bin/coco keystore add TENCENT_DNS_KEY
</code></pre><p>Common TLS configurations.</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>*.tls.enabled</td><td>bool</td><td>Whether TLS secure transmission is enabled or not, can auto generate cert files if not specified any cert files</td></tr><tr><td>*.tls.ca_file</td><td>string</td><td>Path to the public CA cert of the TLS security certificate</td></tr><tr><td>*.tls.cert_file</td><td>string</td><td>Path to the public key of the TLS security certificate</td></tr><tr><td>*.tls.key_file</td><td>string</td><td>Path to the private key of the TLS security certificate</td></tr><tr><td>*.tls.skip_insecure_verify</td><td>bool</td><td>Whether to ignore TLS certificate verification</td></tr><tr><td>*.tls.default_domain</td><td>string</td><td>The default domain for auto generated certs</td></tr><tr><td>*.tls.skip_domain_verify</td><td>bool</td><td>Whether to skip domain verify or not</td></tr><tr><td>*.tls.client_session_cache_size</td><td>int</td><td>Set the max cache of ClientSessionState entries for TLS session resumption</td></tr></tbody></table><h3 id=auto-issue-tls-certificates>Auto-Issue TLS Certificates
<a class=anchor href=#auto-issue-tls-certificates>#</a></h3><p>Both the <code>api</code> and <code>web</code> modules support auto-issuing TLS certificates via Let&rsquo;s Encrypt. This feature can be configured under <code>*.tls.auto_issue</code>:</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>*.tls.auto_issue.enabled</td><td>bool</td><td>Enables automatic issuance of TLS certificates using Let&rsquo;s Encrypt.</td></tr><tr><td>*.tls.auto_issue.path</td><td>string</td><td>Directory path where auto-issued certificates should be stored.</td></tr><tr><td>*.tls.auto_issue.email</td><td>string</td><td>Contact email for certificate issuance notifications and expiry warnings.</td></tr><tr><td>*.tls.auto_issue.include_default_domain</td><td>bool</td><td>Whether to include the <code>default_domain</code> in the list of domains for auto-issuance.</td></tr><tr><td>*.tls.auto_issue.domains</td><td>[]string</td><td>List of additional domains for which TLS certificates will be issued.</td></tr><tr><td>*.tls.auto_issue.provider</td><td>object</td><td>Specifies the DNS provider configuration for DNS-based domain validation.</td></tr></tbody></table><h4 id=dns-provider-configuration-tencent-cloud>DNS Provider Configuration (Tencent Cloud)
<a class=anchor href=#dns-provider-configuration-tencent-cloud>#</a></h4><p>To support DNS-based verification with Tencent Cloud, configure the following within <code>*.tls.auto_issue.provider</code>:</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>tencent_dns.secret_id</code></td><td>string</td><td>Secret ID for Tencent Cloud API access.</td></tr><tr><td><code>tencent_dns.secret_key</code></td><td>string</td><td>Secret Key for Tencent Cloud API access.</td></tr></tbody></table><p>To set up and store the Tencent Cloud credentials securely, use the keystore commands:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>./bin/coco keystore add TENCENT_DNS_ID
./bin/coco keystore add TENCENT_DNS_KEY
</code></pre></div><h2 id=api>API
<a class=anchor href=#api>#</a></h2><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>api.enabled</td><td>bool</td><td>Whether to enable the API module, default is <code>true</code></td></tr><tr><td>api.network</td><td>object</td><td>Networking config, please refer to common network configuration section</td></tr><tr><td>api.tls</td><td>object</td><td>TLS config, please refer to common TLS configuration section</td></tr><tr><td>api.security</td><td>object</td><td>Security config for API module</td></tr><tr><td>api.security.enabled</td><td>bool</td><td>Whether security is enabled or not</td></tr><tr><td>api.security.username</td><td>string</td><td>The username for security</td></tr><tr><td>api.security.password</td><td>string</td><td>The password for security</td></tr><tr><td>api.cors.allowed_origins</td><td>[]string</td><td>The list of origins a cross-domain request can be executed from</td></tr><tr><td>api.websocket</td><td>object</td><td>Websocket config for API module</td></tr><tr><td>api.websocket.enabled</td><td>object</td><td>Whether websocket is enabled or not</td></tr><tr><td>api.websocket.permitted_hosts</td><td>[]string</td><td>The list of hosts that permitted to access the websocket service</td></tr><tr><td>api.websocket.skip_host_verify</td><td>bool</td><td>Whether websocket skip verify the host or not</td></tr></tbody></table><h2 id=metrics>Metrics
<a class=anchor href=#metrics>#</a></h2><p>Configure collection of system metrics.</p><p>Example:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>metrics</span>:
  <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>true</span>
  <span style=color:#f92672>queue</span>: <span style=color:#ae81ff>metrics</span>
  <span style=color:#f92672>network</span>:
    <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>true</span>
    <span style=color:#f92672>summary</span>: <span style=color:#66d9ef>true</span>
    <span style=color:#f92672>details</span>: <span style=color:#66d9ef>true</span>
  <span style=color:#f92672>memory</span>:
    <span style=color:#f92672>metrics</span>:
      - <span style=color:#ae81ff>swap</span>
      - <span style=color:#ae81ff>memory</span>
  <span style=color:#f92672>disk</span>:
    <span style=color:#f92672>metrics</span>:
      - <span style=color:#ae81ff>iops</span>
      - <span style=color:#ae81ff>usage</span>
  <span style=color:#f92672>cpu</span>:
    <span style=color:#f92672>metrics</span>:
      - <span style=color:#ae81ff>idle</span>
      - <span style=color:#ae81ff>system</span>
      - <span style=color:#ae81ff>user</span>
      - <span style=color:#ae81ff>iowait</span>
      - <span style=color:#ae81ff>load</span>
</code></pre></div><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>enabled</td><td>bool</td><td>Whether to enable system metrics collection, default <code>true</code>.</td></tr><tr><td>queue</td><td>string</td><td>The queue name of metrics collection.</td></tr><tr><td>network</td><td>object</td><td>The Configuration of network metrics collection.</td></tr><tr><td>network.enabled</td><td>bool</td><td>Whether to enable network metrics collection, default <code>true</code>.</td></tr><tr><td>network.summary</td><td>bool</td><td>Whether to collect network summary metircs.</td></tr><tr><td>network.sockets</td><td>bool</td><td>Whether to collect network socket metircs.</td></tr><tr><td>network.throughput</td><td>bool</td><td>Whether to collect network throughput metircs.</td></tr><tr><td>network.details</td><td>bool</td><td>Whether to accumulate network IO metrics.</td></tr><tr><td>network.interfaces</td><td>[]string</td><td>Specify the network interfaces to be collected, and all interfaces are default.</td></tr><tr><td>memory</td><td>object</td><td>The Configuration of memory metrics collection.</td></tr><tr><td>memory.enabled</td><td>bool</td><td>Whether to enable memory metrics collection, default <code>true</code></td></tr><tr><td>memory.metrics</td><td>[]string</td><td>Specified collection metrics, optional <code>swap</code>，<code>memory</code></td></tr><tr><td>disk</td><td>object</td><td>The Configuration of disk metrics collection.</td></tr><tr><td>disk.metrics</td><td>[]string</td><td>Specified collection metrics, optional <code>usage</code>，<code>iops</code></td></tr><tr><td>cpu</td><td>object</td><td>The Configuration of cpu metrics collection.</td></tr><tr><td>cpu.metrics</td><td>[]string</td><td>Specified collection metrics, optional <code>idle</code>，<code>system</code>，<code>user</code>，<code>iowait</code>，<code>load</code></td></tr></tbody></table><h2 id=node>Node
<a class=anchor href=#node>#</a></h2><p>The configuration of node.</p><p>Example:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plain data-lang=plain>node:
  major_ip_pattern: &#34;.*&#34;
  labels:
    env: dev
  tags:
    - linux
    - x86
    - es7
</code></pre></div><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>major_ip_pattern</td><td>string</td><td>If there are multiple IPs on the host, use a pattern to control which IP is the primary one, which is used for reporting during registration.</td></tr><tr><td>labels</td><td>map</td><td>Custom lables</td></tr><tr><td>tags</td><td>[]string</td><td>Custom tags</td></tr></tbody></table><h2 id=misc>Misc
<a class=anchor href=#misc>#</a></h2><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>preference.pipeline_enabled_by_default</td><td>map</td><td>Whether pipelines are enabled by default. If set to <code>false</code>, each pipeline must be explicitly configured with <code>enabled</code> set to <code>true</code></td></tr><tr><td>allow_multi_instance</td><td>bool</td><td>Whether is allowed to start multiple instances with the same program, default <code>false</code></td></tr><tr><td>skip_instance_detect</td><td>bool</td><td>Whether is allowed to skip instance detection, default <code>false</code></td></tr><tr><td>max_num_of_instances</td><td>int</td><td>The maximum number of instances that the same program can run simultaneously, default <code>5</code></td></tr></tbody></table></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div class=book-languages tabindex=0 aria-haspopup=true><ul><li class="flex align-center"><img src=/gateway/main/svg/translate.svg class=book-icon alt=Languages>
English</li></ul><ul class=book-languages-list><li class=active><a href=/gateway/main/ class="flex align-center"><img src=/gateway/main/svg/translate.svg class=book-icon alt=Languages>
English</a></li><li><a href=/gateway/main/zh/docs/references/config/ class="flex align-center"><img src=/gateway/main/svg/translate.svg class=book-icon alt=Languages>
简体中文</a></li></ul></div><div><a class="flex align-center" href=https://github.com/infinilabs/gateway/edit/main/docs/content.en/docs/references/config.md target=_blank rel=noopener><img src=/gateway/main/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div><div class="flex align-center footer">©INFINI.LTD, All Rights Reserved.</div><script async src="https://www.googletagmanager.com/gtag/js?id=G-RJPTVP614C"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','G-RJPTVP614C');</script><script type=text/javascript>var _smartsupp=_smartsupp||{};_smartsupp.key='691ff544d18a237005a011a7290b839d8fe811a4';window.smartsupp||(function(d){var s,c,o=smartsupp=function(){o._.push(arguments)};o._=[];s=d.getElementsByTagName('script')[0];c=d.createElement('script');c.type='text/javascript';c.charset='utf-8';c.async=true;c.src='https://www.smartsuppchat.com/loader.js?';s.parentNode.insertBefore(c,s);})(document);</script></div><script type=module>
    import { searchbox } from "https://coco.infini.cloud/integration/cvn0g9ehpcehvsthrakg/widget";
    searchbox({container: "#searchbox"});
</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents><ul><li><a href=#other-configurations>Other Configurations</a><ul><li><a href=#advanced-usage>Advanced Usage</a><ul><li><a href=#templates>Templates</a></li><li><a href=#environment-variables>Environment Variables</a></li></ul></li><li><a href=#path>Path</a></li><li><a href=#log>Log</a></li><li><a href=#configs>Configs</a></li><li><a href=#local-disk-queue>Local Disk Queue</a></li><li><a href=#s3>S3</a></li><li><a href=#kafka>Kafka</a></li><li><a href=#badger>Badger</a></li><li><a href=#resource-limitations>Resource Limitations</a></li><li><a href=#network-configuration>Network Configuration</a></li><li><a href=#tls-configuration>TLS Configuration</a><ul><li><a href=#auto-issue-tls-certificates>Auto-Issue TLS Certificates</a></li></ul></li><li><a href=#api>API</a></li><li><a href=#metrics>Metrics</a></li><li><a href=#node>Node</a></li><li><a href=#misc>Misc</a></li></ul></li></ul></nav></aside></main></body></html>