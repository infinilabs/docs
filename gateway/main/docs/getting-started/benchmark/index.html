<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.79.1"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Benchmark Testing #  You are advised to use the Elasticsearch-dedicated benchmark tool Loadgen to test the gateway performance.
Highlights of Loadgen:
 Robust performance Lightweight and dependency-free Random selection of template-based parameters High concurrency Balanced traffic control at the benchmark end Validate server responses.   Download URL: http://release.infinilabs.com/loadgen/
 Loadgen #  Loadgen is easy to use. After the tool is downloaded and decompressed, two files are obtained: one executable program and one configuration file loadgen."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="Benchmark Testing"><meta property="og:description" content="Benchmark Testing #  You are advised to use the Elasticsearch-dedicated benchmark tool Loadgen to test the gateway performance.
Highlights of Loadgen:
 Robust performance Lightweight and dependency-free Random selection of template-based parameters High concurrency Balanced traffic control at the benchmark end Validate server responses.   Download URL: http://release.infinilabs.com/loadgen/
 Loadgen #  Loadgen is easy to use. After the tool is downloaded and decompressed, two files are obtained: one executable program and one configuration file loadgen."><meta property="og:type" content="article"><meta property="og:url" content="/gateway/main/docs/getting-started/benchmark/"><title>Benchmark Testing | INFINI Gateway</title><link rel=manifest href=/gateway/main/manifest.json><link rel=icon href=/gateway/main/favicon.png type=image/x-icon><link rel=alternate hreflang=zh href=/gateway/main/zh/docs/getting-started/benchmark/ title=性能测试><link rel=stylesheet href=/gateway/main/book.min.d80e87b12a4b49d9913d0bdd98bd83b7a44988be784760ba15522b377313dcf9.css integrity="sha256-2A6HsSpLSdmRPQvdmL2Dt6RJiL54R2C6FVIrN3MT3Pk="><script defer src=/gateway/main/js/jquery-2.x.min.js></script><script defer src=/gateway/main/js/doc.js></script></head><body><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=/gateway/main><img src=/gateway/main/img/logo-en.svg alt=Logo></a></h2><div class=heading><select class=version-selector>
<option value>main (latest)</option>
<option value=v1.28.2>v1.28.2</option>
<option value=v1.28.0>v1.28.0</option>
<option value=v1.27.0>v1.27.0</option>
<option value=v1.26.1>v1.26.1</option></select></div><ul><li><a href=/gateway/main/docs/overview/>Overview</a><ul></ul></li><li><input type=checkbox id=section-f1b7c1b2e5dd43526e77637c475d35b8 class=toggle checked>
<label for=section-f1b7c1b2e5dd43526e77637c475d35b8 class="flex justify-between"><a>Getting Started</a>
<span>▾</span></label><ul><li><a href=/gateway/main/docs/getting-started/install/>Installing the Gateway</a></li><li><a href=/gateway/main/docs/getting-started/configuration/>Configuring the Gateway</a></li><li><a href=/gateway/main/docs/getting-started/docker/>Container Deployment</a></li><li><a href=/gateway/main/docs/getting-started/helm/>Kubernetes Deployment</a></li><li><a href=/gateway/main/docs/getting-started/optimization/>System Optimization</a></li><li><a href=/gateway/main/docs/getting-started/benchmark/ class=active>Benchmark Testing</a></li></ul></li><li><input type=checkbox id=section-fb088f8a9be33f7f260ad2b140bb7bdc class=toggle>
<label for=section-fb088f8a9be33f7f260ad2b140bb7bdc class="flex justify-between"><a>References</a>
<span>▾</span></label><ul><li><a href=/gateway/main/docs/references/entry/>Service Entry</a></li><li><a href=/gateway/main/docs/references/router/>Service Router</a></li><li><a href=/gateway/main/docs/references/flow/>Handling Flow</a></li><li><a href=/gateway/main/docs/references/elasticsearch/>Elasticsearch</a></li><li><a href=/gateway/main/docs/references/context/>Request Context</a></li><li><input type=checkbox id=section-a53d1bd91095fa28aef70cee327a5121 class=toggle>
<label for=section-a53d1bd91095fa28aef70cee327a5121 class="flex justify-between"><a href=/gateway/main/docs/references/filters/>Online Filter</a>
<span>▾</span></label><ul><li><a href=/gateway/main/docs/references/filters/echo/>echo</a></li><li><a href=/gateway/main/docs/references/filters/auto_generate_doc_id/>auto_generate_doc_id</a></li><li><a href=/gateway/main/docs/references/filters/basic_auth/>basic_auth</a></li><li><a href=/gateway/main/docs/references/filters/bulk_request_mutate/>bulk_request_mutate</a></li><li><a href=/gateway/main/docs/references/filters/bulk_request_throttle/>bulk_request_throttle</a></li><li><a href=/gateway/main/docs/references/filters/bulk_reshuffle/>bulk_reshuffle</a></li><li><a href=/gateway/main/docs/references/filters/bulk_response_process/>bulk_response_process</a></li><li><a href=/gateway/main/docs/references/filters/cache/>cache</a></li><li><a href=/gateway/main/docs/references/filters/clone/>clone</a></li><li><a href=/gateway/main/docs/references/filters/context_filter/>context_filter</a></li><li><a href=/gateway/main/docs/references/filters/context_limiter/>context_limiter</a></li><li><a href=/gateway/main/docs/references/filters/context_parse/>context_parse</a></li><li><a href=/gateway/main/docs/references/filters/context_regex_replace/>context_regex_replace</a></li><li><a href=/gateway/main/docs/references/filters/context_switch/>context_switch</a></li><li><a href=/gateway/main/docs/references/filters/date_range_precision_tuning/>date_range_precision_tuning</a></li><li><a href=/gateway/main/docs/references/filters/drop/>drop</a></li><li><a href=/gateway/main/docs/references/filters/dump/>dump</a></li><li><a href=/gateway/main/docs/references/filters/elasticsearch/>elasticsearch</a></li><li><a href=/gateway/main/docs/references/filters/elasticsearch_health_check/>elasticsearch_health_check</a></li><li><a href=/gateway/main/docs/references/filters/flow/>flow</a></li><li><a href=/gateway/main/docs/references/filters/hash_mod/>hash_mod</a></li><li><a href=/gateway/main/docs/references/filters/http/>http</a></li><li><a href=/gateway/main/docs/references/filters/javascript/>javascript</a></li><li><a href=/gateway/main/docs/references/filters/ldap_auth/>ldap_auth</a></li><li><a href=/gateway/main/docs/references/filters/logging/>logging</a></li><li><a href=/gateway/main/docs/references/filters/queue/>queue</a></li><li><a href=/gateway/main/docs/references/filters/ratio/>ratio</a></li><li><a href=/gateway/main/docs/references/filters/record/>record</a></li><li><a href=/gateway/main/docs/references/filters/redirect/>redirect</a></li><li><a href=/gateway/main/docs/references/filters/redis_pubsub/>redis_pubsub</a></li><li><a href=/gateway/main/docs/references/filters/request_api_key_filter/>request_api_key_filter</a></li><li><a href=/gateway/main/docs/references/filters/request_api_key_limiter/>request_api_key_limiter</a></li><li><a href=/gateway/main/docs/references/filters/request_body_json_del/>request_body_json_del</a></li><li><a href=/gateway/main/docs/references/filters/request_body_json_set/>request_body_json_set</a></li><li><a href=/gateway/main/docs/references/filters/request_body_regex_replace/>request_body_regex_replace</a></li><li><a href=/gateway/main/docs/references/filters/request_client_ip_filter/>request_client_ip_filter</a></li><li><a href=/gateway/main/docs/references/filters/request_client_ip_limiter/>request_client_ip_limiter</a></li><li><a href=/gateway/main/docs/references/filters/request_header_filter/>request_header_filter</a></li><li><a href=/gateway/main/docs/references/filters/request_host_filter/>request_host_filter</a></li><li><a href=/gateway/main/docs/references/filters/request_host_limiter/>request_host_limiter</a></li><li><a href=/gateway/main/docs/references/filters/request_method_filter/>request_method_filter</a></li><li><a href=/gateway/main/docs/references/filters/request_path_filter/>request_path_filter</a></li><li><a href=/gateway/main/docs/references/filters/request_path_limiter/>request_path_limiter</a></li><li><a href=/gateway/main/docs/references/filters/request_reshuffle/>request_reshuffle</a></li><li><a href=/gateway/main/docs/references/filters/request_user_filter/>request_user_filter</a></li><li><a href=/gateway/main/docs/references/filters/request_user_limiter/>request_user_limiter</a></li><li><a href=/gateway/main/docs/references/filters/response_body_regex_replace/>response_body_regex_replace</a></li><li><a href=/gateway/main/docs/references/filters/response_header_filter/>response_header_filter</a></li><li><a href=/gateway/main/docs/references/filters/response_header_format/>response_header_format</a></li><li><a href=/gateway/main/docs/references/filters/response_status_filter/>response_status_filter</a></li><li><a href=/gateway/main/docs/references/filters/retry_limiter/>retry_limiter</a></li><li><a href=/gateway/main/docs/references/filters/rewrite_to_bulk/>rewrite_to_bulk</a></li><li><a href=/gateway/main/docs/references/filters/sample/>sample</a></li><li><a href=/gateway/main/docs/references/filters/set_basic_auth/>set_basic_auth</a></li><li><a href=/gateway/main/docs/references/filters/set_context/>set_context</a></li><li><a href=/gateway/main/docs/references/filters/set_hostname/>set_hostname</a></li><li><a href=/gateway/main/docs/references/filters/set_request_header/>set_request_header</a></li><li><a href=/gateway/main/docs/references/filters/set_request_query_args/>set_request_query_args</a></li><li><a href=/gateway/main/docs/references/filters/set_response/>set_response</a></li><li><a href=/gateway/main/docs/references/filters/set_response_header/>set_response_header</a></li><li><a href=/gateway/main/docs/references/filters/sleep/>sleep</a></li><li><a href=/gateway/main/docs/references/filters/switch/>switch</a></li><li><a href=/gateway/main/docs/references/filters/translog/>translog</a></li></ul></li><li><input type=checkbox id=section-82db29a871579194764c352cfff582f2 class=toggle>
<label for=section-82db29a871579194764c352cfff582f2 class="flex justify-between"><a href=/gateway/main/docs/references/processors/>Offline Processor</a>
<span>▾</span></label><ul><li><a href=/gateway/main/docs/references/processors/bulk_indexing/>bulk_indexing</a></li><li><a href=/gateway/main/docs/references/processors/consumer/>consumer</a></li><li><a href=/gateway/main/docs/references/processors/dag/>dag</a></li><li><a href=/gateway/main/docs/references/processors/dump_hash/>dump_hash</a></li><li><a href=/gateway/main/docs/references/processors/flow_replay/>flow_replay</a></li><li><a href=/gateway/main/docs/references/processors/flow_runner/>flow_runner</a></li><li><a href=/gateway/main/docs/references/processors/index_diff/>index_diff</a></li><li><a href=/gateway/main/docs/references/processors/indexing_merge/>indexing_merge</a></li><li><a href=/gateway/main/docs/references/processors/json_indexing/>json_indexing</a></li><li><a href=/gateway/main/docs/references/processors/merge_to_bulk/>merge_to_bulk</a></li><li><a href=/gateway/main/docs/references/processors/queue_consumer/>queue_consumer</a></li><li><a href=/gateway/main/docs/references/processors/replay/>replay</a></li><li><a href=/gateway/main/docs/references/processors/smtp/>smtp</a></li></ul></li><li><input type=checkbox id=section-3de6688eceb9f20db2f0270adccf76e2 class=toggle>
<label for=section-3de6688eceb9f20db2f0270adccf76e2 class="flex justify-between"><a>Functional Component</a>
<span>▾</span></label><ul><li><a href=/gateway/main/docs/references/modules/floating_ip/>Floating IP</a></li><li><a href=/gateway/main/docs/references/modules/force_merge/>Index Segment Merging</a></li></ul></li><li><a href=/gateway/main/docs/references/config/>Other Configurations</a></li></ul></li><li><input type=checkbox id=section-391bcaab6cc03bd87e3373752bfd390e class=toggle>
<label for=section-391bcaab6cc03bd87e3373752bfd390e class="flex justify-between"><a>Tutorials</a>
<span>▾</span></label><ul><li><a href=/gateway/main/docs/tutorial/log4j2_filtering/>Protect Elasticsearch from Apache Log4j Vulnerability</a></li><li><a href=/gateway/main/docs/tutorial/online_query_rewrite/>Rewrite Your Elasticsearch Requests OnTheFly</a></li><li><a href=/gateway/main/docs/tutorial/request-logging/>Elasticsearch Search Requests Analysis/Audit</a></li><li><a href=/gateway/main/docs/tutorial/index_diff/>Document-Level Index Diff Between Two Elasticsearch Clusters</a></li><li><a href=/gateway/main/docs/tutorial/proxy_kibana/>Adding a TLS and Basic Security for Kibana</a></li><li><a href=/gateway/main/docs/tutorial/proxy_elasticsearch/>Enable HTTPS/TLS + Basic Auth for Elasticsearch easily</a></li><li><a href=/gateway/main/docs/tutorial/fix_count_in_search_response/>Handle Count Structure of Different Elasticsearch Versions</a></li><li><a href=/gateway/main/docs/tutorial/es-hadoop_integration/>Integrate with Elasticsearch-Hadoop</a></li><li><a href=/gateway/main/docs/tutorial/prometheus_integration/>Integration with Prometheus</a></li><li><a href=/gateway/main/docs/tutorial/routing_to_cluser_by_index/>Unified access indexes from different clusters in Kibana</a></li><li><a href=/gateway/main/docs/tutorial/path_rewrite_by_javascript/>Use JavaScript for complex query rewriting</a></li></ul></li><li><input type=checkbox id=section-7e4e95606453deb85437b78d9c3f2d72 class=toggle>
<label for=section-7e4e95606453deb85437b78d9c3f2d72 class="flex justify-between"><a href=/gateway/main/docs/user-cases/>User Cases</a>
<span>▾</span></label><ul><li><a href=/gateway/main/docs/user-cases/stories/indexing_speedup_for_big_index_rebuild/>How an Insurance Group Improved the Indexing Speed by 200x Times</a></li><li><a href=/gateway/main/docs/user-cases/stories/a_cross_region_cluster_access_locality/>Nearest Cluster Access Across Two Cloud Providers</a></li></ul></li><li><a href=/gateway/main/docs/troubleshooting/>FAQs</a><ul></ul></li><li><a href=/gateway/main/docs/release-notes/>Release Notes</a><ul></ul></li></ul><ul><li><a href=https://github.com/infinilabs/gateway target=_blank rel=noopener>Github</a></li></ul><div class=book-languages tabindex=0 aria-haspopup=true><ul><li class="flex align-center"><img src=/gateway/main/svg/translate.svg class=book-icon alt=Languages>
English</li></ul><ul class=book-languages-list><li class=active><a href=/gateway/main/ class="flex align-center"><img src=/gateway/main/svg/translate.svg class=book-icon alt=Languages>
English</a></li><li><a href=/gateway/main/zh/docs/getting-started/benchmark/ class="flex align-center"><img src=/gateway/main/svg/translate.svg class=book-icon alt=Languages>
简体中文</a></li></ul></div></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/gateway/main/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Benchmark Testing</strong>
<label for=toc-control><img src=/gateway/main/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#benchmark-testing>Benchmark Testing</a><ul><li><a href=#loadgen>Loadgen</a><ul><li><a href=#runner-configurations>Runner Configurations</a></li><li><a href=#http-headers-canonization>HTTP Headers Canonization</a></li></ul></li><li><a href=#usage-of-variables>Usage of Variables</a><ul><li><a href=#examples>Examples</a></li><li><a href=#environment-variables>Environment Variables</a></li></ul></li><li><a href=#request-definition>Request Definition</a><ul><li><a href=#simulating-bulk-ingestion>Simulating Bulk Ingestion</a></li><li><a href=#response-assertions>Response Assertions</a></li><li><a href=#dynamic-variable-registration>Dynamic Variable Registration</a></li><li><a href=#benchmark-test>Benchmark Test</a></li><li><a href=#cli-parameters>CLI Parameters</a></li><li><a href=#limiting-the-client-workload>Limiting the Client Workload</a></li><li><a href=#limiting-the-total-number-of-requests>Limiting the Total Number of Requests</a></li><li><a href=#using-auto-incremental-ids-to-ensure-the-document-sequence>Using Auto Incremental IDs to Ensure the Document Sequence</a></li><li><a href=#reuse-variables-in-request-context>Reuse variables in Request Context</a></li><li><a href=#customize-header>Customize Header</a></li></ul></li><li><a href=#running-testing-suites>Running Testing Suites</a><ul><li><a href=#environment-variables-1>Environment Variables</a></li><li><a href=#preparing-test-cases>Preparing Test Cases</a></li><li><a href=#executing-the-test-cases>Executing the Test Cases</a></li></ul></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=benchmark-testing>Benchmark Testing
<a class=anchor href=#benchmark-testing>#</a></h1><p>You are advised to use the Elasticsearch-dedicated benchmark tool <code>Loadgen</code> to test the gateway performance.</p><p>Highlights of Loadgen:</p><ul><li>Robust performance</li><li>Lightweight and dependency-free</li><li>Random selection of template-based parameters</li><li>High concurrency</li><li>Balanced traffic control at the benchmark end</li><li>Validate server responses.</li></ul><blockquote><p>Download URL:
<a href=http://release.infinilabs.com/loadgen/>http://release.infinilabs.com/loadgen/</a></p></blockquote><h2 id=loadgen>Loadgen
<a class=anchor href=#loadgen>#</a></h2><p>Loadgen is easy to use. After the tool is downloaded and decompressed, two files are obtained: one executable program and one configuration file <code>loadgen.yml</code>. An example of the configuration file is as follows:</p><pre><code>env:
  ES_USERNAME: elastic
  ES_PASSWORD: elastic
runner:
  # total_rounds: 1
  no_warm: false
  log_requests: false
  assert_invalid: false
  assert_error: false
variables:
  - name: ip
    type: file
    path: test/ip.txt
  - name: user
    type: file
    path: test/user.txt
  - name: id
    type: sequence
  - name: uuid
    type: uuid
  - name: now_local
    type: now_local
  - name: now_utc
    type: now_utc
  - name: now_unix
    type: now_unix
requests:
  - request:
      method: GET
      basic_auth:
        username: $[[env.ES_USERNAME]]
        password: $[[env.ES_PASSWORD]]
      url: http://localhost:8000/medcl/_search
      body: '{  &quot;query&quot;: {&quot;match&quot;: {    &quot;name&quot;: &quot;$[[user]]&quot;  }}}'
</code></pre><h3 id=runner-configurations>Runner Configurations
<a class=anchor href=#runner-configurations>#</a></h3><p>By default, <code>loadgen</code> will run under the benchmarking mode, repeating through all the <code>requests</code> during the specified duration (<code>-d</code>). If you only need to test the responses, setting <code>runner.total_rounds: 1</code> will let <code>loadgen</code> run for only once.</p><h3 id=http-headers-canonization>HTTP Headers Canonization
<a class=anchor href=#http-headers-canonization>#</a></h3><p>By default, <code>loadgen</code> will canonilize the HTTP response header keys received from the server side (<code>user-agent: xxx</code> -> <code>User-Agent: xxx</code>). If you need to assert the header keys exactly, you can set <code>runner.disable_header_names_normalizing: true</code> to disable this behavior.</p><h2 id=usage-of-variables>Usage of Variables
<a class=anchor href=#usage-of-variables>#</a></h2><p>In the above configuration, <code>variables</code> is used to define variable parameters and variables are identified by <code>name</code>. In a constructed request, <code>$[[Variable name]]</code> can be used to access the value of the variable. Supported variable types are as follows:</p><table><thead><tr><th>Type</th><th>Description</th><th>Parameters</th></tr></thead><tbody><tr><td><code>file</code></td><td>Load variables from file</td><td><code>path</code>: the path of the data files<br><code>data</code>: a list of values, will get appended to the end of the data specified by <code>path</code> file</td></tr><tr><td><code>list</code></td><td>Defined variables inline</td><td>use <code>data</code> to define a string array</td></tr><tr><td><code>sequence</code></td><td>32-bit Variable of the auto incremental numeric type</td><td><code>from</code>: the minimum of the values<br><code>to</code>: the maximum of the values</td></tr><tr><td><code>sequence64</code></td><td>64-bit Variable of the auto incremental numeric type</td><td><code>from</code>: the minimum of the values<br><code>to</code>: the maximum of the values</td></tr><tr><td><code>range</code></td><td>Variable of the range numbers, support parameters <code>from</code> and <code>to</code> to define the range</td><td><code>from</code>: the minimum of the values<br><code>to</code>: the maximum of the values</td></tr><tr><td><code>random_array</code></td><td>Generate a random array from the variable specified by <code>variable_key</code></td><td><code>variable_key</code>: the variable name for the source of array values<br><code>size</code>: the size of array<br><code>square_bracket</code>: <code>true/false</code>, whether to add <code>[]</code> for the outputed array<br><code>string_bracket</code>: the string to surround the outputed elements.</td></tr><tr><td><code>uuid</code></td><td>Variable of the UUID character type</td><td></td></tr><tr><td><code>now_local</code></td><td>Current time and local time zone</td><td></td></tr><tr><td><code>now_utc</code></td><td>Current time and UTC time zone</td><td></td></tr><tr><td><code>now_unix</code></td><td>Current time and Unix timestamp</td><td></td></tr><tr><td><code>now_with_format</code></td><td>Current time，support parameter <code>format</code> to customize the output format， eg: <code>2006-01-02T15:04:05-0700</code></td><td><code>format</code>: the format of the time output (
<a href=https://www.geeksforgeeks.org/time-formatting-in-golang/>Example</a>)</td></tr></tbody></table><h3 id=examples>Examples
<a class=anchor href=#examples>#</a></h3><p>Variable parameters of the <code>file</code> type are loaded from an external text file. One variable parameter occupies one line. When one variable of the file type is accessed, one variable value is taken randomly. An example of the variable format is as follows:</p><pre><code>➜  loadgen git:(master) ✗ cat test/user.txt
medcl
elastic
</code></pre><p>Tips about how to generate a random string of fixed length, such as 1024 per line:</p><pre><code>LC_CTYPE=C tr -dc A-Za-z0-9_\!\@\#\$\%\^\&amp;\*\(\)-+= &lt; /dev/random | head -c 1024 &gt;&gt; 1k.txt
</code></pre><h3 id=environment-variables>Environment Variables
<a class=anchor href=#environment-variables>#</a></h3><p><code>loadgen</code> supporting loading and using environment variables in <code>loadgen.yml</code>, you can specify the default values in <code>env</code> configuration. <code>loadgen</code> will overwrite the variables at runtime if they&rsquo;re also specified by the command-line environment.</p><p>The environment variables can be access by <code>$[[env.ENV_KEY]]</code>:</p><pre><code># Default values for the environment variables.
env:
  ES_USERNAME: elastic
  ES_PASSWORD: elastic
  ES_ENDPOINT: http://localhost:8000
requests:
  - request:
      method: GET
      basic_auth:
        username: $[[env.ES_USERNAME]] # Use environment variables
        password: $[[env.ES_PASSWORD]] # Use environment variables
      url: $[[env.ES_ENDPOINT]]/medcl/_search # Use environment variables
      body: '{  &quot;query&quot;: {&quot;match&quot;: {    &quot;name&quot;: &quot;$[[user]]&quot;  }}}'
</code></pre><h2 id=request-definition>Request Definition
<a class=anchor href=#request-definition>#</a></h2><p>The <code>requests</code> node is used to set requests to be executed by Loadgen in sequence. Loadgen supports fixed-parameter requests and requests constructed using template-based variable parameters. The following is an example of a common query request.</p><pre><code>requests:
  - request:
      method: GET
      basic_auth:
        username: elastic
        password: pass
      url: http://localhost:8000/medcl/_search?q=name:$[[user]]
</code></pre><p>In the above query, Loadgen conducts queries based on the <code>medcl</code> index and executes one query based on the <code>name</code> field. The value of each request is from the random variable <code>user</code>.</p><h3 id=simulating-bulk-ingestion>Simulating Bulk Ingestion
<a class=anchor href=#simulating-bulk-ingestion>#</a></h3><p>It is very easy to use Loadgen to simulate bulk ingestion. Configure one index operation in the request body and then use the <code>body_repeat_times</code> parameter to randomly replicate several parameterized requests to complete the preparation of a batch of requests. See the following example.</p><pre><code>  - request:
      method: POST
      basic_auth:
        username: test
        password: testtest
      url: http://localhost:8000/_bulk
      body_repeat_times: 1000
      body: |
        { &quot;index&quot; : { &quot;_index&quot; : &quot;medcl-y4&quot;,&quot;_type&quot;:&quot;doc&quot;, &quot;_id&quot; : &quot;$[[uuid]]&quot; } }
        { &quot;id&quot; : &quot;$[[id]]&quot;,&quot;field1&quot; : &quot;$[[user]]&quot;,&quot;ip&quot; : &quot;$[[ip]]&quot;,&quot;now_local&quot; : &quot;$[[now_local]]&quot;,&quot;now_unix&quot; : &quot;$[[now_unix]]&quot; }
</code></pre><h3 id=response-assertions>Response Assertions
<a class=anchor href=#response-assertions>#</a></h3><p>You can use the <code>assert</code> configuration to check the response values. <code>assert</code> now supports most of all the
<a href=https://www.infinilabs.com/en/docs/latest/gateway/references/flow/#condition-type>condition checkers</a> of INFINI Gateway.</p><pre><code>requests:
  - request:
      method: GET
      basic_auth:
        username: elastic
        password: pass
      url: http://localhost:8000/medcl/_search?q=name:$[[user]]
    assert:
      equals:
        _ctx.response.status: 201
</code></pre><p>The response value can be accessed from the <code>_ctx</code> value, currently it contains these values:</p><table><thead><tr><th>Parameter</th><th>Description</th></tr></thead><tbody><tr><td><code>_ctx.response.status</code></td><td>HTTP response status code</td></tr><tr><td><code>_ctx.response.header</code></td><td>HTTP response headers</td></tr><tr><td><code>_ctx.response.body</code></td><td>HTTP response body text</td></tr><tr><td><code>_ctx.response.body_json</code></td><td>If the HTTP response body is a valid JSON string, you can access the JSON fields by <code>body_json</code></td></tr><tr><td><code>_ctx.elapsed</code></td><td>The time elapsed since request sent to the server (milliseconds)</td></tr></tbody></table><p>If the request failed (e.g. the host is not reachable), <code>loadgen</code> will record it under <code>Number of Errors</code> as part of the testing output. If you configured <code>runner.assert_error: true</code>, <code>loadgen</code> will exit as <code>exit(2)</code> when there&rsquo;re any requests failed.</p><p>If the assertion failed, <code>loadgen</code> will record it under <code>Number of Invalid</code> as part of the testing output and skip the subsequent requests in this round. If you configured <code>runner.assert_invalid: true</code>, <code>loadgen</code> will exit as <code>exit(1)</code> when there&rsquo;re any assertions failed.</p><h3 id=dynamic-variable-registration>Dynamic Variable Registration
<a class=anchor href=#dynamic-variable-registration>#</a></h3><p>Each request can use <code>register</code> to dynamically set the variables based on the response value, a common usage is to update the parameters of the later requests based on the previous responses.</p><p>In the below example, we&rsquo;re registering the response value <code>_ctx.response.body_json.test.settings.index.uuid</code> of the <code>$[[env.ES_ENDPOINT]]/test</code> to the <code>index_id</code> variable, then we can access it by <code>$[[index_id]]</code>.</p><pre><code>requests:
  - request:
      method: GET
      url: $[[env.ES_ENDPOINT]]/test
    assert:
      equals:
        _ctx.response.status: 200
    register:
      - index_id: _ctx.response.body_json.test.settings.index.uuid
</code></pre><h3 id=benchmark-test>Benchmark Test
<a class=anchor href=#benchmark-test>#</a></h3><p>Run Loadgen to perform the benchmark test as follows:</p><pre><code>➜  loadgen git:(master) ✗ ./bin/loadgen -d 30 -c 100 -compress
   __   ___  _      ___  ___   __    __
  / /  /___\/_\    /   \/ _ \ /__\/\ \ \
 / /  //  ///_\\  / /\ / /_\//_\ /  \/ /
/ /__/ \_//  _  \/ /_// /_\\//__/ /\  /
\____|___/\_/ \_/___,'\____/\__/\_\ \/

[LOADGEN] A http load generator and testing suit.
[LOADGEN] 1.0.0_SNAPSHOT, 83f2cb9, Sun Jul 4 13:52:42 2021 +0800, medcl, support single item in dict files
[07-19 16:15:00] [INF] [instance.go:24] workspace: data/loadgen/nodes/0
[07-19 16:15:00] [INF] [loader.go:312] warmup started
[07-19 16:15:00] [INF] [app.go:306] loadgen now started.
[07-19 16:15:00] [INF] [loader.go:316] [GET] http://localhost:8000/medcl/_search
[07-19 16:15:00] [INF] [loader.go:317] status: 200,&lt;nil&gt;,{&quot;took&quot;:1,&quot;timed_out&quot;:false,&quot;_shards&quot;:{&quot;total&quot;:1,&quot;successful&quot;:1,&quot;skipped&quot;:0,&quot;failed&quot;:0},&quot;hits&quot;:{&quot;total&quot;:{&quot;value&quot;:0,&quot;relation&quot;:&quot;eq&quot;},&quot;max_score&quot;:null,&quot;hits&quot;:[]}}
[07-19 16:15:00] [INF] [loader.go:316] [GET] http://localhost:8000/medcl/_search?q=name:medcl
[07-19 16:15:00] [INF] [loader.go:317] status: 200,&lt;nil&gt;,{&quot;took&quot;:1,&quot;timed_out&quot;:false,&quot;_shards&quot;:{&quot;total&quot;:1,&quot;successful&quot;:1,&quot;skipped&quot;:0,&quot;failed&quot;:0},&quot;hits&quot;:{&quot;total&quot;:{&quot;value&quot;:0,&quot;relation&quot;:&quot;eq&quot;},&quot;max_score&quot;:null,&quot;hits&quot;:[]}}
[07-19 16:15:01] [INF] [loader.go:316] [POST] http://localhost:8000/_bulk
[07-19 16:15:01] [INF] [loader.go:317] status: 200,&lt;nil&gt;,{&quot;took&quot;:120,&quot;errors&quot;:false,&quot;items&quot;:[{&quot;index&quot;:{&quot;_index&quot;:&quot;medcl-y4&quot;,&quot;_type&quot;:&quot;doc&quot;,&quot;_id&quot;:&quot;c3qj9123r0okahraiej0&quot;,&quot;_version&quot;:1,&quot;result&quot;:&quot;created&quot;,&quot;_shards&quot;:{&quot;total&quot;:2,&quot;successful&quot;:1,&quot;failed&quot;:0},&quot;_seq_no&quot;:5735852,&quot;_primary_term&quot;:3,&quot;status&quot;:201}}]}
[07-19 16:15:01] [INF] [loader.go:325] warmup finished

5253 requests in 32.756483336s, 524.61KB sent, 2.49MB received

[Loadgen Client Metrics]
Requests/sec:		175.10
Request Traffic/sec:	17.49KB
Total Transfer/sec:	102.34KB
Avg Req Time:		5.711022ms
Fastest Request:	440.448µs
Slowest Request:	3.624302658s
Number of Errors:	0
Number of Invalid:	0
Status 200:		5253

[Estimated Server Metrics]
Requests/sec:		160.37
Transfer/sec:		93.73KB
Avg Req Time:		623.576686ms
</code></pre><p>Loadgen executes all requests once to warm up before the formal benchmark test. If an error occurs, a prompt is displayed, asking you whether to continue.
The warm-up request results are also output to the terminal. After execution, an execution summary is output.
You can set <code>runner.no_warm: true</code> to skip the warm-up stage.</p><blockquote><p>The final results of Loadgen are the cumulative statistics after all requests are executed, and they may be inaccurate. You are advised to start the Kibana dashboard to check all operating indicators of Elasticsearch in real time.</p></blockquote><h3 id=cli-parameters>CLI Parameters
<a class=anchor href=#cli-parameters>#</a></h3><p>Loadgen cyclically executes requests defined in the configuration file. By default, Loadgen runs for <code>5s</code> and then automatically exits. If you want to prolong the running time or increase the concurrency, you can set the tool&rsquo;s startup parameters. The help commands are as follows:</p><pre><code>➜  loadgen git:(master) ✗ ./bin/loadgen --help
Usage of ./bin/loadgen:
  -c int
    	Number of concurrent threads (default 1)
  -compress
    	Compress requests with gzip
  -config string
    	the location of config file, default: loadgen.yml (default &quot;loadgen.yml&quot;)
  -d int
    	Duration of tests in seconds (default 5)
  -debug
    	run in debug mode, loadgen will quit with panic error
  -l int
    	Limit total requests (default -1)
  -log string
    	the log level,options:trace,debug,info,warn,error (default &quot;info&quot;)
  -r int
    	Max requests per second (fixed QPS) (default -1)
  -v	version
</code></pre><h3 id=limiting-the-client-workload>Limiting the Client Workload
<a class=anchor href=#limiting-the-client-workload>#</a></h3><p>You can use Loadgen and set the CLI parameter <code>-r</code> to restrict the number of requests that can be sent by the client per second, so as to evaluate the response time and load of Elasticsearch under fixed pressure. See the following example.</p><pre><code>➜  loadgen git:(master) ✗ ./bin/loadgen -d 30 -c 100 -r 100
</code></pre><blockquote><p>Note: The client throughput limit may not be accurate enough in the case of massive concurrencies.</p></blockquote><h3 id=limiting-the-total-number-of-requests>Limiting the Total Number of Requests
<a class=anchor href=#limiting-the-total-number-of-requests>#</a></h3><p>You can set the <code>-l</code> parameter to control the total number of requests that can be sent by the client, so as to generate a fixed number of documents. Modify the configuration as follows:</p><pre><code>requests:
  - request:
      method: POST
      basic_auth:
        username: test
        password: testtest
      url: http://localhost:8000/medcl-test/doc2/_bulk
      body_repeat_times: 1
      body: |
        { &quot;index&quot; : { &quot;_index&quot; : &quot;medcl-test&quot;, &quot;_id&quot; : &quot;$[[uuid]]&quot; } }
        { &quot;id&quot; : &quot;$[[id]]&quot;,&quot;field1&quot; : &quot;$[[user]]&quot;,&quot;ip&quot; : &quot;$[[ip]]&quot; }
</code></pre><p>Configured parameters use the content of only one document for each request. Then, the system executes Loadgen.</p><pre><code>./bin/loadgen -config loadgen-gw.yml -d 600 -c 100 -l 50000
</code></pre><p>After execution, <code>50000</code> records are added for the Elasticsearch index <code>medcl-test</code>.</p><h3 id=using-auto-incremental-ids-to-ensure-the-document-sequence>Using Auto Incremental IDs to Ensure the Document Sequence
<a class=anchor href=#using-auto-incremental-ids-to-ensure-the-document-sequence>#</a></h3><p>If the IDs of generated documents need to increase regularly to facilitate comparison, you can use the auto incremental IDs of the <code>sequence</code> type as the primary key and avoid using random numbers in the content. See the following example.</p><pre><code>requests:
  - request:
      method: POST
      basic_auth:
        username: test
        password: testtest
      url: http://localhost:8000/medcl-test/doc2/_bulk
      body_repeat_times: 1
      body: |
        { &quot;index&quot; : { &quot;_index&quot; : &quot;medcl-test&quot;, &quot;_id&quot; : &quot;$[[id]]&quot; } }
        { &quot;id&quot; : &quot;$[[id]]&quot; }
</code></pre><h3 id=reuse-variables-in-request-context>Reuse variables in Request Context
<a class=anchor href=#reuse-variables-in-request-context>#</a></h3><p>In a request, we might want use the same variable value, such as the <code>routing</code> parameter to control the shard destination, also store the field in the JSON document.
You can use <code>runtime_variables</code> to set request-level variables, or <code>runtime_body_line_variables</code> to define request-body-level variables.
If the request body set <code>body_repeat_times</code>, each line will be different, as shown in the following example:</p><pre><code>variables:
  - name: id
    type: sequence
  - name: uuid
    type: uuid
  - name: now_local
    type: now_local
  - name: now_utc
    type: now_utc
  - name: now_unix
    type: now_unix
  - name: suffix
    type: range
    from: 10
    to: 15
requests:
  - request:
      method: POST
      runtime_variables:
        batch_no: id
      runtime_body_line_variables:
        routing_no: uuid
      basic_auth:
        username: ingest
        password: password
      #url: http://localhost:8000/_search?q=$[[id]]
      url: http://192.168.3.188:9206/_bulk
      body_repeat_times: 10
      body: |
        { &quot;create&quot; : { &quot;_index&quot; : &quot;test-$[[suffix]]&quot;,&quot;_type&quot;:&quot;doc&quot;, &quot;_id&quot; : &quot;$[[uuid]]&quot; , &quot;routing&quot; : &quot;$[[routing_no]]&quot; } }
        { &quot;id&quot; : &quot;$[[uuid]]&quot;,&quot;routing_no&quot; : &quot;$[[routing_no]]&quot;,&quot;batch_number&quot; : &quot;$[[batch_no]]&quot;, &quot;random_no&quot; : &quot;$[[suffix]]&quot;,&quot;ip&quot; : &quot;$[[ip]]&quot;,&quot;now_local&quot; : &quot;$[[now_local]]&quot;,&quot;now_unix&quot; : &quot;$[[now_unix]]&quot; }
</code></pre><p>We defined the <code>batch_no</code> variable to represent the same batch number in a batch of documents, and the <code>routing_no</code> variable to represent the routing value at each document level.</p><h3 id=customize-header>Customize Header
<a class=anchor href=#customize-header>#</a></h3><pre><code>requests:
  - request:
      method: GET
      url: http://localhost:8000/test/_search
      headers:
        - Agent: &quot;Loadgen-1&quot;
      disable_header_names_normalizing: false
</code></pre><p>By default, <code>loadgen</code> will canonilize the HTTP header keys before sending the request (<code>user-agent: xxx</code> -> <code>User-Agent: xxx</code>), if you need to set the header keys exactly as is, set <code>disable_header_names_normalizing: true</code>.</p><h2 id=running-testing-suites>Running Testing Suites
<a class=anchor href=#running-testing-suites>#</a></h2><p>If you want to run multiple <code>loadgen</code> test cases against different environments, you can use <code>loadrun</code> to ease the process.</p><blockquote><p>Download URL:
<a href=http://release.infinilabs.com/loadrun/>http://release.infinilabs.com/loadrun/</a></p></blockquote><p>After the tool is downloaded and decompressed, two files are obtained: one executable program <code>loadrun</code> and one configuration file <code>loadrun.yml</code>. An example of the configuration file is as follows:</p><pre><code>env:
  LR_LOADGEN_CMD: ./bin/loadgen # The path to the executable of loadgen tool.
  LR_TEST_DIR: ./testing # The path to the test cases.
  # If you want to start gateway dynamically and automatically:
  LR_GATEWAY_CMD: ./bin/gateway # The path to the executable of INFINI Gateway
  LR_GATEWAY_HOST: 0.0.0.0:18000 # The binding host of the INFINI Gateway
  LR_GATEWAY_API_HOST: 0.0.0.0:19000 # The binding host of the INFINI Gateway API server
  # Set up other envrionments for the gateway and loadgen
  LR_ELASTICSEARCH_ENDPOINT: http://localhost:19201
  CUSTOM_ENV: myenv
tests:
  # The relative path of test cases under `LR_TEST_DIR`
  #
  # - gateway.yml: (Optional) the configuration to start the INFINI Gateway dynamically.
  # - loadgen.yml: the configuration to run the loadgen tool.
  #
  # The environments set in `env` section will be passed to the INFINI Gateway and loadgen.
  - path: cases/gateway/echo/echo_with_context
</code></pre><h3 id=environment-variables-1>Environment Variables
<a class=anchor href=#environment-variables-1>#</a></h3><p><code>loadrun</code> controls the INFINI Gateway and <code>loadgen</code> by environment variables, you can set these environment variables in the <code>env</code> section of the YAML configuration. The following variables are required:</p><table><thead><tr><th>Variable</th><th>Description</th></tr></thead><tbody><tr><td><code>LR_TEST_DIR</code></td><td>The parent directory of all test cases</td></tr><tr><td><code>LR_LOADGEN_CMD</code></td><td>The path to the <code>loadgen</code> executable</td></tr></tbody></table><p>If you need <code>loadrun</code> to start INFINI Gateway instances dynamically, the following variables are required:</p><table><thead><tr><th>Variable</th><th>Description</th></tr></thead><tbody><tr><td><code>LR_GATEWAY_CMD</code></td><td>The path to the INFINI Gateway executable</td></tr><tr><td><code>LR_GATEWAY_HOST</code></td><td>The binding host:port of INFINI Gateway entry</td></tr><tr><td><code>LR_GATEWAY_API_HOST</code></td><td>The binding host:port of INFINI Gateway API</td></tr></tbody></table><h3 id=preparing-test-cases>Preparing Test Cases
<a class=anchor href=#preparing-test-cases>#</a></h3><p>You can add multiple test cases under the <code>tests</code> section, each path points to the relative path of the test case directory. <code>loadrun</code> will read the configuration <code>gateway.yml</code> (optional) and <code>loadgen.yml</code> in each directory.</p><p>All environment variables configured in the <code>env</code> section can be accessed within <code>gateway.yml</code> and <code>loadgen.yml</code>.</p><p>A sample configuraiton of <code>gateway.yml</code>:</p><pre><code>path.data: data
path.logs: log

entry:
  - name: my_es_entry
    enabled: true
    router: my_router
    max_concurrency: 200000
    network:
      binding: $[[env.LR_GATEWAY_HOST]]

flow:
  - name: hello_world
    filter:
      - echo:
          message: 'hello world'
router:
  - name: my_router
    default_flow: hello_world
</code></pre><p>A sample configuraiton of <code>loadgen.yml</code>:</p><pre><code>runner:
  total_rounds: 1
  no_warm: true
  log_requests: true
  assert_invalid: true
  assert_error: true
requests:
  - request:
      method: GET
      url: http://$[[env.LR_GATEWAY_HOST]]/
    assert:
      and:
        - equals:
            _ctx.response.status: 200
        - equals:
            _ctx.response.body: 'hello world'
</code></pre><h3 id=executing-the-test-cases>Executing the Test Cases
<a class=anchor href=#executing-the-test-cases>#</a></h3><p>Once the <code>loadrun.yml</code> is ready, you can run <code>loadrun</code> with the command below:</p><pre><code>loadrun -config ./loadrun.yml
</code></pre><p><code>loadrun</code> will execute the test cases one by one, and output the testing result:</p><pre><code>   __   ___  _      ___  ___   __    __
  / /  /___\/_\    /   \/ _ \ /__\/\ \ \
 / /  //  ///_\\  / /\ / /_\//_\ /  \/ /
/ /__/ \_//  _  \/ /_// /_\\//__/ /\  /
\____|___/\_/ \_/___,'\____/\__/\_\ \/

[LOAD-RUNNER] A testing suite runner
[LOAD-RUNNER] 1.0.0_SNAPSHOT#001, 2023-02-21 02:49:57, 2023-12-31 10:10:10, b427e3657a1336b4839a7eff59f79f8e334f3934
[02-21 10:50:05] [INF] [app.go:192] initializing loadrun
[02-21 10:50:05] [INF] [app.go:193] using config: /Users/kassian/Workspace/infini/src/infini.sh/testing/suites/dev.yml
[02-21 10:50:05] [INF] [instance.go:78] workspace: /Users/kassian/Workspace/infini/src/infini.sh/testing/data/loadrun/nodes/cfpihf15k34iqhpd4d00
[02-21 10:50:05] [INF] [app.go:399] loadrun is up and running now.
[2023-02-21 10:50:05][TEST][SUCCESS] [setup/loadgen/cases/dummy] duration: 105(ms)

1 requests in 68.373875ms, 0.00bytes sent, 0.00bytes received

[Loadgen Client Metrics]
Requests/sec:       0.20
Request Traffic/sec:    0.00bytes
Total Transfer/sec: 0.00bytes
Avg Req Time:       5s
Fastest Request:    68.373875ms
Slowest Request:    68.373875ms
Number of Errors:   0
Number of Invalid:  0
Status 200:     1

[Estimated Server Metrics]
Requests/sec:       14.63
Transfer/sec:       0.00bytes
Avg Req Time:       68.373875ms


[2023-02-21 10:50:06][TEST][FAILED] [setup/gateway/cases/echo/echo_with_context/] duration: 1274(ms)
#0 request, GET http://$[[env.LR_GATEWAY_HOST]]/any/, assertion failed, skiping subsequent requests
1 requests in 1.255678s, 0.00bytes sent, 0.00bytes received

[Loadgen Client Metrics]
Requests/sec:       0.20
Request Traffic/sec:    0.00bytes
Total Transfer/sec: 0.00bytes
Avg Req Time:       5s
Fastest Request:    1.255678s
Slowest Request:    1.255678s
Number of Errors:   1
Number of Invalid:  1
Status 0:       1

[Estimated Server Metrics]
Requests/sec:       0.80
Transfer/sec:       0.00bytes
Avg Req Time:       1.255678s

</code></pre></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div class=book-languages tabindex=0 aria-haspopup=true><ul><li class="flex align-center"><img src=/gateway/main/svg/translate.svg class=book-icon alt=Languages>
English</li></ul><ul class=book-languages-list><li class=active><a href=/gateway/main/ class="flex align-center"><img src=/gateway/main/svg/translate.svg class=book-icon alt=Languages>
English</a></li><li><a href=/gateway/main/zh/docs/getting-started/benchmark/ class="flex align-center"><img src=/gateway/main/svg/translate.svg class=book-icon alt=Languages>
简体中文</a></li></ul></div><div><a class="flex align-center" href=https://github.com/infinilabs/gateway/edit/main/docs/content.en/docs/getting-started/benchmark.md target=_blank rel=noopener><img src=/gateway/main/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div><div class="flex align-center footer">©INFINI.LTD, All Rights Reserved.</div><script>(function(h,o,t,j,a,r){h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};h._hjSettings={hjid:2567416,hjsv:6};a=o.getElementsByTagName('head')[0];r=o.createElement('script');r.async=1;r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;a.appendChild(r);})(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-RJPTVP614C"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','G-RJPTVP614C');</script><script type=text/javascript>var _smartsupp=_smartsupp||{};_smartsupp.key='691ff544d18a237005a011a7290b839d8fe811a4';window.smartsupp||(function(d){var s,c,o=smartsupp=function(){o._.push(arguments)};o._=[];s=d.getElementsByTagName('script')[0];c=d.createElement('script');c.type='text/javascript';c.charset='utf-8';c.async=true;c.src='https://www.smartsuppchat.com/loader.js?';s.parentNode.insertBefore(c,s);})(document);</script></div></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents><ul><li><a href=#benchmark-testing>Benchmark Testing</a><ul><li><a href=#loadgen>Loadgen</a><ul><li><a href=#runner-configurations>Runner Configurations</a></li><li><a href=#http-headers-canonization>HTTP Headers Canonization</a></li></ul></li><li><a href=#usage-of-variables>Usage of Variables</a><ul><li><a href=#examples>Examples</a></li><li><a href=#environment-variables>Environment Variables</a></li></ul></li><li><a href=#request-definition>Request Definition</a><ul><li><a href=#simulating-bulk-ingestion>Simulating Bulk Ingestion</a></li><li><a href=#response-assertions>Response Assertions</a></li><li><a href=#dynamic-variable-registration>Dynamic Variable Registration</a></li><li><a href=#benchmark-test>Benchmark Test</a></li><li><a href=#cli-parameters>CLI Parameters</a></li><li><a href=#limiting-the-client-workload>Limiting the Client Workload</a></li><li><a href=#limiting-the-total-number-of-requests>Limiting the Total Number of Requests</a></li><li><a href=#using-auto-incremental-ids-to-ensure-the-document-sequence>Using Auto Incremental IDs to Ensure the Document Sequence</a></li><li><a href=#reuse-variables-in-request-context>Reuse variables in Request Context</a></li><li><a href=#customize-header>Customize Header</a></li></ul></li><li><a href=#running-testing-suites>Running Testing Suites</a><ul><li><a href=#environment-variables-1>Environment Variables</a></li><li><a href=#preparing-test-cases>Preparing Test Cases</a></li><li><a href=#executing-the-test-cases>Executing the Test Cases</a></li></ul></li></ul></li></ul></nav></aside></main></body></html>